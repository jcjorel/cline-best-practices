

--- SERVER START ATTEMPT AT 2025-04-17 16:15:15 ---

2025-04-17 16:15:19,955 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 16:15:19,956 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 16:15:19,966 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 16:15:19,966 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 16:15:19,967 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 16:15:19,967 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 16:15:19,968 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 16:15:19,969 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 16:15:19,970 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 16:15:19,970 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 16:15:19,970 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 16:15:20,016 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 16:15:20,019 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 16:15:20,032 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 16:15:20,032 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 16:15:20,032 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 16:15:20,033 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 16:15:20,033 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 16:15:20,033 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 16:15:20,033 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 16:15:20,048 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 16:15:20,049 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 16:15:20,049 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 16:15:20,049 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 16:15:20,050 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 16:15:20,050 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 16:15:20,051 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 16:15:20,051 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 16:15:20,051 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, filter, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, change_queue, fs_monitor, scheduler, mcp_server
2025-04-17 16:15:20,052 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 16:15:20,052 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:15:20,052 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:15:20,053 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 16:15:20,066 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 16:15:20,068 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 16:15:20,068 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 16:15:20,069 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 16:15:20,069 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-17 16:15:20,069 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:15:20,069 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:15:20,070 - dbp.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-17 16:15:20,071 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-17 16:15:20,071 - dbp.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-17 16:15:20,071 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-17 16:15:20,072 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-17 16:15:20,073 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-17 16:15:20,076 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-17 16:15:20,077 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-17 16:15:20,077 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-17 16:15:20,077 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-17 16:15:20,077 - dbp.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-17 16:15:20,077 - dbp.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-17 16:15:20,078 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-17 16:15:20,078 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 16:15:20,078 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:15:20,078 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:15:20,078 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 16:15:20,658 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 16:15:20,661 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 16:15:20,661 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 16:15:20,661 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 16:15:20,661 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 16:15:20,662 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:15:20,662 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:15:20,662 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 16:15:20,662 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 16:15:20,663 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 16:15:20,668 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 16:15:20,668 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 16:15:20,697 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 16:15:20,707 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 16:15:20,707 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 16:15:21,084 - dbp.config.config_manager - ERROR - Configuration key 'database.alembic_ini_path' not found
2025-04-17 16:15:21,085 - dbp.database.database - ERROR - Failed to run database migrations: Configuration key 'database.alembic_ini_path' not found in configuration
2025-04-17 16:15:21,085 - dbp.database.database - ERROR - Error type: ValueError
2025-04-17 16:15:21,098 - dbp.database.database - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DatabaseConfig' object has no attribute 'alembic_ini_path'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 667, in _run_alembic_migrations
    alembic_ini_path = config_manager.get('database.alembic_ini_path')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
    raise ValueError(f"Configuration key '{key}' not found in configuration") from e
ValueError: Configuration key 'database.alembic_ini_path' not found in configuration

2025-04-17 16:15:21,099 - dbp.database.database - ERROR - Unexpected error during database initialization: Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration
2025-04-17 16:15:21,100 - dbp.database.database - ERROR - Error type: RuntimeError
2025-04-17 16:15:21,114 - dbp.database.database - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DatabaseConfig' object has no attribute 'alembic_ini_path'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 667, in _run_alembic_migrations
    alembic_ini_path = config_manager.get('database.alembic_ini_path')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
    raise ValueError(f"Configuration key '{key}' not found in configuration") from e
ValueError: Configuration key 'database.alembic_ini_path' not found in configuration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 384, in initialize
    self._run_alembic_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 796, in _run_alembic_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration

2025-04-17 16:15:21,114 - dbp.database - ERROR - Failed to initialize database component: Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DatabaseConfig' object has no attribute 'alembic_ini_path'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 667, in _run_alembic_migrations
    alembic_ini_path = config_manager.get('database.alembic_ini_path')
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
    raise ValueError(f"Configuration key '{key}' not found in configuration") from e
ValueError: Configuration key 'database.alembic_ini_path' not found in configuration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 208, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 384, in initialize
    self._run_alembic_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 796, in _run_alembic_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration
2025-04-17 16:15:21,137 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration
2025-04-17 16:15:21,137 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-17 16:15:21,169 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:15:21,170 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
2025-04-17 16:15:21,175 - dbp.core.lifecycle - ERROR -       value = getattr(value, part)
2025-04-17 16:15:21,179 - dbp.core.lifecycle - ERROR -               ^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:15:21,179 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-17 16:15:21,179 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-17 16:15:21,179 - dbp.core.lifecycle - ERROR -   AttributeError: 'DatabaseConfig' object has no attribute 'alembic_ini_path'
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 667, in _run_alembic_migrations
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -       alembic_ini_path = config_manager.get('database.alembic_ini_path')
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -       return self._config_manager.get(key, resolve_templates)
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
2025-04-17 16:15:21,180 - dbp.core.lifecycle - ERROR -       raise ValueError(f"Configuration key '{key}' not found in configuration") from e
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -   ValueError: Configuration key 'database.alembic_ini_path' not found in configuration
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 208, in initialize
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 384, in initialize
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -       self._run_alembic_migrations()
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 796, in _run_alembic_migrations
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-17 16:15:21,181 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 288, in initialize_all
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 217, in initialize
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True, 'initialization_error': {'error_type': 'RuntimeError', 'error_message': "Failed to initialize database schema: Configuration key 'database.alembic_ini_path' not found in configuration"}}
2025-04-17 16:15:21,182 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-17 16:15:21,183 - dbp.core.lifecycle - WARNING - Rolling back initialization of 3 components
2025-04-17 16:15:21,183 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-17 16:15:21,183 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-17 16:15:21,183 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-17 16:15:21,183 - dbp.core.lifecycle - INFO - Rolling back component 'llm_coordinator'...
2025-04-17 16:15:21,183 - dbp.llm_coordinator - INFO - Shutting down component 'llm_coordinator'...
2025-04-17 16:15:21,184 - dbp.llm_coordinator.job_manager - INFO - JobManager shutdown initiated. No new jobs will be scheduled.
2025-04-17 16:15:21,184 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Shutting down CoordinatorLLM', 'model_name': 'nova-lite'}
2025-04-17 16:15:21,184 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'CoordinatorLLM shutdown completed'}
2025-04-17 16:15:21,184 - dbp.llm_coordinator - INFO - Component 'llm_coordinator' shut down.
2025-04-17 16:15:21,184 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-17 16:15:21,185 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-17 16:15:21,185 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-17 16:15:21,185 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 16:15:21,185 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 16:15:21,186 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-17 16:20:18 ---

2025-04-17 16:20:22,495 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 16:20:22,495 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 16:20:22,496 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 16:20:22,496 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 16:20:22,496 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 16:20:22,496 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 16:20:22,497 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 16:20:22,499 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 16:20:22,499 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 16:20:22,499 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 16:20:22,500 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 16:20:22,544 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 16:20:22,548 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 16:20:22,550 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 16:20:22,550 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 16:20:22,551 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 16:20:22,551 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 16:20:22,551 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 16:20:22,551 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 16:20:22,560 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 16:20:22,566 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 16:20:22,576 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 16:20:22,576 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 16:20:22,577 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 16:20:22,577 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 16:20:22,577 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 16:20:22,577 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 16:20:22,578 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 16:20:22,578 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, fs_monitor, database, metadata_extraction, doc_relationships, consistency_analysis, scheduler, memory_cache, llm_coordinator, recommendation_generator, mcp_server
2025-04-17 16:20:22,578 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 16:20:22,578 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:20:22,579 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:20:22,579 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 16:20:22,584 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 16:20:22,585 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 16:20:22,593 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 16:20:22,593 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 16:20:22,594 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 16:20:22,594 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:20:22,595 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:20:22,595 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 16:20:23,040 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 16:20:23,041 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 16:20:23,041 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 16:20:23,041 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 16:20:23,041 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 16:20:23,041 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:20:23,041 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:20:23,041 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 16:20:23,042 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-17 16:20:23,042 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-17 16:20:23,042 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 16:20:23,042 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 16:20:23,042 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-17 16:20:23,042 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:20:23,042 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:20:23,042 - dbp.core.lifecycle.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-17 16:20:23,043 - dbp.config.config_manager - ERROR - Configuration key 'fs_monitor' not found
2025-04-17 16:20:23,043 - dbp.core.lifecycle.fs_monitor - ERROR - Failed to initialize FileSystemMonitorComponent: Configuration key 'fs_monitor' not found in configuration
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'fs_monitor'. Did you mean: 'monitor'?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 160, in initialize
    config = context.config.get(self.name, {})
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
    raise ValueError(f"Configuration key '{key}' not found in configuration") from e
ValueError: Configuration key 'fs_monitor' not found in configuration
2025-04-17 16:20:23,056 - dbp.core.lifecycle - ERROR - Failed to initialize component 'fs_monitor': Failed to initialize fs_monitor: Configuration key 'fs_monitor' not found in configuration
2025-04-17 16:20:23,056 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-17 16:20:23,062 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:20:23,062 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
2025-04-17 16:20:23,062 - dbp.core.lifecycle - ERROR -       value = getattr(value, part)
2025-04-17 16:20:23,062 - dbp.core.lifecycle - ERROR -               ^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:20:23,062 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -   AttributeError: 'AppConfig' object has no attribute 'fs_monitor'. Did you mean: 'monitor'?
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 160, in initialize
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -       config = context.config.get(self.name, {})
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
2025-04-17 16:20:23,063 - dbp.core.lifecycle - ERROR -       return self._config_manager.get(key, resolve_templates)
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -       raise ValueError(f"Configuration key '{key}' not found in configuration") from e
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -   ValueError: Configuration key 'fs_monitor' not found in configuration
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 288, in initialize_all
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 203, in initialize
2025-04-17 16:20:23,064 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize {self.name}: {e}") from e
2025-04-17 16:20:23,071 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize fs_monitor: Configuration key 'fs_monitor' not found in configuration
2025-04-17 16:20:23,072 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' debug info: {'class_name': 'FileSystemMonitorComponent', 'module': 'dbp.fs_monitor.component', 'initialized': False, 'dependencies': ['config_manager', 'change_queue'], 'has_logger': True}
2025-04-17 16:20:23,072 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-17 16:20:23,072 - dbp.core.lifecycle - ERROR - Dependency 'change_queue' initialized: True
2025-04-17 16:20:23,075 - dbp.core.lifecycle - WARNING - Rolling back initialization of 3 components
2025-04-17 16:20:23,075 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-17 16:20:23,075 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-17 16:20:23,076 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-17 16:20:23,076 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-17 16:20:23,076 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-17 16:20:23,077 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-17 16:20:23,077 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-17 16:20:23,078 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-17 16:20:23,078 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-17 16:20:23,078 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-17 16:20:23,079 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 16:20:23,079 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 16:20:23,079 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-17 16:47:41 ---

2025-04-17 16:47:43,045 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 16:47:43,045 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 16:47:43,045 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 16:47:43,045 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 16:47:43,045 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 16:47:43,045 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 16:47:43,046 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 16:47:43,047 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 16:47:43,047 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 16:47:43,047 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 16:47:43,047 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 16:47:43,062 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 16:47:43,064 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 16:47:43,066 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 16:47:43,066 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 16:47:43,066 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 16:47:43,066 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 16:47:43,066 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 16:47:43,066 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 16:47:43,066 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 16:47:43,070 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 16:47:43,070 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 16:47:43,070 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 16:47:43,070 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 16:47:43,071 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 16:47:43,071 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 16:47:43,071 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 16:47:43,071 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 16:47:43,071 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, filter, database, metadata_extraction, llm_coordinator, fs_monitor, scheduler, memory_cache, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-17 16:47:43,071 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 16:47:43,072 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:47:43,072 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:47:43,072 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 16:47:43,074 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 16:47:43,075 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 16:47:43,075 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 16:47:43,075 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 16:47:43,075 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 16:47:43,075 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:47:43,076 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:47:43,076 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 16:47:43,076 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 16:47:43,076 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 16:47:43,076 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 16:47:43,076 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:47:43,076 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:47:43,076 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 16:47:43,085 - dbp.config.config_manager - ERROR - Configuration key 'monitor.ignore_patterns' not found
2025-04-17 16:47:43,085 - dbp.filter - ERROR - Failed to initialize filter component: Configuration key 'monitor.ignore_patterns' not found in configuration
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'monitor'. Did you mean: 'fs_monitor'?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 407, in initialize
    self._filter = GitIgnoreFilter(config_manager, self.project_root)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 78, in __init__
    self._initialize_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 90, in _initialize_patterns
    self._add_config_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 127, in _add_config_patterns
    patterns = self.config.get('monitor.ignore_patterns', [])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
    raise ValueError(f"Configuration key '{key}' not found in configuration") from e
ValueError: Configuration key 'monitor.ignore_patterns' not found in configuration
2025-04-17 16:47:43,091 - dbp.core.lifecycle - ERROR - Failed to initialize component 'filter': Failed to initialize filter component: Configuration key 'monitor.ignore_patterns' not found in configuration
2025-04-17 16:47:43,091 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-17 16:47:43,104 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 423, in get
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -       value = getattr(value, part)
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -               ^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -   AttributeError: 'AppConfig' object has no attribute 'monitor'. Did you mean: 'fs_monitor'?
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 407, in initialize
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -       self._filter = GitIgnoreFilter(config_manager, self.project_root)
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 78, in __init__
2025-04-17 16:47:43,105 - dbp.core.lifecycle - ERROR -       self._initialize_patterns()
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 90, in _initialize_patterns
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -       self._add_config_patterns()
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 127, in _add_config_patterns
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -       patterns = self.config.get('monitor.ignore_patterns', [])
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 153, in get
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -       return self._config_manager.get(key, resolve_templates)
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 438, in get
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -       raise ValueError(f"Configuration key '{key}' not found in configuration") from e
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -   ValueError: Configuration key 'monitor.ignore_patterns' not found in configuration
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 288, in initialize_all
2025-04-17 16:47:43,106 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-17 16:47:43,107 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 415, in initialize
2025-04-17 16:47:43,107 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize filter component: {e}") from e
2025-04-17 16:47:43,107 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize filter component: Configuration key 'monitor.ignore_patterns' not found in configuration
2025-04-17 16:47:43,107 - dbp.core.lifecycle - ERROR - Component 'filter' debug info: {'class_name': 'FilterComponent', 'module': 'dbp.fs_monitor.filter', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True, 'attr_project_root': '/home/jcjorel/cline-best-practices'}
2025-04-17 16:47:43,107 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-17 16:47:43,107 - dbp.core.lifecycle - WARNING - Rolling back initialization of 2 components
2025-04-17 16:47:43,107 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-17 16:47:43,107 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-17 16:47:43,107 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-17 16:47:43,107 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-17 16:47:43,107 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-17 16:47:43,107 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-17 16:47:43,107 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-17 16:47:43,107 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 16:47:43,107 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 16:47:43,108 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-17 16:50:52 ---

2025-04-17 16:50:53,637 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 16:50:53,637 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 16:50:53,637 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 16:50:53,638 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 16:50:53,638 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 16:50:53,638 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 16:50:53,639 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 16:50:53,640 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 16:50:53,640 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 16:50:53,640 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 16:50:53,640 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 16:50:53,660 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 16:50:53,663 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 16:50:53,665 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 16:50:53,665 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 16:50:53,666 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 16:50:53,666 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 16:50:53,666 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 16:50:53,667 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 16:50:53,667 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 16:50:53,670 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 16:50:53,670 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, filter, database, metadata_extraction, doc_relationships, memory_cache, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 16:50:53,671 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:50:53,672 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:50:53,672 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 16:50:53,675 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 16:50:53,676 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 16:50:53,677 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 16:50:53,677 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 16:50:53,677 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-17 16:50:53,678 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:50:53,678 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:50:53,678 - dbp.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-17 16:50:53,679 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-17 16:50:53,679 - dbp.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-17 16:50:53,679 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-17 16:50:53,680 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-17 16:50:53,680 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-17 16:50:53,680 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-17 16:50:53,680 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-17 16:50:53,681 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-17 16:50:53,681 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-17 16:50:53,681 - dbp.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-17 16:50:53,681 - dbp.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-17 16:50:53,682 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-17 16:50:53,682 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 16:50:53,682 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:50:53,683 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:50:53,683 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 16:50:53,683 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 16:50:53,683 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 16:50:53,684 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 16:50:53,684 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:50:53,684 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:50:53,684 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 16:50:53,916 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 16:50:53,919 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 16:50:53,919 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 16:50:53,920 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 16:50:53,920 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 16:50:53,921 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 16:50:53,921 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 16:50:53,921 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 16:50:53,922 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 16:50:53,922 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 16:50:53,923 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 16:50:53,923 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 16:50:53,938 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 16:50:53,940 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 16:50:53,940 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 16:50:54,149 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 16:50:54,149 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 16:50:54,151 - dbp.database.database - INFO - Running database migrations...
2025-04-17 16:50:54,152 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 17:03:47 ---

ERROR:root:Failed to import configuration modules: cannot import name 'ConfigurationManager' from partially initialized module 'dbp.config.config_manager' (most likely due to a circular import) (/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py)
INFO:dbp.mcp_server.__main__:Starting MCP server on localhost:6231
INFO:dbp.mcp_server.__main__:Checking component dependencies and imports...
INFO:dbp.mcp_server.__main__:FastAPI version: 0.115.12
INFO:dbp.mcp_server.__main__:Uvicorn available: uvicorn
INFO:dbp.mcp_server.__main__:Starting MCP server using LifecycleManager
2025-04-17 17:03:48,796 - dbp.core.lifecycle - ERROR - ConfigurationManager class not available
2025-04-17 17:03:48,797 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 17:03:48,797 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 17:03:48,806 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 17:03:48,808 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 17:03:48,809 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 17:03:48,809 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 17:03:48,809 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 17:03:48,809 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 17:03:48,809 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 17:03:48,809 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 17:03:48,809 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 17:03:48,812 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 17:03:48,812 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 17:03:48,812 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 17:03:48,813 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 17:03:48,813 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 17:03:48,813 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 17:03:48,813 - dbp.core.lifecycle - INFO - Initializing 12 components
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Dependency validation failed with 6 errors
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:03:48,813 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 17:03:48,813 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 17:03:48,813 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['database', 'fs_monitor', 'filter', 'change_queue', 'memory_cache', 'consistency_analysis', 'doc_relationships', 'recommendation_generator', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'mcp_server']


--- SERVER START ATTEMPT AT 2025-04-17 17:09:07 ---

ERROR:root:Failed to import configuration modules: cannot import name 'ConfigurationManager' from partially initialized module 'dbp.config.config_manager' (most likely due to a circular import) (/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py)
INFO:dbp.mcp_server.__main__:Starting MCP server on localhost:6231
INFO:dbp.mcp_server.__main__:Checking component dependencies and imports...
INFO:dbp.mcp_server.__main__:FastAPI version: 0.115.12
INFO:dbp.mcp_server.__main__:Uvicorn available: uvicorn
INFO:dbp.mcp_server.__main__:Starting MCP server using LifecycleManager
2025-04-17 17:09:08,852 - dbp.core.lifecycle - ERROR - ConfigurationManager class not available
2025-04-17 17:09:08,852 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 17:09:08,852 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 17:09:08,860 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 17:09:08,861 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 17:09:08,861 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 17:09:08,861 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 17:09:08,861 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 17:09:08,861 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 17:09:08,861 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 17:09:08,862 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 17:09:08,862 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 17:09:08,863 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 17:09:08,864 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 17:09:08,864 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 17:09:08,864 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 17:09:08,864 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 17:09:08,864 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 17:09:08,864 - dbp.core.lifecycle - INFO - Initializing 12 components
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Dependency validation failed with 6 errors
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:09:08,864 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 17:09:08,864 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 17:09:08,864 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['database', 'fs_monitor', 'filter', 'change_queue', 'memory_cache', 'consistency_analysis', 'doc_relationships', 'recommendation_generator', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'mcp_server']


--- SERVER START ATTEMPT AT 2025-04-17 17:24:29 ---

ERROR:root:Failed to import configuration modules: cannot import name 'ConfigurationManager' from partially initialized module 'dbp.config.config_manager' (most likely due to a circular import) (/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py)
2025-04-17 17:24:30,213 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 17:24:30,213 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 17:24:30,213 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 17:24:30,213 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 17:24:30,213 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 17:24:30,213 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 17:24:30,213 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 17:24:30,213 - dbp.core.lifecycle - ERROR - ConfigurationManager class not available
2025-04-17 17:24:30,213 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 17:24:30,213 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 17:24:30,213 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 17:24:30,219 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 17:24:30,220 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 17:24:30,221 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 17:24:30,221 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 17:24:30,221 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 17:24:30,221 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 17:24:30,221 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 17:24:30,221 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 17:24:30,221 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 17:24:30,221 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 17:24:30,221 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 17:24:30,221 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 17:24:30,221 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 17:24:30,221 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 17:24:30,221 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 17:24:30,221 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 17:24:30,224 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 17:24:30,224 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 17:24:30,224 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 17:24:30,224 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 17:24:30,224 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 17:24:30,224 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 17:24:30,224 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 17:24:30,224 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 17:24:30,224 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 17:24:30,225 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 17:24:30,225 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 17:24:30,225 - dbp.core.lifecycle - INFO - Initializing 12 components
2025-04-17 17:24:30,225 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'database', 'consistency_analysis', 'memory_cache', 'scheduler', 'mcp_server', 'metadata_extraction', 'fs_monitor', 'llm_coordinator', 'recommendation_generator', 'change_queue', 'doc_relationships', 'filter'}
2025-04-17 17:24:30,225 - dbp.core.lifecycle - ERROR - Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,225 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,225 - dbp.core.lifecycle - ERROR - Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,225 - dbp.core.lifecycle - ERROR - Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,225 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,225 - dbp.core.lifecycle - ERROR - Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,225 - dbp.core.lifecycle - ERROR - Dependency validation failed with 6 errors
2025-04-17 17:24:30,226 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,226 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,226 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,226 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,226 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,226 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:24:30,226 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 17:24:30,226 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 17:24:30,226 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['database', 'fs_monitor', 'filter', 'change_queue', 'memory_cache', 'consistency_analysis', 'doc_relationships', 'recommendation_generator', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'mcp_server']


--- SERVER START ATTEMPT AT 2025-04-17 17:35:38 ---

ERROR:root:Failed to import configuration modules: cannot import name 'ConfigurationManager' from partially initialized module 'dbp.config.config_manager' (most likely due to a circular import) (/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py)
2025-04-17 17:35:39,006 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 17:35:39,006 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 17:35:39,006 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 17:35:39,006 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 17:35:39,006 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 17:35:39,007 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 17:35:39,007 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 17:35:39,007 - dbp.core.lifecycle - ERROR - ConfigurationManager class not available
2025-04-17 17:35:39,007 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 17:35:39,007 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 17:35:39,007 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 17:35:39,011 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 17:35:39,012 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 17:35:39,013 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 17:35:39,013 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 17:35:39,013 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 17:35:39,013 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 17:35:39,013 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 17:35:39,013 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 17:35:39,013 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 17:35:39,013 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 17:35:39,013 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 17:35:39,013 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 17:35:39,013 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 17:35:39,013 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 17:35:39,013 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 17:35:39,013 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 17:35:39,015 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 17:35:39,015 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 17:35:39,015 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 17:35:39,015 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 17:35:39,015 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 17:35:39,015 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 17:35:39,015 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 17:35:39,015 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 17:35:39,015 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 17:35:39,015 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 17:35:39,015 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 17:35:39,015 - dbp.core.lifecycle - INFO - Initializing 12 components
2025-04-17 17:35:39,015 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'doc_relationships', 'consistency_analysis', 'mcp_server', 'filter', 'recommendation_generator', 'llm_coordinator', 'memory_cache', 'fs_monitor', 'metadata_extraction', 'scheduler', 'change_queue', 'database'}
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Dependency validation failed with 6 errors
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:35:39,015 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 17:35:39,015 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 17:35:39,015 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['database', 'fs_monitor', 'filter', 'change_queue', 'memory_cache', 'consistency_analysis', 'doc_relationships', 'recommendation_generator', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'mcp_server']


--- SERVER START ATTEMPT AT 2025-04-17 17:39:42 ---

ERROR:root:Failed to import configuration modules: cannot import name 'ConfigurationManager' from partially initialized module 'dbp.config.config_manager' (most likely due to a circular import) (/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py)
2025-04-17 17:39:43,334 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 17:39:43,335 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 17:39:43,335 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 17:39:43,335 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 17:39:43,335 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 17:39:43,335 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 17:39:43,335 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 17:39:43,335 - dbp.core.lifecycle - ERROR - ConfigurationManager class not available
2025-04-17 17:39:43,335 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 17:39:43,335 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 17:39:43,335 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 17:39:43,340 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 17:39:43,342 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 17:39:43,342 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 17:39:43,342 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 17:39:43,342 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 17:39:43,342 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 17:39:43,342 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 17:39:43,342 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 17:39:43,342 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 17:39:43,342 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 17:39:43,342 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 17:39:43,342 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 17:39:43,342 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 17:39:43,342 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 17:39:43,342 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 17:39:43,342 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 17:39:43,344 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 17:39:43,344 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 17:39:43,344 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 17:39:43,344 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 17:39:43,344 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 17:39:43,344 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 17:39:43,344 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 17:39:43,344 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 17:39:43,344 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 17:39:43,344 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 17:39:43,344 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 17:39:43,344 - dbp.core.lifecycle - INFO - Initializing 12 components
2025-04-17 17:39:43,344 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'memory_cache', 'fs_monitor', 'llm_coordinator', 'consistency_analysis', 'database', 'change_queue', 'mcp_server', 'recommendation_generator', 'metadata_extraction', 'doc_relationships', 'scheduler', 'filter'}
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Dependency validation failed with 6 errors
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:39:43,344 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 17:39:43,344 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 17:39:43,344 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['database', 'fs_monitor', 'filter', 'change_queue', 'memory_cache', 'consistency_analysis', 'doc_relationships', 'recommendation_generator', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'mcp_server']


--- SERVER START ATTEMPT AT 2025-04-17 17:44:28 ---

ERROR:root:Failed to import configuration modules: cannot import name 'ConfigurationManager' from partially initialized module 'dbp.config.config_manager' (most likely due to a circular import) (/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py)
2025-04-17 17:44:29,606 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 17:44:29,607 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 17:44:29,607 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 17:44:29,607 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 17:44:29,607 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 17:44:29,607 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 17:44:29,607 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 17:44:29,607 - dbp.core.lifecycle - ERROR - ConfigurationManager class not available
2025-04-17 17:44:29,607 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 17:44:29,607 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 17:44:29,607 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 17:44:29,612 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 17:44:29,613 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 17:44:29,613 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 17:44:29,614 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 17:44:29,614 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 17:44:29,614 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 17:44:29,614 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 17:44:29,614 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 17:44:29,614 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 17:44:29,614 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 17:44:29,614 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 17:44:29,614 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 17:44:29,614 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 17:44:29,614 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 17:44:29,614 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 17:44:29,614 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 17:44:29,618 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 17:44:29,618 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 17:44:29,618 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 17:44:29,618 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 17:44:29,618 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 17:44:29,618 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 17:44:29,618 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 17:44:29,618 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 17:44:29,618 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 17:44:29,618 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 17:44:29,618 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 17:44:29,618 - dbp.core.lifecycle - INFO - Initializing 12 components
2025-04-17 17:44:29,618 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'change_queue', 'database', 'consistency_analysis', 'doc_relationships', 'metadata_extraction', 'recommendation_generator', 'mcp_server', 'memory_cache', 'llm_coordinator', 'filter', 'scheduler', 'fs_monitor'}
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Dependency validation failed with 6 errors
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:44:29,618 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 17:44:29,618 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 17:44:29,618 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['database', 'fs_monitor', 'filter', 'change_queue', 'memory_cache', 'consistency_analysis', 'doc_relationships', 'recommendation_generator', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'mcp_server']


--- SERVER START ATTEMPT AT 2025-04-17 17:55:54 ---

ERROR:root:Failed to import configuration modules: cannot import name 'ConfigurationManager' from partially initialized module 'dbp.config.config_manager' (most likely due to a circular import) (/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py)
2025-04-17 17:55:54,549 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 17:55:54,549 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 17:55:54,549 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 17:55:54,549 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 17:55:54,549 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 17:55:54,549 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 17:55:54,549 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 17:55:54,550 - dbp.core.lifecycle - ERROR - ConfigurationManager class not available
2025-04-17 17:55:54,550 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 17:55:54,550 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 17:55:54,550 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 17:55:54,555 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 17:55:54,556 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 17:55:54,557 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 17:55:54,557 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 17:55:54,557 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 17:55:54,557 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 17:55:54,557 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 17:55:54,557 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 17:55:54,557 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 17:55:54,557 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 17:55:54,557 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 17:55:54,557 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 17:55:54,557 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 17:55:54,557 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 17:55:54,557 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 17:55:54,557 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 17:55:54,558 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 17:55:54,559 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 17:55:54,559 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 17:55:54,559 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 17:55:54,559 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 17:55:54,559 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 17:55:54,559 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 17:55:54,559 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 17:55:54,559 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 17:55:54,559 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 17:55:54,559 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 17:55:54,559 - dbp.core.lifecycle - INFO - Initializing 12 components
2025-04-17 17:55:54,559 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'memory_cache', 'recommendation_generator', 'scheduler', 'mcp_server', 'doc_relationships', 'consistency_analysis', 'llm_coordinator', 'change_queue', 'fs_monitor', 'database', 'filter', 'metadata_extraction'}
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Dependency validation failed with 6 errors
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'database' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'fs_monitor' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'filter' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'change_queue' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'llm_coordinator' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - Dependency validation error: Component 'mcp_server' depends on 'config_manager' which is not registered
2025-04-17 17:55:54,559 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 17:55:54,559 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 17:55:54,559 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['database', 'fs_monitor', 'filter', 'change_queue', 'memory_cache', 'consistency_analysis', 'doc_relationships', 'recommendation_generator', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'mcp_server']


--- SERVER START ATTEMPT AT 2025-04-17 18:11:55 ---

2025-04-17 18:11:59,632 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:11:59,633 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:11:59,633 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:11:59,634 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:11:59,634 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:11:59,635 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:11:59,635 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:11:59,636 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:11:59,637 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:11:59,647 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:11:59,647 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:11:59,648 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:11:59,648 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:11:59,648 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:11:59,648 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:11:59,648 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:11:59,649 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:11:59,649 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:11:59,649 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:11:59,649 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:11:59,650 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:11:59,650 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:11:59,650 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:11:59,650 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:11:59,651 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:11:59,651 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:11:59,651 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:11:59,651 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:11:59,652 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:11:59,652 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:11:59,652 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:11:59,693 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:11:59,706 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:11:59,711 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:11:59,711 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:11:59,711 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:11:59,711 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:11:59,711 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:11:59,711 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:11:59,711 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:11:59,711 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:11:59,711 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:11:59,711 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:11:59,712 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:11:59,712 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:11:59,712 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:11:59,712 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:11:59,728 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:11:59,729 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:11:59,729 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:11:59,729 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:11:59,729 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:11:59,730 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 18:11:59,730 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:11:59,730 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:11:59,730 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:11:59,731 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:11:59,731 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:11:59,731 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:11:59,732 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'filter', 'mcp_server', 'scheduler', 'llm_coordinator', 'config_manager', 'doc_relationships', 'metadata_extraction', 'memory_cache', 'consistency_analysis', 'change_queue', 'database', 'recommendation_generator', 'fs_monitor'}
2025-04-17 18:11:59,732 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:11:59,732 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, change_queue, database, metadata_extraction, doc_relationships, memory_cache, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-17 18:11:59,732 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:11:59,732 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:11:59,733 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:11:59,733 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:11:59,733 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:11:59,736 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:11:59,744 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:11:59,745 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:11:59,745 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:11:59,746 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:11:59,746 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 18:11:59,746 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-17 18:11:59,746 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-17 18:11:59,746 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:11:59,746 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:11:59,746 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 18:11:59,746 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:11:59,747 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-17 18:11:59,747 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-17 18:12:00,193 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 18:12:00,194 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-17 18:12:00,194 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-17 18:12:00,195 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-17 18:12:00,195 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-17 18:12:00,195 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 18:12:00,195 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 18:12:00,195 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 18:12:00,195 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:12:00,196 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-17 18:12:00,196 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-17 18:12:00,196 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:12:00,196 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:12:00,197 - dbp.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:12:00,199 - dbp.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-17 18:12:00,199 - dbp.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-17 18:12:00,199 - dbp.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-17 18:12:00,200 - dbp.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-17 18:12:00,200 - dbp.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-17 18:12:00,200 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-17 18:12:00,201 - dbp.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-17 18:12:00,202 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-17 18:12:00,202 - dbp.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-17 18:12:00,202 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-17 18:12:00,202 - dbp.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-17 18:12:00,202 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-17 18:12:00,202 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-17 18:12:00,202 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-17 18:12:00,202 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-17 18:12:00,202 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-17 18:12:00,202 - dbp.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-17 18:12:00,202 - dbp.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-17 18:12:00,203 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-17 18:12:00,203 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:12:00,203 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:12:00,203 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:12:00,203 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:12:00,203 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:12:00,203 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:12:00,203 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:12:00,203 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-17 18:12:00,203 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-17 18:12:00,203 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:12:00,203 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:12:00,203 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:12:00,203 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:12:00,203 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:12:00,204 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:12:00,204 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:12:00,204 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:12:00,204 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:12:00,204 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:12:00,204 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:12:00,204 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:12:00,204 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:12:00,204 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:12:00,226 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:12:00,227 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:12:00,231 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:12:00,231 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:12:00,231 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:12:00,232 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:12:00,498 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:12:00,498 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:12:00,498 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:12:00,498 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:12:00,498 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:12:00,498 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:12:00,499 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:12:00,499 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:12:00,499 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:12:00,499 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:12:00,501 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:12:00,501 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:12:00,501 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:12:00,502 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:12:00,502 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:12:00,502 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:12:00,502 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:12:00,502 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:12:00,503 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:12:00,503 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:12:00,503 - dbp.database.database - DEBUG - Session 140079151804400 acquired from scoped session factory.
2025-04-17 18:12:00,503 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:12:00,505 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:12:00,506 - dbp.database.database - DEBUG - Session 140079151804400 committed.
2025-04-17 18:12:00,506 - dbp.database.database - DEBUG - Session 140079151804400 closed.
2025-04-17 18:12:00,506 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 18:18:15 ---

2025-04-17 18:18:17,113 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:18:17,113 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:18:17,113 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:18:17,113 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:18:17,113 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:18:17,114 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:18:17,114 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:18:17,114 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:18:17,114 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:18:17,114 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:18:17,114 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:18:17,114 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:18:17,114 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:18:17,115 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:18:17,116 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:18:17,116 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:18:17,116 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:18:17,116 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:18:17,116 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:18:17,116 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:18:17,116 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:18:17,130 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:18:17,135 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:18:17,138 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:18:17,138 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:18:17,139 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:18:17,139 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:18:17,139 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:18:17,139 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:18:17,139 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:18:17,139 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:18:17,140 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:18:17,140 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:18:17,140 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:18:17,140 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:18:17,140 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:18:17,140 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:18:17,146 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:18:17,146 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:18:17,146 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:18:17,146 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:18:17,147 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:18:17,147 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 18:18:17,147 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:18:17,147 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:18:17,147 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:18:17,147 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:18:17,147 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:18:17,148 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:18:17,148 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'database', 'mcp_server', 'config_manager', 'doc_relationships', 'llm_coordinator', 'recommendation_generator', 'metadata_extraction', 'consistency_analysis', 'scheduler', 'fs_monitor', 'filter', 'change_queue', 'memory_cache'}
2025-04-17 18:18:17,148 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:18:17,148 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, llm_coordinator, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, filter, change_queue, fs_monitor, scheduler, memory_cache, mcp_server
2025-04-17 18:18:17,148 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:18:17,148 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:18:17,148 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:18:17,148 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:18:17,148 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:18:17,148 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:18:17,151 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:18:17,153 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:18:17,153 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:18:17,153 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:18:17,154 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:18:17,154 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:18:17,154 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:18:17,154 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:18:17,154 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:18:17,154 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:18:17,154 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:18:17,155 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:18:17,155 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:18:17,155 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:18:17,156 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:18:17,156 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:18:17,224 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:18:17,224 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:18:17,226 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:18:17,226 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:18:17,227 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:18:17,227 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:18:17,483 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:18:17,483 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:18:17,484 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:18:17,486 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:18:17,486 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:18:17,486 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:18:17,486 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:18:17,487 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:18:17,487 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:18:17,487 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:18:17,490 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:18:17,491 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:18:17,491 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:18:17,491 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:18:17,492 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:18:17,492 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:18:17,492 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:18:17,492 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:18:17,492 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:18:17,492 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:18:17,492 - dbp.database.database - DEBUG - Session 139936653185664 acquired from scoped session factory.
2025-04-17 18:18:17,493 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:18:17,494 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:18:17,494 - dbp.database.database - DEBUG - Session 139936653185664 committed.
2025-04-17 18:18:17,495 - dbp.database.database - DEBUG - Session 139936653185664 closed.
2025-04-17 18:18:17,495 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 18:28:16 ---

2025-04-17 18:28:17,310 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:28:17,311 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:28:17,311 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:28:17,311 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:28:17,311 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:28:17,311 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:28:17,311 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:28:17,311 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:28:17,311 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:28:17,312 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:28:17,312 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:28:17,313 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:28:17,313 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:28:17,313 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:28:17,313 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:28:17,313 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:28:17,313 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:28:17,313 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:28:17,313 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:28:17,313 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:28:17,313 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:28:17,313 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:28:17,328 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:28:17,330 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:28:17,332 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:28:17,332 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:28:17,333 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:28:17,333 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:28:17,333 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:28:17,333 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:28:17,333 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:28:17,335 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:28:17,335 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:28:17,336 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:28:17,336 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:28:17,336 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:28:17,337 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:28:17,338 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:28:17,346 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:28:17,346 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:28:17,346 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:28:17,346 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:28:17,346 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:28:17,346 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'consistency_analysis', 'filter', 'mcp_server', 'change_queue', 'database', 'metadata_extraction', 'scheduler', 'doc_relationships', 'fs_monitor', 'config_manager', 'recommendation_generator', 'llm_coordinator', 'memory_cache'}
2025-04-17 18:28:17,346 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:28:17,347 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, database, metadata_extraction, doc_relationships, consistency_analysis, fs_monitor, scheduler, llm_coordinator, recommendation_generator, memory_cache, mcp_server
2025-04-17 18:28:17,347 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:28:17,347 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:28:17,347 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:28:17,347 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:28:17,347 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:28:17,347 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:28:17,350 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:28:17,352 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:28:17,352 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:28:17,352 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:28:17,352 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 18:28:17,353 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-17 18:28:17,353 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-17 18:28:17,353 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:28:17,353 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:28:17,353 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 18:28:17,354 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:28:17,354 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-17 18:28:17,354 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-17 18:28:17,499 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 18:28:17,499 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-17 18:28:17,499 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-17 18:28:17,499 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-17 18:28:17,499 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-17 18:28:17,500 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 18:28:17,500 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:28:17,500 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:28:17,500 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:28:17,500 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:28:17,500 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:28:17,500 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-17 18:28:17,500 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-17 18:28:17,500 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:28:17,500 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:28:17,500 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:28:17,500 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:28:17,500 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:28:17,500 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:28:17,500 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:28:17,500 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:28:17,500 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:28:17,500 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:28:17,500 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:28:17,507 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:28:17,508 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:28:17,510 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:28:17,510 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:28:17,510 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:28:17,510 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:28:17,644 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:28:17,644 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:28:17,644 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:28:17,645 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG - Session 140104132833984 acquired from scoped session factory.
2025-04-17 18:28:17,645 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:28:17,646 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:28:17,646 - dbp.database.database - DEBUG - Session 140104132833984 committed.
2025-04-17 18:28:17,646 - dbp.database.database - DEBUG - Session 140104132833984 closed.
2025-04-17 18:28:17,646 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 18:34:38 ---

2025-04-17 18:34:40,001 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:34:40,002 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:34:40,002 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:34:40,002 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:34:40,002 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:34:40,002 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:34:40,002 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:34:40,002 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:34:40,003 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:34:40,003 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:34:40,004 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:34:40,004 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:34:40,004 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:34:40,004 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:34:40,004 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:34:40,005 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:34:40,005 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:34:40,005 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:34:40,005 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:34:40,005 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:34:40,005 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:34:40,005 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:34:40,014 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:34:40,016 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:34:40,017 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:34:40,018 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:34:40,018 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:34:40,018 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:34:40,018 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:34:40,018 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:34:40,018 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:34:40,018 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:34:40,018 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:34:40,018 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:34:40,018 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:34:40,018 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:34:40,018 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:34:40,018 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:34:40,022 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:34:40,022 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:34:40,022 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:34:40,022 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:34:40,022 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:34:40,022 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 18:34:40,022 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:34:40,022 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:34:40,023 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:34:40,023 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:34:40,023 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:34:40,023 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:34:40,023 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'fs_monitor', 'filter', 'metadata_extraction', 'mcp_server', 'change_queue', 'config_manager', 'scheduler', 'memory_cache', 'llm_coordinator', 'recommendation_generator', 'database', 'consistency_analysis', 'doc_relationships'}
2025-04-17 18:34:40,023 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:34:40,023 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, fs_monitor, llm_coordinator, database, metadata_extraction, scheduler, memory_cache, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-17 18:34:40,023 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:34:40,023 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:34:40,023 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:34:40,023 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:34:40,023 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:34:40,023 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:34:40,025 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:34:40,027 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:34:40,028 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:34:40,028 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:34:40,028 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 18:34:40,028 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-17 18:34:40,029 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-17 18:34:40,029 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:34:40,029 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:34:40,029 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 18:34:40,030 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:34:40,030 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-17 18:34:40,030 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-17 18:34:40,162 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 18:34:40,162 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-17 18:34:40,162 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-17 18:34:40,162 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-17 18:34:40,162 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-17 18:34:40,163 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 18:34:40,163 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:34:40,163 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:34:40,163 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:34:40,163 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:34:40,163 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:34:40,163 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-17 18:34:40,163 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-17 18:34:40,163 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:34:40,163 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-17 18:34:40,163 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:34:40,163 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:34:40,163 - dbp.core.lifecycle.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-17 18:34:40,163 - dbp.core.lifecycle.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:34:40,163 - dbp.core.lifecycle.fs_monitor - INFO - Using queue from change_queue component
2025-04-17 18:34:40,163 - dbp.core.lifecycle.fs_monitor - ERROR - Failed to initialize FileSystemMonitorComponent: 'FSMonitorConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 176, in initialize
    project_root = config.get('project_root', ".")  # Default to "." if not specified
                   ^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'FSMonitorConfig' object has no attribute 'get'
2025-04-17 18:34:40,164 - dbp.core.lifecycle - ERROR - Failed to initialize component 'fs_monitor': Failed to initialize fs_monitor: 'FSMonitorConfig' object has no attribute 'get'
2025-04-17 18:34:40,164 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 176, in initialize
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -       project_root = config.get('project_root', ".")  # Default to "." if not specified
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -                      ^^^^^^^^^^
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -   AttributeError: 'FSMonitorConfig' object has no attribute 'get'
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 288, in initialize_all
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 203, in initialize
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize {self.name}: {e}") from e
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize fs_monitor: 'FSMonitorConfig' object has no attribute 'get'
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' debug info: {'class_name': 'FileSystemMonitorComponent', 'module': 'dbp.fs_monitor.component', 'initialized': False, 'dependencies': ['config_manager', 'change_queue'], 'has_logger': True}
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-17 18:34:40,165 - dbp.core.lifecycle - ERROR - Dependency 'change_queue' initialized: True
2025-04-17 18:34:40,165 - dbp.core.lifecycle - WARNING - Rolling back initialization of 3 components
2025-04-17 18:34:40,165 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-17 18:34:40,165 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-17 18:34:40,165 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-17 18:34:40,165 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-17 18:34:40,165 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-17 18:34:40,165 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-17 18:34:40,165 - dbp.fs_monitor.filter - DEBUG - GitIgnoreFilter cache cleared.
2025-04-17 18:34:40,165 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-17 18:34:40,165 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-17 18:34:40,165 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-17 18:34:40,166 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-17 18:34:40,166 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-17 18:34:40,166 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-17 18:34:40,166 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-17 18:44:45 ---

2025-04-17 18:44:46,491 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:44:46,491 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:44:46,491 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:44:46,491 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:44:46,491 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:44:46,491 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:44:46,491 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:44:46,491 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:44:46,491 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:44:46,492 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:44:46,492 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:44:46,492 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:44:46,492 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:44:46,492 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:44:46,492 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:44:46,492 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:44:46,492 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:44:46,497 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:44:46,498 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:44:46,499 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:44:46,499 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:44:46,499 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:44:46,499 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:44:46,499 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:44:46,500 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:44:46,500 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:44:46,500 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:44:46,500 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:44:46,500 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:44:46,500 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:44:46,500 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:44:46,500 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:44:46,500 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'llm_coordinator', 'recommendation_generator', 'config_manager', 'scheduler', 'metadata_extraction', 'consistency_analysis', 'change_queue', 'filter', 'memory_cache', 'database', 'fs_monitor', 'doc_relationships', 'mcp_server'}
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, filter, database, metadata_extraction, memory_cache, fs_monitor, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:44:46,501 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:44:46,501 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:44:46,501 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:44:46,502 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:44:46,503 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:44:46,503 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:44:46,503 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-17 18:44:46,503 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:44:46,503 - dbp.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:44:46,503 - dbp.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-17 18:44:46,503 - dbp.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-17 18:44:46,503 - dbp.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-17 18:44:46,503 - dbp.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-17 18:44:46,503 - dbp.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-17 18:44:46,503 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-17 18:44:46,503 - dbp.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-17 18:44:46,503 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-17 18:44:46,503 - dbp.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-17 18:44:46,503 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-17 18:44:46,503 - dbp.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-17 18:44:46,503 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-17 18:44:46,503 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-17 18:44:46,503 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-17 18:44:46,503 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-17 18:44:46,503 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-17 18:44:46,503 - dbp.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-17 18:44:46,503 - dbp.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:44:46,503 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:44:46,503 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:44:46,503 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:44:46,503 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:44:46,503 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 18:44:46,503 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-17 18:44:46,503 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:44:46,503 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:44:46,503 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 18:44:46,503 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:44:46,504 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-17 18:44:46,504 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-17 18:44:46,577 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 18:44:46,577 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-17 18:44:46,577 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-17 18:44:46,577 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-17 18:44:46,577 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-17 18:44:46,577 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 18:44:46,577 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 18:44:46,577 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 18:44:46,577 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:44:46,577 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:44:46,577 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:44:46,577 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:44:46,577 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:44:46,577 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:44:46,577 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:44:46,577 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:44:46,578 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:44:46,578 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:44:46,578 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:44:46,578 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:44:46,582 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:44:46,583 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:44:46,583 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:44:46,583 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:44:46,583 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:44:46,583 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:44:46,643 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:44:46,643 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:44:46,643 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:44:46,644 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:44:46,644 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:44:46,644 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:44:46,644 - dbp.database.database - DEBUG - Session 139883954889568 acquired from scoped session factory.
2025-04-17 18:44:46,644 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:44:46,644 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:44:46,644 - dbp.database.database - DEBUG - Session 139883954889568 committed.
2025-04-17 18:44:46,644 - dbp.database.database - DEBUG - Session 139883954889568 closed.
2025-04-17 18:44:46,644 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 18:46:29 ---

2025-04-17 18:46:30,020 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:46:30,020 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:46:30,021 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:46:30,021 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:46:30,021 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:46:30,021 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:46:30,021 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:46:30,021 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:46:30,021 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:46:30,021 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:46:30,022 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:46:30,022 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:46:30,022 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:46:30,022 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:46:30,022 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:46:30,022 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:46:30,022 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:46:30,022 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:46:30,022 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:46:30,022 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:46:30,026 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:46:30,027 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL - Failed to start MCP server: unexpected indent (component.py, line 194)
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL - Detailed exception information:
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL - Traceback (most recent call last):
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py", line 219, in main
    lifecycle = LifecycleManager(cli_args)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/core/lifecycle.py", line 118, in __init__
    self._register_components()
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/core/lifecycle.py", line 247, in _register_components
    from ..fs_monitor.component import FileSystemMonitorComponent
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 194
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL -     self._monitor.start()
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL - IndentationError: unexpected indent
2025-04-17 18:46:30,028 - dbp.mcp_server.__main__ - CRITICAL - Error location: /home/jcjorel/cline-best-practices/src/dbp/core/lifecycle.py:247 in _register_components


--- SERVER START ATTEMPT AT 2025-04-17 18:47:03 ---

2025-04-17 18:47:04,716 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:47:04,716 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:47:04,716 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:47:04,716 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:47:04,716 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:47:04,717 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:47:04,717 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:47:04,717 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:47:04,717 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:47:04,717 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:47:04,718 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:47:04,718 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:47:04,718 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:47:04,718 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:47:04,718 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:47:04,718 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:47:04,718 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:47:04,718 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:47:04,718 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:47:04,718 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:47:04,718 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:47:04,726 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:47:04,727 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:47:04,729 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:47:04,729 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:47:04,729 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:47:04,729 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:47:04,729 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:47:04,729 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:47:04,729 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:47:04,729 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:47:04,729 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:47:04,729 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:47:04,729 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:47:04,729 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:47:04,729 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:47:04,729 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'memory_cache', 'scheduler', 'config_manager', 'change_queue', 'fs_monitor', 'metadata_extraction', 'recommendation_generator', 'doc_relationships', 'database', 'llm_coordinator', 'filter', 'mcp_server', 'consistency_analysis'}
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, fs_monitor, database, memory_cache, metadata_extraction, scheduler, doc_relationships, llm_coordinator, filter, consistency_analysis, recommendation_generator, mcp_server
2025-04-17 18:47:04,731 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:47:04,731 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:47:04,732 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:47:04,732 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:47:04,732 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:47:04,733 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:47:04,733 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:47:04,733 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:47:04,733 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:47:04,733 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:47:04,734 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:47:04,734 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:47:04,734 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:47:04,734 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:47:04,734 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:47:04,734 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:47:04,734 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:47:04,734 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:47:04,734 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:47:04,734 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-17 18:47:04,734 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-17 18:47:04,734 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:47:04,734 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:47:04,734 - dbp.core.lifecycle.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-17 18:47:04,734 - dbp.core.lifecycle.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:47:04,734 - dbp.core.lifecycle.fs_monitor - INFO - Using queue from change_queue component
2025-04-17 18:47:04,734 - dbp.core.lifecycle.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-17 18:47:04,734 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-17 18:47:04,734 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:47:04,734 - dbp.fs_monitor.factory - ERROR - Failed to create GitIgnoreFilter: 'FSMonitorConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/factory.py", line 116, in create_monitor
    filter_obj = GitIgnoreFilter(config, project_root)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 82, in __init__
    self._initialize_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 94, in _initialize_patterns
    self._add_config_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 131, in _add_config_patterns
    patterns = self.config.get('fs_monitor.ignore_patterns', [])
               ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'FSMonitorConfig' object has no attribute 'get'
2025-04-17 18:47:04,736 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:47:04,736 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-17 18:47:04,736 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-17 18:47:04,736 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-17 18:47:04,736 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-17 18:47:04,736 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-17 18:47:04,737 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-17 18:47:04,737 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-17 18:47:04,737 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-17 18:47:04,738 - dbp.core.lifecycle.fs_monitor - INFO - File system monitoring started
2025-04-17 18:47:04,738 - dbp.core.lifecycle.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-17 18:47:04,738 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-17 18:47:04,738 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:47:04,738 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:47:04,738 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:47:04,738 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:47:04,738 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:47:04,738 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:47:04,738 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:47:04,738 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:47:04,738 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:47:04,738 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:47:04,739 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:47:04,739 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:47:04,779 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:47:04,779 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:47:04,780 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:47:04,780 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:47:04,780 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:47:04,780 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:47:04,877 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:47:04,877 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:47:04,877 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:47:04,878 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG - Session 140718708575984 acquired from scoped session factory.
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG - Session 140718708575984 committed.
2025-04-17 18:47:04,878 - dbp.database.database - DEBUG - Session 140718708575984 closed.
2025-04-17 18:47:04,878 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 18:49:21 ---

2025-04-17 18:49:22,515 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:49:22,515 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:49:22,515 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:49:22,515 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:49:22,515 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:49:22,516 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:49:22,517 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:49:22,517 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:49:22,517 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:49:22,518 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:49:22,518 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:49:22,518 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:49:22,518 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:49:22,518 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:49:22,518 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:49:22,518 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:49:22,518 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:49:22,519 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:49:22,519 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:49:22,519 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:49:22,519 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:49:22,519 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:49:22,519 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:49:22,519 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:49:22,520 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:49:22,520 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:49:22,520 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:49:22,520 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:49:22,520 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:49:22,520 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:49:22,520 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:49:22,531 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:49:22,533 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:49:22,534 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:49:22,534 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:49:22,534 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:49:22,534 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:49:22,534 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:49:22,534 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:49:22,534 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:49:22,534 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:49:22,534 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:49:22,534 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:49:22,534 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:49:22,534 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:49:22,534 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:49:22,534 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:49:22,536 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - CRITICAL for query processing
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'doc_relationships', 'scheduler', 'memory_cache', 'change_queue', 'config_manager', 'filter', 'database', 'fs_monitor', 'mcp_server', 'recommendation_generator', 'metadata_extraction', 'consistency_analysis', 'llm_coordinator'}
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, filter, database, memory_cache, fs_monitor, metadata_extraction, doc_relationships, scheduler, consistency_analysis, llm_coordinator, recommendation_generator, mcp_server
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:49:22,537 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:49:22,537 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:49:22,537 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:49:22,539 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:49:22,540 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:49:22,540 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:49:22,541 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:49:22,541 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:49:22,541 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:49:22,541 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:49:22,541 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:49:22,541 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:49:22,541 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:49:22,541 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:49:22,541 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:49:22,541 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:49:22,541 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 18:49:22,541 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-17 18:49:22,541 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-17 18:49:22,541 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:49:22,542 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:49:22,542 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 18:49:22,542 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:49:22,542 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-17 18:49:22,542 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-17 18:49:22,673 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 18:49:22,673 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-17 18:49:22,673 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-17 18:49:22,673 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-17 18:49:22,673 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-17 18:49:22,673 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 18:49:22,673 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 18:49:22,673 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 18:49:22,673 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:49:22,674 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:49:22,674 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:49:22,674 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:49:22,674 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:49:22,674 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:49:22,674 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:49:22,674 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:49:22,674 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:49:22,674 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:49:22,674 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:49:22,674 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:49:22,681 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:49:22,681 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:49:22,683 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:49:22,683 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:49:22,683 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:49:22,683 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:49:22,819 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:49:22,819 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:49:22,819 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:49:22,819 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:49:22,819 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:49:22,819 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:49:22,819 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:49:22,819 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:49:22,819 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:49:22,820 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:49:22,820 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:49:22,820 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:49:22,820 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:49:22,820 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:49:22,821 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG - Session 140098733755280 acquired from scoped session factory.
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:49:22,821 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:49:22,822 - dbp.database.database - DEBUG - Session 140098733755280 committed.
2025-04-17 18:49:22,822 - dbp.database.database - DEBUG - Session 140098733755280 closed.
2025-04-17 18:49:22,822 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 18:50:13 ---

2025-04-17 18:50:14,144 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:50:14,144 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:50:14,144 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:50:14,144 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:50:14,145 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:50:14,145 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:50:14,145 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:50:14,145 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:50:14,145 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:50:14,145 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:50:14,146 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:50:14,146 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:50:14,146 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:50:14,146 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:50:14,146 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:50:14,146 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:50:14,146 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:50:14,146 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:50:14,146 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:50:14,146 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:50:14,146 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:50:14,152 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:50:14,154 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:50:14,155 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:50:14,155 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:50:14,155 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:50:14,156 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:50:14,156 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:50:14,156 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:50:14,156 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:50:14,156 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:50:14,156 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:50:14,156 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:50:14,156 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:50:14,156 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:50:14,156 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:50:14,156 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:50:14,158 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:50:14,158 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:50:14,158 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:50:14,158 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:50:14,158 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:50:14,158 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'llm_coordinator', 'config_manager', 'consistency_analysis', 'recommendation_generator', 'fs_monitor', 'change_queue', 'metadata_extraction', 'doc_relationships', 'database', 'mcp_server', 'scheduler', 'filter', 'memory_cache'}
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, fs_monitor, database, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, scheduler, filter, memory_cache, mcp_server
2025-04-17 18:50:14,158 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:50:14,159 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:50:14,159 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:50:14,159 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:14,159 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:14,159 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:50:14,160 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:50:14,161 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:50:14,161 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:50:14,161 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:50:14,161 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:50:14,161 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-17 18:50:14,161 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-17 18:50:14,161 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:14,161 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:14,161 - dbp.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:50:14,161 - dbp.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-17 18:50:14,161 - dbp.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-17 18:50:14,161 - dbp.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-17 18:50:14,161 - dbp.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-17 18:50:14,161 - dbp.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-17 18:50:14,161 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-17 18:50:14,161 - dbp.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-17 18:50:14,161 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-17 18:50:14,161 - dbp.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-17 18:50:14,161 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-17 18:50:14,161 - dbp.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-17 18:50:14,161 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-17 18:50:14,161 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-17 18:50:14,161 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-17 18:50:14,161 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-17 18:50:14,161 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-17 18:50:14,162 - dbp.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-17 18:50:14,162 - dbp.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:50:14,162 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:50:14,162 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:14,162 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:50:14,162 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:50:14,162 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:50:14,162 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-17 18:50:14,162 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:14,162 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:14,162 - dbp.core.lifecycle.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-17 18:50:14,162 - dbp.core.lifecycle.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:50:14,162 - dbp.core.lifecycle.fs_monitor - INFO - Using queue from change_queue component
2025-04-17 18:50:14,162 - dbp.core.lifecycle.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-17 18:50:14,162 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-17 18:50:14,162 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:50:14,162 - dbp.fs_monitor.factory - ERROR - Failed to create GitIgnoreFilter: 'FSMonitorConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/factory.py", line 116, in create_monitor
    filter_obj = GitIgnoreFilter(config, project_root)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 82, in __init__
    self._initialize_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 94, in _initialize_patterns
    self._add_config_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 131, in _add_config_patterns
    patterns = self.config.get('fs_monitor.ignore_patterns', [])
               ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'FSMonitorConfig' object has no attribute 'get'
2025-04-17 18:50:14,163 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:50:14,163 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-17 18:50:14,163 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-17 18:50:14,163 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-17 18:50:14,163 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-17 18:50:14,163 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-17 18:50:14,163 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-17 18:50:14,164 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-17 18:50:14,164 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-17 18:50:14,164 - dbp.core.lifecycle.fs_monitor - INFO - File system monitoring started
2025-04-17 18:50:14,164 - dbp.core.lifecycle.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-17 18:50:14,164 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-17 18:50:14,164 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:50:14,164 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:50:14,164 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:50:14,164 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:14,164 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:14,165 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:50:14,165 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:50:14,165 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:50:14,165 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:50:14,165 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:50:14,165 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:50:14,165 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:50:14,217 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:50:14,218 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:50:14,220 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:50:14,221 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:50:14,221 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:50:14,221 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:50:14,371 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:50:14,372 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:50:14,372 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:50:14,372 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:50:14,372 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:50:14,373 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:50:14,373 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:50:14,373 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:50:14,373 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:50:14,373 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:50:14,374 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:50:14,374 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:50:14,374 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:50:14,374 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:50:14,374 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:50:14,374 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:50:14,375 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:50:14,375 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:50:14,375 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:50:14,375 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:50:14,375 - dbp.database.database - DEBUG - Session 140225018385216 acquired from scoped session factory.
2025-04-17 18:50:14,375 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:50:14,376 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:50:14,376 - dbp.database.database - DEBUG - Session 140225018385216 committed.
2025-04-17 18:50:14,376 - dbp.database.database - DEBUG - Session 140225018385216 closed.
2025-04-17 18:50:14,376 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-17 18:50:41 ---

2025-04-17 18:50:41,710 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-17 18:50:41,710 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-17 18:50:41,710 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-17 18:50:41,710 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-17 18:50:41,710 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-17 18:50:41,710 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-17 18:50:41,710 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-17 18:50:41,710 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-17 18:50:41,710 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-17 18:50:41,710 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Merging config from environment variables...
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Merging config from command-line arguments...
2025-04-17 18:50:41,711 - dbp.config.config_manager - DEBUG - Configuration validated successfully against schema.
2025-04-17 18:50:41,711 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-17 18:50:41,711 - dbp.core.lifecycle - INFO - Registering components...
2025-04-17 18:50:41,711 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-17 18:50:41,711 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-17 18:50:41,711 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-17 18:50:41,711 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-17 18:50:41,716 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-17 18:50:41,717 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-17 18:50:41,717 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-17 18:50:41,717 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-17 18:50:41,717 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-17 18:50:41,717 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-17 18:50:41,717 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-17 18:50:41,717 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-17 18:50:41,717 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-17 18:50:41,717 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-17 18:50:41,717 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-17 18:50:41,717 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-17 18:50:41,717 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-17 18:50:41,717 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-17 18:50:41,717 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-17 18:50:41,717 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'memory_cache', 'filter', 'fs_monitor', 'scheduler', 'recommendation_generator', 'consistency_analysis', 'llm_coordinator', 'mcp_server', 'metadata_extraction', 'change_queue', 'doc_relationships', 'config_manager', 'database'}
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, change_queue, fs_monitor, database, memory_cache, metadata_extraction, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-17 18:50:41,719 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:41,719 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:41,719 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-17 18:50:41,720 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-17 18:50:41,720 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-17 18:50:41,720 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-17 18:50:41,721 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-17 18:50:41,721 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-17 18:50:41,721 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-17 18:50:41,721 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-17 18:50:41,721 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:41,721 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:41,721 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-17 18:50:41,721 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:50:41,721 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-17 18:50:41,721 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-17 18:50:41,800 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-17 18:50:41,801 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-17 18:50:41,801 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-17 18:50:41,801 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-17 18:50:41,801 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-17 18:50:41,801 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-17 18:50:41,801 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-17 18:50:41,801 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-17 18:50:41,801 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:50:41,801 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-17 18:50:41,801 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-17 18:50:41,801 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:41,801 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:41,801 - dbp.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-17 18:50:41,801 - dbp.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-17 18:50:41,801 - dbp.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-17 18:50:41,801 - dbp.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-17 18:50:41,801 - dbp.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-17 18:50:41,801 - dbp.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-17 18:50:41,801 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-17 18:50:41,801 - dbp.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-17 18:50:41,801 - dbp.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-17 18:50:41,801 - dbp.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-17 18:50:41,801 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-17 18:50:41,801 - dbp.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-17 18:50:41,801 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-17 18:50:41,801 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-17 18:50:41,801 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-17 18:50:41,801 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-17 18:50:41,801 - dbp.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-17 18:50:41,801 - dbp.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-17 18:50:41,801 - dbp.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-17 18:50:41,802 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-17 18:50:41,802 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:41,802 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-17 18:50:41,802 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:50:41,802 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-17 18:50:41,802 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-17 18:50:41,802 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:50:41,802 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-17 18:50:41,802 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:41,802 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:41,802 - dbp.core.lifecycle.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-17 18:50:41,802 - dbp.core.lifecycle.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-17 18:50:41,802 - dbp.core.lifecycle.fs_monitor - INFO - Using queue from change_queue component
2025-04-17 18:50:41,802 - dbp.core.lifecycle.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-17 18:50:41,802 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-17 18:50:41,802 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-17 18:50:41,802 - dbp.fs_monitor.factory - ERROR - Failed to create GitIgnoreFilter: 'FSMonitorConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/factory.py", line 116, in create_monitor
    filter_obj = GitIgnoreFilter(config, project_root)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 82, in __init__
    self._initialize_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 94, in _initialize_patterns
    self._add_config_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 131, in _add_config_patterns
    patterns = self.config.get('fs_monitor.ignore_patterns', [])
               ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'FSMonitorConfig' object has no attribute 'get'
2025-04-17 18:50:41,803 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-17 18:50:41,803 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-17 18:50:41,803 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-17 18:50:41,803 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-17 18:50:41,803 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-17 18:50:41,803 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-17 18:50:41,803 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-17 18:50:41,803 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-17 18:50:41,803 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-17 18:50:41,803 - dbp.core.lifecycle.fs_monitor - INFO - File system monitoring started
2025-04-17 18:50:41,803 - dbp.core.lifecycle.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-17 18:50:41,803 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-17 18:50:41,803 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-17 18:50:41,803 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-17 18:50:41,803 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-17 18:50:41,803 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-17 18:50:41,803 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-17 18:50:41,803 - dbp.database - INFO - Initializing component 'database'...
2025-04-17 18:50:41,803 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-17 18:50:41,804 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-17 18:50:41,804 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '.dbp/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False}
2025-04-17 18:50:41,804 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-17 18:50:41,804 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-17 18:50:41,804 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-17 18:50:41,808 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-17 18:50:41,809 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-17 18:50:41,810 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-17 18:50:41,810 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-17 18:50:41,810 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-17 18:50:41,810 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-17 18:50:41,872 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found
2025-04-17 18:50:41,872 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found in configuration
2025-04-17 18:50:41,872 - dbp.database.database - DEBUG - Using engine URL: sqlite:///.dbp/database.sqlite
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///.dbp/database.sqlite
2025-04-17 18:50:41,873 - dbp.database.database - INFO - Running database migrations...
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG - Session 139793201829680 acquired from scoped session factory.
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG - Testing database connection...
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG - Database connection successful
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG - Session 139793201829680 committed.
2025-04-17 18:50:41,873 - dbp.database.database - DEBUG - Session 139793201829680 closed.
2025-04-17 18:50:41,873 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-18 00:13:33 ---

2025-04-18 00:13:33,993 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:13:33,994 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:13:33,994 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:13:33,994 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:13:33,994 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:13:33,994 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:13:33,994 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:13:33,994 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:13:33,994 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:13:33,994 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:13:33,994 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:13:33,995 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:13:33,995 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:13:33,995 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:13:33,995 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:13:33,995 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:13:33,995 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:13:33,995 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:13:33,995 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:13:33,996 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:13:33,996 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:13:33,996 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:13:33,996 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:13:33,996 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:13:33,996 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:13:33,996 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:13:34,001 - dbp.mcp_server.__main__ - CRITICAL - Failed to start MCP server: name 'InitializationContext' is not defined
2025-04-18 00:13:34,002 - dbp.mcp_server.__main__ - CRITICAL - Detailed exception information:
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL - Traceback (most recent call last):
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py", line 219, in main
    lifecycle = LifecycleManager(cli_args)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/core/lifecycle.py", line 118, in __init__
    self._register_components()
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/core/lifecycle.py", line 247, in _register_components
    from ..fs_monitor.component import FileSystemMonitorComponent
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/__init__.py", line 53, in <module>
    from .queue import ChangeDetectionQueue
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/queue.py", line 58, in <module>
    from .filter import GitIgnoreFilter # Assuming filter is in the same package
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 311, in <module>
    class FilterComponent(Component):
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL -   File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 377, in FilterComponent
    def initialize(self, context: InitializationContext) -> None:
                                  ^^^^^^^^^^^^^^^^^^^^^
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL - NameError: name 'InitializationContext' is not defined
2025-04-18 00:13:34,005 - dbp.mcp_server.__main__ - CRITICAL - Error location: /home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py:377 in FilterComponent


--- SERVER START ATTEMPT AT 2025-04-18 00:19:46 ---

2025-04-18 00:19:48,203 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:19:48,204 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:19:48,204 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:19:48,204 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:19:48,204 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:19:48,205 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:19:48,205 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:19:48,205 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:19:48,205 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:19:48,205 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:19:48,206 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:19:48,207 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:19:48,207 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:19:48,207 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:19:48,207 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:19:48,208 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:19:48,208 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:19:48,208 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:19:48,208 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:19:48,208 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:19:48,208 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:19:48,209 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:19:48,209 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:19:48,209 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:19:48,209 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:19:48,209 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:19:48,209 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:19:48,237 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:19:48,239 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:19:48,243 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:19:48,243 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:19:48,243 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:19:48,243 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:19:48,243 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:19:48,243 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:19:48,243 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:19:48,243 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:19:48,243 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:19:48,243 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:19:48,244 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:19:48,244 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:19:48,244 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:19:48,244 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:19:48,249 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:19:48,249 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:19:48,249 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:19:48,249 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:19:48,249 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:19:48,249 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'llm_coordinator', 'config_manager', 'fs_monitor', 'scheduler', 'consistency_analysis', 'memory_cache', 'filter', 'change_queue', 'database', 'doc_relationships', 'metadata_extraction', 'recommendation_generator', 'mcp_server'}
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:19:48,249 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, filter, change_queue, fs_monitor, database, memory_cache, metadata_extraction, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 00:19:48,250 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:19:48,250 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:19:48,250 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:19:48,250 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:19:48,250 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:19:48,250 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:19:48,252 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:19:48,253 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:19:48,253 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:19:48,253 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:19:48,253 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:19:48,253 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 00:19:48,253 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 00:19:48,253 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:19:48,253 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:19:48,254 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:19:48,254 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 00:19:48,254 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 00:19:48,254 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 00:19:48,254 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 00:19:48,254 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 00:19:48,254 - dbp.core.lifecycle.llm_coordinator - ERROR - Initialization failed for component 'llm_coordinator': 'CoordinatorLLMConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 188, in initialize
    self._coordinator_llm = CoordinatorLLM(
                            ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 136, in __init__
    self.bedrock_manager = bedrock_manager or self._initialize_bedrock_manager()
                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 157, in _initialize_bedrock_manager
    bedrock_config = self.config.get("bedrock", {})
                     ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'CoordinatorLLMConfig' object has no attribute 'get'
2025-04-18 00:19:48,257 - dbp.core.lifecycle - ERROR - Failed to initialize component 'llm_coordinator': Failed to initialize llm_coordinator
2025-04-18 00:19:48,257 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 188, in initialize
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -       self._coordinator_llm = CoordinatorLLM(
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -                               ^^^^^^^^^^^^^^^
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 136, in __init__
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -       self.bedrock_manager = bedrock_manager or self._initialize_bedrock_manager()
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 157, in _initialize_bedrock_manager
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -       bedrock_config = self.config.get("bedrock", {})
2025-04-18 00:19:48,259 - dbp.core.lifecycle - ERROR -                        ^^^^^^^^^^^^^^^
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -   AttributeError: 'CoordinatorLLMConfig' object has no attribute 'get'
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 293, in initialize_all
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 213, in initialize
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize {self.name}") from e
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize llm_coordinator
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' debug info: {'class_name': 'LLMCoordinatorComponent', 'module': 'dbp.llm_coordinator.component', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True}
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-18 00:19:48,260 - dbp.core.lifecycle - WARNING - Rolling back initialization of 1 components
2025-04-18 00:19:48,260 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-18 00:19:48,260 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-18 00:19:48,260 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-18 00:19:48,260 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-18 00:19:48,260 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-18 00:19:48,261 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-18 00:24:14 ---

2025-04-18 00:24:15,165 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:24:15,166 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:24:15,166 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:24:15,166 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:24:15,166 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:24:15,166 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:24:15,166 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:24:15,166 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:24:15,167 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:24:15,167 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:24:15,168 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:24:15,168 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:24:15,168 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:24:15,168 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:24:15,168 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:24:15,168 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:24:15,168 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:24:15,168 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:24:15,168 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:24:15,168 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:24:15,168 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:24:15,168 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:24:15,168 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:24:15,168 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:24:15,168 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:24:15,168 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:24:15,168 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:24:15,168 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:24:15,181 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:24:15,184 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:24:15,186 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:24:15,186 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:24:15,186 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:24:15,186 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:24:15,186 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:24:15,186 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:24:15,186 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:24:15,186 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:24:15,186 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:24:15,187 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:24:15,187 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:24:15,187 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:24:15,187 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:24:15,187 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:24:15,189 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'database', 'recommendation_generator', 'metadata_extraction', 'fs_monitor', 'change_queue', 'consistency_analysis', 'scheduler', 'mcp_server', 'llm_coordinator', 'doc_relationships', 'filter', 'memory_cache', 'config_manager'}
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, metadata_extraction, change_queue, fs_monitor, scheduler, llm_coordinator, doc_relationships, consistency_analysis, recommendation_generator, filter, memory_cache, mcp_server
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:24:15,190 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:24:15,190 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:24:15,190 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:24:15,192 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:24:15,193 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:24:15,193 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:24:15,193 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:24:15,193 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 00:24:15,193 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 00:24:15,193 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 00:24:15,193 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:24:15,193 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:24:15,193 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 00:24:15,193 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 00:24:15,193 - dbp.database - ERROR - Failed to initialize database component: 'AppConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 201, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 336, in initialize
    db_type = self.config.get('database.type', 'sqlite')
              ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:24:15,194 - dbp.database - DEBUG - Component 'database' initialization error recorded: 'AppConfig' object has no attribute 'get'
2025-04-18 00:24:15,194 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: 'AppConfig' object has no attribute 'get'
2025-04-18 00:24:15,194 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-18 00:24:15,195 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:24:15,195 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 201, in initialize
2025-04-18 00:24:15,195 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-18 00:24:15,195 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 336, in initialize
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -       db_type = self.config.get('database.type', 'sqlite')
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -                 ^^^^^^^^^^^^^^^
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -   AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 293, in initialize_all
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 210, in initialize
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: 'AppConfig' object has no attribute 'get'
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True, 'initialization_error': {'error_type': 'AttributeError', 'error_message': "'AppConfig' object has no attribute 'get'"}}
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-18 00:24:15,196 - dbp.core.lifecycle - WARNING - Rolling back initialization of 1 components
2025-04-18 00:24:15,196 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-18 00:24:15,196 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-18 00:24:15,196 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-18 00:24:15,196 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-18 00:24:15,196 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-18 00:24:15,196 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-18 00:27:48 ---

2025-04-18 00:27:51,075 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:27:51,075 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:27:51,076 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:27:51,076 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:27:51,076 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:27:51,076 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:27:51,076 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:27:51,076 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:27:51,077 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:27:51,077 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:27:51,077 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:27:51,077 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:27:51,077 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:27:51,077 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:27:51,078 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:27:51,078 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:27:51,078 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:27:51,078 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:27:51,078 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:27:51,078 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:27:51,079 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:27:51,079 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:27:51,079 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:27:51,079 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:27:51,079 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:27:51,079 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:27:51,079 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:27:51,079 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:27:51,079 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:27:51,080 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:27:51,080 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:27:51,080 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:27:51,080 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:27:51,080 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:27:51,080 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:27:51,080 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:27:51,080 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:27:51,080 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:27:51,095 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:27:51,099 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:27:51,101 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:27:51,101 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:27:51,101 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:27:51,101 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:27:51,101 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:27:51,102 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:27:51,102 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:27:51,102 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:27:51,102 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:27:51,102 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:27:51,102 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:27:51,102 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:27:51,102 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:27:51,102 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:27:51,108 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:27:51,108 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:27:51,108 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:27:51,108 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:27:51,108 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:27:51,108 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:27:51,108 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:27:51,108 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:27:51,108 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:27:51,109 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:27:51,109 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:27:51,109 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:27:51,109 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'database', 'doc_relationships', 'fs_monitor', 'recommendation_generator', 'memory_cache', 'change_queue', 'metadata_extraction', 'filter', 'mcp_server', 'config_manager', 'scheduler', 'consistency_analysis', 'llm_coordinator'}
2025-04-18 00:27:51,109 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:27:51,109 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, memory_cache, change_queue, fs_monitor, metadata_extraction, doc_relationships, filter, scheduler, consistency_analysis, llm_coordinator, recommendation_generator, mcp_server
2025-04-18 00:27:51,109 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:27:51,109 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:27:51,109 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:27:51,109 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:27:51,110 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:27:51,110 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:27:51,113 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:27:51,114 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:27:51,115 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:27:51,115 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:27:51,115 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 00:27:51,115 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 00:27:51,115 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 00:27:51,115 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:27:51,115 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:27:51,115 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 00:27:51,115 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 00:27:51,115 - dbp.database - ERROR - Failed to initialize database component: 'AppConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 201, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 336, in initialize
    db_type = self.config.get('database.type', 'sqlite')
              ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:27:51,118 - dbp.database - DEBUG - Component 'database' initialization error recorded: 'AppConfig' object has no attribute 'get'
2025-04-18 00:27:51,118 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: 'AppConfig' object has no attribute 'get'
2025-04-18 00:27:51,118 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-18 00:27:51,120 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:27:51,120 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 201, in initialize
2025-04-18 00:27:51,120 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-18 00:27:51,120 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 336, in initialize
2025-04-18 00:27:51,120 - dbp.core.lifecycle - ERROR -       db_type = self.config.get('database.type', 'sqlite')
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -                 ^^^^^^^^^^^^^^^
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -   AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 293, in initialize_all
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-18 00:27:51,121 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 210, in initialize
2025-04-18 00:27:51,122 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-18 00:27:51,122 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: 'AppConfig' object has no attribute 'get'
2025-04-18 00:27:51,122 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True, 'initialization_error': {'error_type': 'AttributeError', 'error_message': "'AppConfig' object has no attribute 'get'"}}
2025-04-18 00:27:51,122 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-18 00:27:51,122 - dbp.core.lifecycle - WARNING - Rolling back initialization of 1 components
2025-04-18 00:27:51,122 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-18 00:27:51,122 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-18 00:27:51,122 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-18 00:27:51,122 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-18 00:27:51,122 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-18 00:27:51,122 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-18 00:33:39 ---

2025-04-18 00:33:40,856 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:33:40,857 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:33:40,857 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:33:40,857 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:33:40,857 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:33:40,857 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:33:40,857 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:33:40,858 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:33:40,858 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:33:40,858 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:33:40,858 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:33:40,859 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:33:40,860 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:33:40,860 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:33:40,860 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:33:40,860 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:33:40,860 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:33:40,860 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:33:40,860 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:33:40,860 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:33:40,860 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:33:40,860 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:33:40,860 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:33:40,860 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:33:40,860 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:33:40,860 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:33:40,860 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:33:40,867 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:33:40,868 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:33:40,869 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:33:40,869 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:33:40,869 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:33:40,869 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:33:40,869 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:33:40,869 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:33:40,869 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:33:40,869 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:33:40,869 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:33:40,869 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:33:40,869 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:33:40,869 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:33:40,869 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:33:40,869 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'mcp_server', 'memory_cache', 'database', 'consistency_analysis', 'scheduler', 'doc_relationships', 'metadata_extraction', 'llm_coordinator', 'config_manager', 'fs_monitor', 'change_queue', 'filter', 'recommendation_generator'}
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, llm_coordinator, change_queue, fs_monitor, scheduler, filter, recommendation_generator, mcp_server
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:33:40,871 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:33:40,871 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:33:40,871 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:33:40,874 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:33:40,875 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:33:40,875 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:33:40,875 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:33:40,875 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 00:33:40,876 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 00:33:40,876 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 00:33:40,876 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:33:40,876 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:33:40,876 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 00:33:40,876 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 00:33:40,876 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 00:33:40,876 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 00:33:40,876 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 00:33:40,877 - dbp.database.database - INFO - Created database directory: ${general.base_dir}
2025-04-18 00:33:40,877 - dbp.database.database - ERROR - Unexpected error during database initialization: 'AppConfig' object has no attribute 'get'
2025-04-18 00:33:40,877 - dbp.database.database - ERROR - Error type: AttributeError
2025-04-18 00:33:40,879 - dbp.database.database - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 363, in initialize
    self._initialize_sqlite()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 564, in _initialize_sqlite
    pool_size = self.config.get('database.max_connections', 4)
                ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'get'

2025-04-18 00:33:40,879 - dbp.database - ERROR - Failed to initialize database component: 'AppConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 201, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 363, in initialize
    self._initialize_sqlite()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 564, in _initialize_sqlite
    pool_size = self.config.get('database.max_connections', 4)
                ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:33:40,880 - dbp.database - DEBUG - Component 'database' initialization error recorded: 'AppConfig' object has no attribute 'get'
2025-04-18 00:33:40,880 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: 'AppConfig' object has no attribute 'get'
2025-04-18 00:33:40,880 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 201, in initialize
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 363, in initialize
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -       self._initialize_sqlite()
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 564, in _initialize_sqlite
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -       pool_size = self.config.get('database.max_connections', 4)
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -                   ^^^^^^^^^^^^^^^
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -   AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 293, in initialize_all
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 210, in initialize
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-18 00:33:40,882 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: 'AppConfig' object has no attribute 'get'
2025-04-18 00:33:40,883 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True, 'initialization_error': {'error_type': 'AttributeError', 'error_message': "'AppConfig' object has no attribute 'get'"}}
2025-04-18 00:33:40,883 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-18 00:33:40,883 - dbp.core.lifecycle - WARNING - Rolling back initialization of 1 components
2025-04-18 00:33:40,883 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-18 00:33:40,883 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-18 00:33:40,883 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-18 00:33:40,883 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-18 00:33:40,883 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-18 00:33:40,883 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-18 00:41:05 ---

2025-04-18 00:41:08,093 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:41:08,094 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:41:08,094 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:41:08,094 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:41:08,095 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:41:08,095 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:41:08,095 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:41:08,095 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:41:08,096 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:41:08,096 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:41:08,096 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:41:08,096 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:41:08,096 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:41:08,096 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:41:08,096 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:41:08,096 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:41:08,097 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:41:08,097 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:41:08,097 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:41:08,097 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:41:08,097 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:41:08,097 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:41:08,097 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:41:08,098 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:41:08,098 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:41:08,098 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:41:08,098 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:41:08,098 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:41:08,098 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:41:08,098 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:41:08,098 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:41:08,099 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:41:08,099 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:41:08,099 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:41:08,099 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:41:08,099 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:41:08,099 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:41:08,099 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:41:08,112 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:41:08,114 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:41:08,115 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:41:08,115 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:41:08,115 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:41:08,115 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:41:08,115 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:41:08,115 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:41:08,115 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:41:08,115 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:41:08,116 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:41:08,116 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:41:08,116 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:41:08,116 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:41:08,116 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:41:08,116 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:41:08,119 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:41:08,119 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:41:08,120 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:41:08,120 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:41:08,120 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:41:08,120 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:41:08,120 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:41:08,120 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:41:08,120 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:41:08,120 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:41:08,121 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:41:08,122 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:41:08,122 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'metadata_extraction', 'change_queue', 'mcp_server', 'filter', 'recommendation_generator', 'scheduler', 'memory_cache', 'database', 'llm_coordinator', 'config_manager', 'doc_relationships', 'consistency_analysis', 'fs_monitor'}
2025-04-18 00:41:08,122 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:41:08,122 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, filter, database, metadata_extraction, memory_cache, llm_coordinator, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-18 00:41:08,122 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:41:08,123 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:41:08,123 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:41:08,123 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:41:08,123 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:41:08,123 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:41:08,126 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:41:08,127 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:41:08,127 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:41:08,127 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:41:08,127 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 00:41:08,128 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 00:41:08,128 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 00:41:08,128 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:41:08,128 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:41:08,128 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 00:41:08,128 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 00:41:08,128 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 00:41:08,128 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 00:41:08,128 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 00:41:08,128 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 00:41:08,128 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 00:41:08,129 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:41:08,129 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:41:08,129 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 00:41:08,129 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 00:41:08,129 - dbp.filter - ERROR - Failed to initialize filter component: 'AppConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 410, in initialize
    self._filter = GitIgnoreFilter(config, self.project_root)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 82, in __init__
    self._initialize_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 94, in _initialize_patterns
    self._add_config_patterns()
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 131, in _add_config_patterns
    patterns = self.config.get('fs_monitor.ignore_patterns', [])
               ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:41:08,132 - dbp.core.lifecycle - ERROR - Failed to initialize component 'filter': Failed to initialize filter component: 'AppConfig' object has no attribute 'get'
2025-04-18 00:41:08,132 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 410, in initialize
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -       self._filter = GitIgnoreFilter(config, self.project_root)
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 82, in __init__
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -       self._initialize_patterns()
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 94, in _initialize_patterns
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -       self._add_config_patterns()
2025-04-18 00:41:08,134 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 131, in _add_config_patterns
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -       patterns = self.config.get('fs_monitor.ignore_patterns', [])
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -                  ^^^^^^^^^^^^^^^
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -   AttributeError: 'AppConfig' object has no attribute 'get'
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 293, in initialize_all
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/filter.py", line 418, in initialize
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize filter component: {e}") from e
2025-04-18 00:41:08,135 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize filter component: 'AppConfig' object has no attribute 'get'
2025-04-18 00:41:08,136 - dbp.core.lifecycle - ERROR - Component 'filter' debug info: {'class_name': 'FilterComponent', 'module': 'dbp.fs_monitor.filter', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True, 'attr_project_root': '/home/jcjorel/cline-best-practices'}
2025-04-18 00:41:08,137 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-18 00:41:08,138 - dbp.core.lifecycle - WARNING - Rolling back initialization of 2 components
2025-04-18 00:41:08,138 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-18 00:41:08,138 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-18 00:41:08,138 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-18 00:41:08,138 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-18 00:41:08,138 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-18 00:41:08,138 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-18 00:41:08,138 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-18 00:41:08,138 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-18 00:41:08,139 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-18 00:41:08,139 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-18 00:43:09 ---

2025-04-18 00:43:11,657 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:43:11,658 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:43:11,658 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:43:11,659 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:43:11,659 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:43:11,660 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:43:11,660 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:43:11,661 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:43:11,662 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:43:11,663 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:43:11,663 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:43:11,663 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:43:11,664 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:43:11,664 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:43:11,664 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:43:11,664 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:43:11,665 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:43:11,665 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:43:11,666 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:43:11,666 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:43:11,666 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:43:11,667 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:43:11,667 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:43:11,668 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:43:11,668 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:43:11,668 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:43:11,668 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:43:11,668 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:43:11,669 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:43:11,669 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:43:11,669 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:43:11,669 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:43:11,669 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:43:11,670 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:43:11,670 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:43:11,670 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:43:11,670 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:43:11,670 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:43:11,687 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:43:11,690 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:43:11,691 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:43:11,692 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:43:11,692 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:43:11,692 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:43:11,692 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:43:11,692 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:43:11,692 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:43:11,692 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:43:11,692 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:43:11,692 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:43:11,692 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:43:11,692 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:43:11,692 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:43:11,692 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'filter', 'consistency_analysis', 'llm_coordinator', 'database', 'memory_cache', 'mcp_server', 'recommendation_generator', 'scheduler', 'fs_monitor', 'config_manager', 'metadata_extraction', 'doc_relationships', 'change_queue'}
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, change_queue, fs_monitor, scheduler
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:43:11,696 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:43:11,696 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:43:11,696 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:43:11,698 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:43:11,699 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:43:11,699 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:43:11,699 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:43:11,699 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 00:43:11,699 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 00:43:11,699 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 00:43:11,699 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:43:11,699 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:43:11,699 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 00:43:11,699 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 00:43:11,699 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 00:43:11,699 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 00:43:11,917 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 00:43:11,918 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 00:43:11,918 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 00:43:11,918 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 00:43:11,919 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 00:43:11,919 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 00:43:11,919 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 00:43:11,919 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 00:43:11,919 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:43:11,919 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 00:43:11,919 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 00:43:11,919 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:43:11,919 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:43:11,919 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:43:11,919 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 00:43:11,919 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 00:43:11,920 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 00:43:11,920 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 00:43:11,920 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 00:43:11,920 - dbp.core.lifecycle.llm_coordinator - ERROR - Initialization failed for component 'llm_coordinator': 'CoordinatorLLMConfig' object has no attribute 'bedrock'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 188, in initialize
    self._coordinator_llm = CoordinatorLLM(
                            ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 136, in __init__
    self.bedrock_manager = bedrock_manager or self._initialize_bedrock_manager()
                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 157, in _initialize_bedrock_manager
    bedrock_config = self.config.bedrock
                     ^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'CoordinatorLLMConfig' object has no attribute 'bedrock'
2025-04-18 00:43:11,924 - dbp.core.lifecycle - ERROR - Failed to initialize component 'llm_coordinator': Failed to initialize llm_coordinator
2025-04-18 00:43:11,929 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-18 00:43:11,932 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 188, in initialize
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -       self._coordinator_llm = CoordinatorLLM(
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -                               ^^^^^^^^^^^^^^^
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 136, in __init__
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -       self.bedrock_manager = bedrock_manager or self._initialize_bedrock_manager()
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 157, in _initialize_bedrock_manager
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -       bedrock_config = self.config.bedrock
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -                        ^^^^^^^^^^^^^^^^^^^
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -   AttributeError: 'CoordinatorLLMConfig' object has no attribute 'bedrock'
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 293, in initialize_all
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 213, in initialize
2025-04-18 00:43:11,933 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize {self.name}") from e
2025-04-18 00:43:11,934 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize llm_coordinator
2025-04-18 00:43:11,934 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' debug info: {'class_name': 'LLMCoordinatorComponent', 'module': 'dbp.llm_coordinator.component', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True}
2025-04-18 00:43:11,934 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-18 00:43:11,934 - dbp.core.lifecycle - WARNING - Rolling back initialization of 2 components
2025-04-18 00:43:11,934 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-18 00:43:11,934 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-18 00:43:11,934 - dbp.fs_monitor.filter - DEBUG - GitIgnoreFilter cache cleared.
2025-04-18 00:43:11,934 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-18 00:43:11,934 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-18 00:43:11,934 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-18 00:43:11,934 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-18 00:43:11,934 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-18 00:43:11,934 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-18 00:43:11,934 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-18 00:51:31 ---

2025-04-18 00:51:32,754 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:51:32,755 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:51:32,755 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:51:32,755 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:51:32,755 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:51:32,756 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:51:32,756 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:51:32,756 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:51:32,757 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:51:32,757 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:51:32,758 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:51:32,759 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:51:32,759 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:51:32,759 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:51:32,759 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:51:32,760 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:51:32,760 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:51:32,760 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:51:32,760 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:51:32,760 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:51:32,760 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:51:32,760 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:51:32,761 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:51:32,761 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:51:32,761 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:51:32,761 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:51:32,761 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:51:32,761 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:51:32,761 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:51:32,762 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:51:32,762 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:51:32,773 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:51:32,775 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:51:32,776 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:51:32,776 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:51:32,776 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:51:32,776 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:51:32,776 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:51:32,776 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:51:32,776 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:51:32,776 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:51:32,776 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:51:32,776 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:51:32,776 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:51:32,776 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:51:32,776 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:51:32,776 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'fs_monitor', 'filter', 'change_queue', 'llm_coordinator', 'config_manager', 'scheduler', 'database', 'doc_relationships', 'consistency_analysis', 'memory_cache', 'metadata_extraction', 'mcp_server', 'recommendation_generator'}
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, fs_monitor, llm_coordinator, database, memory_cache, metadata_extraction, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:51:32,779 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:51:32,779 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:51:32,779 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:51:32,781 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:51:32,782 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:51:32,782 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:51:32,782 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:51:32,782 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 00:51:32,782 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 00:51:32,782 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 00:51:32,783 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:51:32,783 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:51:32,783 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 00:51:32,783 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 00:51:32,783 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 00:51:32,783 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 00:51:32,967 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 00:51:32,968 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 00:51:32,968 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 00:51:32,968 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 00:51:32,969 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 00:51:32,969 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 00:51:32,969 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 00:51:32,969 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 00:51:32,969 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 00:51:32,969 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 00:51:32,969 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 00:51:32,969 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:51:32,969 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:51:32,970 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 00:51:32,970 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 00:51:32,970 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-18 00:51:32,970 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-18 00:51:32,970 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 00:51:32,970 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 00:51:32,970 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-18 00:51:32,970 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-18 00:51:32,970 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-18 00:51:32,970 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:51:32,970 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:51:32,970 - dbp.core.lifecycle.fs_monitor.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-18 00:51:32,971 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-18 00:51:32,971 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Using queue from change_queue component
2025-04-18 00:51:32,971 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-18 00:51:32,971 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-18 00:51:32,971 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 00:51:32,971 - dbp.fs_monitor.filter - DEBUG - Adding 0 patterns from configuration.
2025-04-18 00:51:32,971 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 00:51:33,115 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 00:51:33,116 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 00:51:33,116 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 00:51:33,117 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 00:51:33,117 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 00:51:33,118 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 32 patterns.
2025-04-18 00:51:33,118 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 00:51:33,119 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-18 00:51:33,119 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-18 00:51:33,119 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-18 00:51:33,119 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-18 00:51:33,119 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-18 00:51:33,119 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-18 00:51:33,120 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-18 00:51:33,120 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-18 00:51:33,121 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-18 00:51:33,121 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-18 00:51:33,121 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 00:51:33,121 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 00:51:33,122 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:51:33,122 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 00:51:33,122 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 00:51:33,122 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:51:33,122 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:51:33,122 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:51:33,122 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 00:51:33,122 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 00:51:33,122 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 00:51:33,123 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 00:51:33,123 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 00:51:33,123 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 00:51:33,123 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 00:51:33,123 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 00:51:33,123 - dbp.core.lifecycle.llm_coordinator - ERROR - Initialization failed for component 'llm_coordinator': 'CoordinatorLLMConfig' object has no attribute 'model_name'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 188, in initialize
    self._coordinator_llm = CoordinatorLLM(
                            ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 139, in __init__
    self.model_name = getattr(self.config, "model_name")
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'CoordinatorLLMConfig' object has no attribute 'model_name'. Did you mean: 'model_dump'?
2025-04-18 00:51:33,127 - dbp.core.lifecycle - ERROR - Failed to initialize component 'llm_coordinator': Failed to initialize llm_coordinator
2025-04-18 00:51:33,127 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 188, in initialize
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -       self._coordinator_llm = CoordinatorLLM(
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -                               ^^^^^^^^^^^^^^^
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/coordinator_llm.py", line 139, in __init__
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -       self.model_name = getattr(self.config, "model_name")
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
2025-04-18 00:51:33,133 - dbp.core.lifecycle - ERROR -       raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
2025-04-18 00:51:33,139 - dbp.core.lifecycle - ERROR -   AttributeError: 'CoordinatorLLMConfig' object has no attribute 'model_name'. Did you mean: 'model_dump'?
2025-04-18 00:51:33,140 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-18 00:51:33,140 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-18 00:51:33,140 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 293, in initialize_all
2025-04-18 00:51:33,140 - dbp.core.lifecycle - ERROR -       component.initialize(context)
2025-04-18 00:51:33,140 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/llm_coordinator/component.py", line 213, in initialize
2025-04-18 00:51:33,140 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize {self.name}") from e
2025-04-18 00:51:33,141 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize llm_coordinator
2025-04-18 00:51:33,141 - dbp.core.lifecycle - ERROR - Component 'llm_coordinator' debug info: {'class_name': 'LLMCoordinatorComponent', 'module': 'dbp.llm_coordinator.component', 'initialized': False, 'dependencies': ['config_manager'], 'has_logger': True}
2025-04-18 00:51:33,141 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-18 00:51:33,142 - dbp.core.lifecycle - WARNING - Rolling back initialization of 4 components
2025-04-18 00:51:33,142 - dbp.core.lifecycle - INFO - Rolling back component 'fs_monitor'...
2025-04-18 00:51:33,142 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Shutting down component 'fs_monitor'...
2025-04-18 00:51:33,142 - dbp.fs_monitor.base - INFO - Stopping LinuxFileSystemMonitor...
2025-04-18 00:51:33,142 - dbp.fs_monitor.base - DEBUG - Waiting for LinuxFileSystemMonitor thread to join...
2025-04-18 00:51:38,142 - dbp.fs_monitor.base - WARNING - LinuxFileSystemMonitor thread did not exit cleanly.
2025-04-18 00:51:38,142 - dbp.fs_monitor.base - INFO - LinuxFileSystemMonitor stopped.
2025-04-18 00:51:38,142 - dbp.fs_monitor.linux - DEBUG - Cleaning up inotify watches...
2025-04-18 00:51:38,142 - dbp.fs_monitor.linux - DEBUG - Inotify watch cleanup complete.
2025-04-18 00:51:38,142 - dbp.fs_monitor.linux - INFO - Linux file system monitor stopped.
2025-04-18 00:51:38,142 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitor stopped
2025-04-18 00:51:38,142 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' shut down
2025-04-18 00:51:38,142 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-18 00:51:38,143 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-18 00:51:38,143 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-18 00:51:38,143 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-18 00:51:38,143 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-18 00:51:38,143 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-18 00:51:38,143 - dbp.fs_monitor.filter - DEBUG - GitIgnoreFilter cache cleared.
2025-04-18 00:51:38,143 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-18 00:51:38,143 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-18 00:51:38,143 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-18 00:51:38,143 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-18 00:51:38,143 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-18 00:51:38,143 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-18 00:51:38,143 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'


--- SERVER START ATTEMPT AT 2025-04-18 00:53:34 ---

2025-04-18 00:53:36,795 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:53:36,796 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:53:36,796 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:53:36,796 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:53:36,797 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:53:36,797 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:53:36,797 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:53:36,798 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:53:36,798 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:53:36,799 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:53:36,799 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:53:36,799 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:53:36,800 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:53:36,800 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:53:36,800 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:53:36,800 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:53:36,800 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:53:36,801 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:53:36,801 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:53:36,801 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:53:36,808 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:53:36,810 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:53:36,811 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:53:36,812 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:53:36,812 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:53:36,813 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:53:36,813 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:53:36,813 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:53:36,813 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:53:36,813 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:53:36,814 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:53:36,814 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:53:36,814 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:53:36,814 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:53:36,814 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:53:36,815 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:53:36,815 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:53:36,815 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:53:36,837 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:53:36,841 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:53:36,854 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:53:36,854 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:53:36,854 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:53:36,854 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:53:36,854 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:53:36,855 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:53:36,855 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:53:36,855 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:53:36,855 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:53:36,855 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:53:36,855 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:53:36,855 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:53:36,855 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:53:36,855 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:53:36,861 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:53:36,862 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:53:36,862 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:53:36,862 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:53:36,862 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:53:36,862 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:53:36,862 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:53:36,862 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:53:36,862 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:53:36,868 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:53:36,869 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:53:36,869 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:53:36,871 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'mcp_server', 'llm_coordinator', 'scheduler', 'metadata_extraction', 'memory_cache', 'change_queue', 'config_manager', 'doc_relationships', 'consistency_analysis', 'recommendation_generator', 'database', 'fs_monitor', 'filter'}
2025-04-18 00:53:36,873 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:53:36,873 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, database, metadata_extraction, memory_cache, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler, filter
2025-04-18 00:53:36,873 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:53:36,874 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:53:36,874 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:53:36,874 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:53:36,874 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:53:36,874 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:53:36,884 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:53:36,885 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:53:36,886 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:53:36,886 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:53:36,886 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:53:36,886 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 00:53:36,886 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 00:53:36,887 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:53:36,887 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:53:36,887 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 00:53:36,887 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 00:53:36,888 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 00:53:36,888 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 00:53:36,888 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 00:53:36,888 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 00:53:36,891 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 00:53:36,892 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 00:53:36,892 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 00:53:36,893 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 00:53:36,893 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 00:53:36,893 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 00:53:36,893 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 00:53:36,893 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 00:53:36,893 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:53:36,893 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:53:36,893 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 00:53:36,893 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 00:53:36,893 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 00:53:36,893 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 00:53:36,893 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 00:53:36,894 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 00:53:36,894 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 00:53:36,894 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:53:36,894 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:53:36,894 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 00:53:36,894 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 00:53:36,894 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 00:53:36,894 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 00:53:36,894 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 00:53:36,894 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 00:53:36,895 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 00:53:37,093 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 00:53:37,107 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 00:53:37,167 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 00:53:37,168 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 00:53:37,168 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 00:53:37,168 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 00:53:37,392 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 00:53:37,392 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 00:53:37,393 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 00:53:37,393 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 00:53:37,393 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 00:53:37,393 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 00:53:37,393 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 00:53:37,393 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 00:53:37,393 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 00:53:37,393 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 00:53:37,394 - dbp.database.database - INFO - Running database migrations...
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG - Session 140612932342400 acquired from scoped session factory.
2025-04-18 00:53:37,394 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 00:53:37,395 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 00:53:37,395 - dbp.database.database - DEBUG - Session 140612932342400 committed.
2025-04-18 00:53:37,395 - dbp.database.database - DEBUG - Session 140612932342400 closed.
2025-04-18 00:53:37,395 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': 'AppConfig' object has no attribute 'metadata_extraction'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 144, in initialize
    component_config = getattr(config, self.name)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'metadata_extraction'


--- SERVER START ATTEMPT AT 2025-04-18 00:58:20 ---

2025-04-18 00:58:22,360 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 00:58:22,361 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 00:58:22,362 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 00:58:22,362 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 00:58:22,362 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 00:58:22,363 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 00:58:22,363 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 00:58:22,363 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 00:58:22,364 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 00:58:22,364 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 00:58:22,365 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 00:58:22,365 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 00:58:22,365 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 00:58:22,365 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 00:58:22,365 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 00:58:22,365 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 00:58:22,365 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 00:58:22,365 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 00:58:22,365 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 00:58:22,365 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 00:58:22,365 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 00:58:22,366 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 00:58:22,366 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 00:58:22,366 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 00:58:22,366 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 00:58:22,366 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 00:58:22,366 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 00:58:22,366 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 00:58:22,379 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 00:58:22,382 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 00:58:22,391 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 00:58:22,392 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 00:58:22,392 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 00:58:22,392 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 00:58:22,393 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 00:58:22,393 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 00:58:22,393 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 00:58:22,393 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 00:58:22,393 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 00:58:22,393 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 00:58:22,393 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 00:58:22,393 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 00:58:22,393 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 00:58:22,393 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 00:58:22,397 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 00:58:22,397 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 00:58:22,397 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 00:58:22,397 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 00:58:22,397 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 00:58:22,397 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 00:58:22,398 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 00:58:22,398 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 00:58:22,398 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 00:58:22,398 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'fs_monitor', 'change_queue', 'mcp_server', 'database', 'metadata_extraction', 'scheduler', 'config_manager', 'doc_relationships', 'filter', 'llm_coordinator', 'recommendation_generator', 'consistency_analysis', 'memory_cache'}
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, fs_monitor, database, metadata_extraction, scheduler, doc_relationships, filter, llm_coordinator, consistency_analysis, recommendation_generator, memory_cache, mcp_server
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 00:58:22,398 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 00:58:22,398 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:58:22,398 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:58:22,398 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 00:58:22,402 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 00:58:22,403 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 00:58:22,403 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 00:58:22,403 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 00:58:22,403 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 00:58:22,403 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 00:58:22,403 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 00:58:22,404 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:58:22,404 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:58:22,404 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 00:58:22,404 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 00:58:22,404 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 00:58:22,404 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 00:58:22,404 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-18 00:58:22,404 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-18 00:58:22,404 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-18 00:58:22,404 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:58:22,404 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:58:22,404 - dbp.core.lifecycle.fs_monitor.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-18 00:58:22,405 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-18 00:58:22,405 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Using queue from change_queue component
2025-04-18 00:58:22,405 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-18 00:58:22,405 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-18 00:58:22,405 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 00:58:22,405 - dbp.fs_monitor.filter - DEBUG - Adding 0 patterns from configuration.
2025-04-18 00:58:22,406 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 00:58:22,743 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 00:58:22,744 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 00:58:22,744 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 00:58:22,745 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 00:58:22,745 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 00:58:22,745 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 32 patterns.
2025-04-18 00:58:22,745 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 00:58:22,745 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-18 00:58:22,745 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-18 00:58:22,746 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-18 00:58:22,746 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-18 00:58:22,746 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-18 00:58:22,746 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-18 00:58:22,747 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-18 00:58:22,747 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-18 00:58:22,748 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-18 00:58:22,748 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-18 00:58:22,748 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 00:58:22,748 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 00:58:22,749 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 00:58:22,749 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 00:58:22,749 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 00:58:22,749 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 00:58:22,749 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 00:58:22,749 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 00:58:22,749 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 00:58:22,749 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 00:58:22,749 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 00:58:22,749 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 00:58:22,749 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 00:58:22,749 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 00:58:22,770 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 00:58:22,774 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 00:58:22,777 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 00:58:22,778 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 00:58:22,778 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 00:58:22,778 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 00:58:23,032 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 00:58:23,032 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 00:58:23,032 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 00:58:23,032 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 00:58:23,033 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 00:58:23,034 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 00:58:23,034 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 00:58:23,035 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 00:58:23,035 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 00:58:23,035 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 00:58:23,036 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 00:58:23,036 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 00:58:23,036 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 00:58:23,037 - dbp.database.database - INFO - Running database migrations...
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG - Session 139729026350448 acquired from scoped session factory.
2025-04-18 00:58:23,037 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 00:58:23,038 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 00:58:23,038 - dbp.database.database - DEBUG - Session 139729026350448 committed.
2025-04-18 00:58:23,038 - dbp.database.database - DEBUG - Session 139729026350448 closed.
2025-04-18 00:58:23,039 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': 'DatabaseComponent' object has no attribute 'db_manager'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 147, in initialize
    db_manager = context.get_component("database").db_manager # Assuming db component exposes its manager
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseComponent' object has no attribute 'db_manager'. Did you mean: '_db_manager'?


--- SERVER START ATTEMPT AT 2025-04-18 01:00:44 ---

2025-04-18 01:00:47,298 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:00:47,299 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:00:47,300 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:00:47,300 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:00:47,301 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:00:47,302 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:00:47,302 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:00:47,302 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:00:47,303 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:00:47,303 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:00:47,304 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:00:47,305 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:00:47,305 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:00:47,305 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:00:47,306 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:00:47,306 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:00:47,306 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:00:47,306 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:00:47,307 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:00:47,307 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:00:47,307 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:00:47,307 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:00:47,308 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:00:47,308 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:00:47,308 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:00:47,308 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:00:47,308 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:00:47,308 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:00:47,309 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:00:47,309 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:00:47,309 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:00:47,309 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:00:47,309 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:00:47,309 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:00:47,309 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:00:47,309 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:00:47,310 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:00:47,310 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:00:47,325 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:00:47,328 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:00:47,331 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:00:47,331 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:00:47,332 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:00:47,333 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:00:47,333 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:00:47,333 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:00:47,333 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:00:47,333 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:00:47,333 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:00:47,333 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:00:47,334 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:00:47,334 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:00:47,334 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:00:47,334 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:00:47,338 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:00:47,339 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:00:47,339 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:00:47,339 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:00:47,339 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:00:47,339 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:00:47,339 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:00:47,339 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:00:47,339 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:00:47,339 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:00:47,339 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:00:47,339 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:00:47,339 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'mcp_server', 'change_queue', 'llm_coordinator', 'database', 'metadata_extraction', 'scheduler', 'doc_relationships', 'config_manager', 'memory_cache', 'consistency_analysis', 'fs_monitor', 'recommendation_generator', 'filter'}
2025-04-18 01:00:47,340 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:00:47,340 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, llm_coordinator, database, metadata_extraction, doc_relationships, memory_cache, consistency_analysis, fs_monitor, scheduler, recommendation_generator, mcp_server, filter
2025-04-18 01:00:47,340 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:00:47,340 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:00:47,340 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:00:47,340 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:00:47,340 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:00:47,340 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:00:47,344 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:00:47,345 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:00:47,345 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:00:47,345 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:00:47,345 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 01:00:47,345 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 01:00:47,346 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 01:00:47,346 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:00:47,346 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:00:47,346 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 01:00:47,346 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 01:00:47,346 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 01:00:47,347 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 01:00:47,347 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:00:47,347 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 01:00:47,347 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 01:00:47,347 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:00:47,347 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:00:47,347 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:00:47,347 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 01:00:47,348 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 01:00:47,348 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 01:00:47,348 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 01:00:47,348 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 01:00:47,348 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 01:00:47,348 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 01:00:47,349 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 01:00:47,349 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 01:00:47,349 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 01:00:47,349 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 01:00:47,349 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 01:00:47,349 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 01:00:47,349 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 01:00:47,350 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 01:00:47,350 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 01:00:47,350 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 01:00:47,350 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 01:00:47,350 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 01:00:47,350 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:00:47,350 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:00:47,350 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:00:47,350 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:00:47,351 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:00:47,351 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:00:47,351 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:00:47,351 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:00:47,351 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:00:47,351 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:00:47,351 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:00:47,352 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:00:47,426 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:00:47,427 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:00:47,430 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:00:47,430 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:00:47,430 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:00:47,431 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:00:47,880 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:00:47,882 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:00:47,882 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:00:47,882 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:00:47,883 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:00:47,883 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:00:47,883 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:00:47,883 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:00:47,884 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:00:47,884 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:00:47,885 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:00:47,886 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:00:47,886 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:00:47,886 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:00:47,886 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:00:47,886 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:00:47,886 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:00:47,887 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:00:47,887 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:00:47,887 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:00:47,887 - dbp.database.database - DEBUG - Session 140062900248000 acquired from scoped session factory.
2025-04-18 01:00:47,887 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:00:47,889 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:00:47,889 - dbp.database.database - DEBUG - Session 140062900248000 committed.
2025-04-18 01:00:47,889 - dbp.database.database - DEBUG - Session 140062900248000 closed.
2025-04-18 01:00:47,890 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': Configuration key 'metadata_extraction.model_id' not found. 'metadata_extraction' exists but has no attribute 'model_id'.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 449, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'MetadataExtractionConfig' object has no attribute 'model_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 152, in initialize
    bedrock_client = BedrockClient(config=context.config, logger_override=self.logger.getChild("bedrock"))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/bedrock_client.py", line 107, in __init__
    self.model_id = self.config.get('metadata_extraction.model_id', "amazon.titan-text-lite-v1") # Default model
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 154, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 472, in get
    raise ValueError(error_message) from e
ValueError: Configuration key 'metadata_extraction.model_id' not found. 'metadata_extraction' exists but has no attribute 'model_id'.


--- SERVER START ATTEMPT AT 2025-04-18 01:03:00 ---

2025-04-18 01:03:02,032 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:03:02,034 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:03:02,035 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:03:02,035 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:03:02,035 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:03:02,036 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:03:02,036 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:03:02,037 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:03:02,037 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:03:02,038 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:03:02,038 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:03:02,038 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:03:02,039 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:03:02,039 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:03:02,039 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:03:02,039 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:03:02,040 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:03:02,040 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:03:02,040 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:03:02,040 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:03:02,041 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:03:02,041 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:03:02,042 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:03:02,042 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:03:02,043 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:03:02,043 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:03:02,043 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:03:02,043 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:03:02,043 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:03:02,043 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:03:02,043 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:03:02,044 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:03:02,044 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:03:02,044 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:03:02,044 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:03:02,044 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:03:02,044 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:03:02,045 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:03:02,060 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:03:02,065 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:03:02,067 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:03:02,068 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:03:02,068 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:03:02,068 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:03:02,068 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:03:02,068 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:03:02,069 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:03:02,069 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:03:02,069 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:03:02,069 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:03:02,069 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:03:02,069 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:03:02,070 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:03:02,070 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:03:02,075 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:03:02,076 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:03:02,076 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:03:02,076 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:03:02,076 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:03:02,076 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:03:02,076 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:03:02,076 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:03:02,076 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:03:02,076 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:03:02,076 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:03:02,076 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:03:02,076 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'filter', 'doc_relationships', 'metadata_extraction', 'database', 'change_queue', 'config_manager', 'llm_coordinator', 'fs_monitor', 'scheduler', 'consistency_analysis', 'mcp_server', 'memory_cache', 'recommendation_generator'}
2025-04-18 01:03:02,077 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:03:02,077 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, database, metadata_extraction, doc_relationships, change_queue, llm_coordinator, fs_monitor, scheduler, consistency_analysis, memory_cache, recommendation_generator, mcp_server
2025-04-18 01:03:02,077 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:03:02,077 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:03:02,077 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:03:02,077 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:03:02,077 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:03:02,078 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:03:02,081 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:03:02,083 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:03:02,083 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:03:02,083 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:03:02,083 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 01:03:02,083 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 01:03:02,083 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 01:03:02,083 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:03:02,084 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:03:02,084 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 01:03:02,084 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:03:02,084 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 01:03:02,084 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:03:02,296 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:03:02,297 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:03:02,297 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:03:02,297 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:03:02,297 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:03:02,297 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 01:03:02,297 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 01:03:02,297 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 01:03:02,297 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:03:02,297 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:03:02,297 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:03:02,297 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:03:02,297 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:03:02,297 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:03:02,297 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:03:02,297 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:03:02,297 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:03:02,297 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:03:02,297 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:03:02,297 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:03:02,305 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:03:02,306 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:03:02,308 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:03:02,308 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:03:02,308 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:03:02,308 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:03:02,463 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:03:02,463 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:03:02,463 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:03:02,464 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:03:02,464 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:03:02,464 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:03:02,465 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:03:02,465 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:03:02,465 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:03:02,465 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:03:02,466 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:03:02,466 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:03:02,467 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG - Session 139702704907584 acquired from scoped session factory.
2025-04-18 01:03:02,467 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:03:02,468 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:03:02,468 - dbp.database.database - DEBUG - Session 139702704907584 committed.
2025-04-18 01:03:02,469 - dbp.database.database - DEBUG - Session 139702704907584 closed.
2025-04-18 01:03:02,469 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': Configuration key 'metadata_extraction.max_retries' not found. 'metadata_extraction' exists but has no attribute 'max_retries'.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 449, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'MetadataExtractionConfig' object has no attribute 'max_retries'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 152, in initialize
    bedrock_client = BedrockClient(config=context.config, logger_override=self.logger.getChild("bedrock"))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/bedrock_client.py", line 108, in __init__
    self.max_retries = int(self.config.get('metadata_extraction.max_retries', 3))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 154, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 472, in get
    raise ValueError(error_message) from e
ValueError: Configuration key 'metadata_extraction.max_retries' not found. 'metadata_extraction' exists but has no attribute 'max_retries'.


--- SERVER START ATTEMPT AT 2025-04-18 01:04:57 ---

2025-04-18 01:04:58,954 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:04:58,954 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:04:58,954 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:04:58,955 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:04:58,955 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:04:58,955 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:04:58,956 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:04:58,956 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:04:58,956 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:04:58,957 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:04:58,957 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:04:58,957 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:04:58,957 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:04:58,958 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:04:58,958 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:04:58,958 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:04:58,958 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:04:58,958 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:04:58,958 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:04:58,958 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:04:58,959 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:04:58,959 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:04:58,959 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:04:58,960 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:04:58,960 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:04:58,960 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:04:58,960 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:04:58,960 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:04:58,960 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:04:58,960 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:04:58,960 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:04:58,960 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:04:58,960 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:04:58,960 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:04:58,961 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:04:58,961 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:04:58,961 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:04:58,961 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:04:58,969 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:04:58,972 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:04:58,974 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:04:58,974 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:04:58,974 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:04:58,974 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:04:58,974 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:04:58,974 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:04:58,974 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:04:58,974 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:04:58,974 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:04:58,974 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:04:58,974 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:04:58,975 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:04:58,975 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:04:58,975 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:04:58,979 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:04:58,979 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:04:58,979 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:04:58,979 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:04:58,979 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:04:58,980 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:04:58,980 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:04:58,980 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:04:58,980 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'metadata_extraction', 'fs_monitor', 'doc_relationships', 'recommendation_generator', 'config_manager', 'consistency_analysis', 'llm_coordinator', 'mcp_server', 'filter', 'change_queue', 'scheduler', 'memory_cache', 'database'}
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, filter, change_queue, fs_monitor, database, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, scheduler, memory_cache, mcp_server
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:04:58,980 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:04:58,980 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:04:58,980 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:04:58,980 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:04:58,982 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:04:58,982 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:04:58,982 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:04:58,983 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 01:04:58,983 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 01:04:58,983 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 01:04:58,983 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 01:04:58,983 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 01:04:58,983 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:04:58,983 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:04:58,983 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 01:04:58,984 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:04:58,984 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 01:04:58,984 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:04:59,133 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:04:59,133 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:04:59,134 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:04:59,134 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:04:59,134 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:04:59,134 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 01:04:59,134 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 01:04:59,134 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 01:04:59,134 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 01:04:59,134 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 01:04:59,134 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 01:04:59,134 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:04:59,134 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:04:59,135 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 01:04:59,135 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 01:04:59,135 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-18 01:04:59,135 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-18 01:04:59,135 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 01:04:59,135 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 01:04:59,135 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-18 01:04:59,135 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-18 01:04:59,135 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-18 01:04:59,135 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:04:59,135 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:04:59,135 - dbp.core.lifecycle.fs_monitor.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-18 01:04:59,135 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-18 01:04:59,136 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Using queue from change_queue component
2025-04-18 01:04:59,136 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-18 01:04:59,136 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-18 01:04:59,137 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:04:59,137 - dbp.fs_monitor.filter - DEBUG - Adding 0 patterns from configuration.
2025-04-18 01:04:59,137 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:04:59,523 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:04:59,523 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:04:59,523 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:04:59,524 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:04:59,524 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:04:59,524 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 32 patterns.
2025-04-18 01:04:59,524 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 01:04:59,524 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-18 01:04:59,524 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-18 01:04:59,524 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-18 01:04:59,524 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-18 01:04:59,524 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-18 01:04:59,524 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-18 01:04:59,525 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-18 01:04:59,528 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-18 01:04:59,529 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-18 01:04:59,530 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-18 01:04:59,531 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 01:04:59,531 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 01:04:59,531 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:04:59,532 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:04:59,532 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:04:59,532 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:04:59,532 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:04:59,532 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:04:59,532 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:04:59,533 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:04:59,533 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:04:59,533 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:04:59,533 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:04:59,533 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:04:59,547 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:04:59,548 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:04:59,551 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:04:59,552 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:04:59,552 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:04:59,552 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:04:59,812 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:04:59,812 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:04:59,812 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:04:59,813 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:04:59,813 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:04:59,813 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:04:59,813 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:04:59,813 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:04:59,813 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:04:59,814 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:04:59,814 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:04:59,814 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:04:59,814 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:04:59,814 - dbp.database.database - DEBUG - Session 140323084195584 acquired from scoped session factory.
2025-04-18 01:04:59,814 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:04:59,814 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:04:59,815 - dbp.database.database - DEBUG - Session 140323084195584 committed.
2025-04-18 01:04:59,815 - dbp.database.database - DEBUG - Session 140323084195584 closed.
2025-04-18 01:04:59,815 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': Configuration key 'metadata_extraction.retry_delay' not found. 'metadata_extraction' exists but has no attribute 'retry_delay'.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 449, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'MetadataExtractionConfig' object has no attribute 'retry_delay'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 152, in initialize
    bedrock_client = BedrockClient(config=context.config, logger_override=self.logger.getChild("bedrock"))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/bedrock_client.py", line 109, in __init__
    self.retry_delay = float(self.config.get('metadata_extraction.retry_delay', 1.0))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 154, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 472, in get
    raise ValueError(error_message) from e
ValueError: Configuration key 'metadata_extraction.retry_delay' not found. 'metadata_extraction' exists but has no attribute 'retry_delay'.


--- SERVER START ATTEMPT AT 2025-04-18 01:07:13 ---

2025-04-18 01:07:15,127 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:07:15,127 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:07:15,130 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:07:15,131 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:07:15,131 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:07:15,132 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:07:15,132 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:07:15,132 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:07:15,132 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:07:15,135 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:07:15,135 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:07:15,136 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:07:15,138 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:07:15,138 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:07:15,138 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:07:15,139 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:07:15,139 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:07:15,140 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:07:15,140 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:07:15,141 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:07:15,142 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:07:15,142 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:07:15,143 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:07:15,143 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:07:15,143 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:07:15,143 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:07:15,143 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:07:15,143 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:07:15,144 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:07:15,144 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:07:15,144 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:07:15,144 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:07:15,144 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:07:15,144 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:07:15,144 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:07:15,144 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:07:15,144 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:07:15,145 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:07:15,168 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:07:15,173 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:07:15,179 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:07:15,180 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:07:15,180 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:07:15,180 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:07:15,180 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:07:15,180 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:07:15,180 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:07:15,180 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:07:15,180 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:07:15,180 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:07:15,181 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:07:15,181 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:07:15,181 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:07:15,181 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:07:15,187 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:07:15,187 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:07:15,188 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:07:15,189 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:07:15,189 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:07:15,191 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:07:15,191 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:07:15,192 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:07:15,194 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:07:15,194 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:07:15,194 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:07:15,194 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:07:15,194 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'database', 'scheduler', 'llm_coordinator', 'filter', 'metadata_extraction', 'doc_relationships', 'memory_cache', 'consistency_analysis', 'mcp_server', 'recommendation_generator', 'change_queue', 'fs_monitor', 'config_manager'}
2025-04-18 01:07:15,196 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:07:15,197 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, llm_coordinator, filter, metadata_extraction, doc_relationships, memory_cache, consistency_analysis, recommendation_generator, mcp_server, change_queue, fs_monitor, scheduler
2025-04-18 01:07:15,197 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:07:15,198 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:07:15,198 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:07:15,198 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:07:15,198 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:07:15,198 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:07:15,201 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:07:15,202 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:07:15,203 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:07:15,203 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:07:15,203 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:07:15,203 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:07:15,203 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:07:15,203 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:07:15,203 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:07:15,203 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:07:15,204 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:07:15,204 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:07:15,204 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:07:15,204 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:07:15,204 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:07:15,204 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:07:15,345 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:07:15,346 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:07:15,356 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:07:15,356 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:07:15,358 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:07:15,358 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:07:16,060 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:07:16,061 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:07:16,061 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:07:16,061 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:07:16,061 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:07:16,061 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:07:16,061 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:07:16,062 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:07:16,062 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:07:16,062 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:07:16,069 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:07:16,069 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:07:16,069 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:07:16,071 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:07:16,071 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:07:16,071 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:07:16,072 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:07:16,072 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:07:16,072 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:07:16,072 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:07:16,074 - dbp.database.database - DEBUG - Session 139898773688096 acquired from scoped session factory.
2025-04-18 01:07:16,074 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:07:16,076 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:07:16,077 - dbp.database.database - DEBUG - Session 139898773688096 committed.
2025-04-18 01:07:16,077 - dbp.database.database - DEBUG - Session 139898773688096 closed.
2025-04-18 01:07:16,077 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': Configuration key 'metadata_extraction.temperature' not found. 'metadata_extraction' exists but has no attribute 'temperature'.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 449, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'MetadataExtractionConfig' object has no attribute 'temperature'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 152, in initialize
    bedrock_client = BedrockClient(config=context.config, logger_override=self.logger.getChild("bedrock"))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/bedrock_client.py", line 110, in __init__
    self.temperature = float(self.config.get('metadata_extraction.temperature', 0.0))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 154, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 472, in get
    raise ValueError(error_message) from e
ValueError: Configuration key 'metadata_extraction.temperature' not found. 'metadata_extraction' exists but has no attribute 'temperature'.


--- SERVER START ATTEMPT AT 2025-04-18 01:09:28 ---

2025-04-18 01:09:29,684 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:09:29,684 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:09:29,684 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:09:29,685 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:09:29,685 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:09:29,685 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:09:29,685 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:09:29,685 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:09:29,685 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:09:29,686 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:09:29,686 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:09:29,687 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:09:29,687 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:09:29,687 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:09:29,687 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:09:29,687 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:09:29,687 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:09:29,687 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:09:29,687 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:09:29,687 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:09:29,687 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:09:29,687 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:09:29,687 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:09:29,687 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:09:29,687 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:09:29,687 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:09:29,687 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:09:29,687 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:09:29,700 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:09:29,703 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:09:29,704 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:09:29,704 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:09:29,704 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:09:29,704 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:09:29,704 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:09:29,704 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:09:29,704 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:09:29,704 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:09:29,704 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:09:29,704 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:09:29,704 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:09:29,704 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:09:29,704 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:09:29,704 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:09:29,707 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:09:29,707 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:09:29,707 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:09:29,708 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:09:29,708 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:09:29,708 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:09:29,708 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:09:29,708 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'memory_cache', 'database', 'fs_monitor', 'consistency_analysis', 'metadata_extraction', 'config_manager', 'doc_relationships', 'mcp_server', 'filter', 'recommendation_generator', 'change_queue', 'llm_coordinator', 'scheduler'}
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, filter, change_queue, fs_monitor, llm_coordinator, recommendation_generator, mcp_server, scheduler
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:09:29,708 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:09:29,708 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:09:29,708 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:09:29,708 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:09:29,712 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:09:29,712 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:09:29,712 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:09:29,712 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:09:29,712 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:09:29,712 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:09:29,712 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:09:29,713 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:09:29,713 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:09:29,713 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:09:29,713 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:09:29,713 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:09:29,713 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:09:29,713 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:09:29,713 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:09:29,713 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:09:29,794 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:09:29,796 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:09:29,799 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:09:29,799 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:09:29,800 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:09:29,800 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:09:30,026 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:09:30,026 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:09:30,026 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:09:30,026 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:09:30,027 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:09:30,027 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:09:30,027 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:09:30,027 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:09:30,027 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:09:30,027 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:09:30,029 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:09:30,029 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:09:30,030 - dbp.database.database - DEBUG - Session 140047820200448 acquired from scoped session factory.
2025-04-18 01:09:30,030 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:09:30,031 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:09:30,031 - dbp.database.database - DEBUG - Session 140047820200448 committed.
2025-04-18 01:09:30,031 - dbp.database.database - DEBUG - Session 140047820200448 closed.
2025-04-18 01:09:30,031 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.memory_cache] Initialization failed for component 'memory_cache': 'AppConfig' object has no attribute 'memory_cache'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/memory_cache/component.py", line 145, in initialize
    cache_config = getattr(config, self.name)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'memory_cache'


--- SERVER START ATTEMPT AT 2025-04-18 01:14:06 ---

2025-04-18 01:14:08,845 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:14:08,846 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:14:08,846 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:14:08,846 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:14:08,847 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:14:08,847 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:14:08,847 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:14:08,847 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:14:08,848 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:14:08,848 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:14:08,848 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:14:08,848 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:14:08,848 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:14:08,849 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:14:08,849 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:14:08,849 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:14:08,849 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:14:08,849 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:14:08,849 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:14:08,849 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:14:08,850 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:14:08,850 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:14:08,850 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:14:08,851 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:14:08,851 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:14:08,851 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:14:08,851 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:14:08,851 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:14:08,851 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:14:08,851 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:14:08,851 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:14:08,851 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:14:08,851 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:14:08,851 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:14:08,852 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:14:08,852 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:14:08,852 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:14:08,852 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:14:08,887 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:14:08,891 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:14:08,894 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:14:08,897 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:14:08,897 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:14:08,897 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:14:08,903 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:14:08,904 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:14:08,904 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:14:08,904 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:14:08,904 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:14:08,904 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:14:08,904 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:14:08,904 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:14:08,904 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:14:08,904 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:14:08,909 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:14:08,909 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:14:08,909 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:14:08,909 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:14:08,909 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:14:08,909 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:14:08,909 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:14:08,909 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:14:08,909 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:14:08,909 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:14:08,909 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:14:08,909 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:14:08,910 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'filter', 'recommendation_generator', 'metadata_extraction', 'mcp_server', 'scheduler', 'llm_coordinator', 'fs_monitor', 'consistency_analysis', 'doc_relationships', 'config_manager', 'memory_cache', 'database', 'change_queue'}
2025-04-18 01:14:08,910 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:14:08,920 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, database, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, memory_cache, mcp_server, change_queue, fs_monitor, scheduler
2025-04-18 01:14:08,920 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:14:08,921 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:14:08,921 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:14:08,921 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:14:08,921 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:14:08,921 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:14:09,010 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:14:09,012 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:14:09,012 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:14:09,012 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:14:09,013 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 01:14:09,013 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 01:14:09,013 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 01:14:09,014 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:14:09,014 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:14:09,014 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 01:14:09,014 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:14:09,014 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 01:14:09,014 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:14:09,173 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:14:09,174 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:14:09,174 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:14:09,174 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:14:09,174 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:14:09,175 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 01:14:09,175 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 01:14:09,175 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 01:14:09,175 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:14:09,175 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 01:14:09,175 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 01:14:09,175 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:14:09,175 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:14:09,175 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:14:09,175 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 01:14:09,175 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 01:14:09,175 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 01:14:09,175 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 01:14:09,175 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 01:14:09,177 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 01:14:09,177 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 01:14:09,178 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 01:14:09,178 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 01:14:09,178 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 01:14:09,178 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 01:14:09,178 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 01:14:09,179 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 01:14:09,179 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 01:14:09,179 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 01:14:09,179 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 01:14:09,179 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 01:14:09,179 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 01:14:09,179 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 01:14:09,179 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:14:09,179 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:14:09,180 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:14:09,180 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:14:09,180 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:14:09,180 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:14:09,180 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:14:09,180 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:14:09,180 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:14:09,180 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:14:09,180 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:14:09,180 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:14:09,202 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:14:09,203 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:14:09,207 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:14:09,208 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:14:09,208 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:14:09,208 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:14:09,485 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:14:09,486 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:14:09,486 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:14:09,486 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:14:09,486 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:14:09,486 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:14:09,486 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:14:09,487 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:14:09,487 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:14:09,487 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:14:09,488 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:14:09,488 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:14:09,488 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:14:09,489 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:14:09,489 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:14:09,489 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:14:09,490 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:14:09,493 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:14:09,493 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:14:09,493 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:14:09,493 - dbp.database.database - DEBUG - Session 139911540154224 acquired from scoped session factory.
2025-04-18 01:14:09,493 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:14:09,495 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:14:09,497 - dbp.database.database - DEBUG - Session 139911540154224 committed.
2025-04-18 01:14:09,497 - dbp.database.database - DEBUG - Session 139911540154224 closed.
2025-04-18 01:14:09,497 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': Configuration key 'metadata_extraction.max_tokens' not found. 'metadata_extraction' exists but has no attribute 'max_tokens'.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 449, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'MetadataExtractionConfig' object has no attribute 'max_tokens'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 152, in initialize
    bedrock_client = BedrockClient(config=context.config, logger_override=self.logger.getChild("bedrock"))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/bedrock_client.py", line 111, in __init__
    self.max_tokens = int(self.config.get('metadata_extraction.max_tokens', 4096))
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 154, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 472, in get
    raise ValueError(error_message) from e
ValueError: Configuration key 'metadata_extraction.max_tokens' not found. 'metadata_extraction' exists but has no attribute 'max_tokens'.


--- SERVER START ATTEMPT AT 2025-04-18 01:16:51 ---

2025-04-18 01:16:52,758 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:16:52,758 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:16:52,759 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:16:52,759 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:16:52,759 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:16:52,759 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:16:52,759 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:16:52,759 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:16:52,760 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:16:52,760 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:16:52,761 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:16:52,761 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:16:52,761 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:16:52,761 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:16:52,761 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:16:52,761 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:16:52,762 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:16:52,762 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:16:52,762 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:16:52,762 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:16:52,762 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:16:52,762 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:16:52,762 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:16:52,762 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:16:52,762 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:16:52,762 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:16:52,762 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:16:52,762 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:16:52,762 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:16:52,762 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:16:52,772 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:16:52,775 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:16:52,776 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:16:52,776 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:16:52,776 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:16:52,776 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:16:52,777 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:16:52,777 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:16:52,777 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:16:52,777 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:16:52,777 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:16:52,777 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:16:52,777 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:16:52,777 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:16:52,777 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:16:52,777 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:16:52,779 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:16:52,779 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:16:52,779 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:16:52,779 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:16:52,780 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:16:52,780 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:16:52,780 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:16:52,780 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'fs_monitor', 'mcp_server', 'memory_cache', 'filter', 'change_queue', 'scheduler', 'doc_relationships', 'llm_coordinator', 'consistency_analysis', 'database', 'recommendation_generator', 'metadata_extraction', 'config_manager'}
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, fs_monitor, llm_coordinator, database, memory_cache, metadata_extraction, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:16:52,780 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:16:52,780 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:16:52,780 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:16:52,780 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:16:52,847 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:16:52,856 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:16:52,856 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:16:52,856 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:16:52,856 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 01:16:52,856 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 01:16:52,856 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 01:16:52,856 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:16:52,857 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:16:52,857 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 01:16:52,857 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:16:52,857 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 01:16:52,857 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:16:52,988 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:16:52,989 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:16:52,989 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:16:52,989 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:16:52,989 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:16:52,989 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 01:16:52,989 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 01:16:52,989 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 01:16:52,989 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 01:16:52,989 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 01:16:52,989 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 01:16:52,989 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:16:52,989 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:16:52,989 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 01:16:52,990 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 01:16:52,990 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-18 01:16:52,990 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-18 01:16:52,990 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 01:16:52,990 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 01:16:52,990 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-18 01:16:52,990 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-18 01:16:52,990 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-18 01:16:52,990 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:16:52,990 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:16:52,990 - dbp.core.lifecycle.fs_monitor.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-18 01:16:52,990 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-18 01:16:52,990 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Using queue from change_queue component
2025-04-18 01:16:52,990 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-18 01:16:52,990 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-18 01:16:52,990 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:16:52,990 - dbp.fs_monitor.filter - DEBUG - Adding 0 patterns from configuration.
2025-04-18 01:16:52,990 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:16:53,119 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:16:53,119 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:16:53,119 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:16:53,119 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:16:53,120 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:16:53,120 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 32 patterns.
2025-04-18 01:16:53,120 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 01:16:53,120 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-18 01:16:53,120 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-18 01:16:53,120 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-18 01:16:53,120 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-18 01:16:53,120 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-18 01:16:53,120 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-18 01:16:53,120 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-18 01:16:53,121 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-18 01:16:53,121 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-18 01:16:53,122 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-18 01:16:53,122 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 01:16:53,122 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 01:16:53,122 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:16:53,123 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 01:16:53,123 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 01:16:53,123 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:16:53,123 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:16:53,123 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:16:53,123 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 01:16:53,124 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 01:16:53,124 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 01:16:53,124 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 01:16:53,124 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 01:16:53,124 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 01:16:53,124 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 01:16:53,125 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 01:16:53,125 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 01:16:53,126 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 01:16:53,126 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 01:16:53,126 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 01:16:53,127 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 01:16:53,127 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 01:16:53,127 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 01:16:53,127 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 01:16:53,127 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 01:16:53,127 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 01:16:53,127 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 01:16:53,127 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:16:53,127 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:16:53,127 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:16:53,127 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:16:53,127 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:16:53,127 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:16:53,127 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:16:53,127 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:16:53,127 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:16:53,127 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:16:53,127 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:16:53,127 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:16:53,138 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:16:53,139 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:16:53,141 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:16:53,142 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:16:53,142 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:16:53,142 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:16:53,322 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:16:53,322 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:16:53,322 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:16:53,322 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:16:53,322 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:16:53,323 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:16:53,323 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:16:53,323 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:16:53,323 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:16:53,323 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:16:53,323 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:16:53,323 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:16:53,323 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:16:53,324 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG - Session 140208734084928 acquired from scoped session factory.
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:16:53,324 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:16:53,325 - dbp.database.database - DEBUG - Session 140208734084928 committed.
2025-04-18 01:16:53,325 - dbp.database.database - DEBUG - Session 140208734084928 closed.
2025-04-18 01:16:53,325 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.memory_cache] Initialization failed for component 'memory_cache': Database component does not expose a valid 'db_manager' attribute.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/memory_cache/component.py", line 153, in initialize
    raise TypeError("Database component does not expose a valid 'db_manager' attribute.")
TypeError: Database component does not expose a valid 'db_manager' attribute.


--- SERVER START ATTEMPT AT 2025-04-18 01:23:09 ---

2025-04-18 01:23:11,761 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 01:23:11,762 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 01:23:11,762 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 01:23:11,762 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 01:23:11,762 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 01:23:11,762 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 01:23:11,762 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 01:23:11,762 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 01:23:11,763 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 01:23:11,763 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 01:23:11,764 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 01:23:11,764 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 01:23:11,765 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 01:23:11,765 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 01:23:11,765 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 01:23:11,765 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 01:23:11,765 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 01:23:11,765 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 01:23:11,765 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 01:23:11,765 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 01:23:11,765 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 01:23:11,765 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 01:23:11,765 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 01:23:11,766 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 01:23:11,766 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 01:23:11,766 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 01:23:11,766 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 01:23:11,766 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 01:23:11,775 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 01:23:11,778 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 01:23:11,779 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 01:23:11,779 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 01:23:11,780 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 01:23:11,780 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 01:23:11,780 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 01:23:11,780 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 01:23:11,780 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 01:23:11,780 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 01:23:11,780 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 01:23:11,780 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 01:23:11,781 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 01:23:11,781 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 01:23:11,781 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 01:23:11,781 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 01:23:11,785 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 01:23:11,785 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 01:23:11,785 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 01:23:11,785 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 01:23:11,785 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 01:23:11,785 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 01:23:11,786 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 01:23:11,786 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 01:23:11,786 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 01:23:11,786 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 01:23:11,786 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 01:23:11,786 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 01:23:11,786 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'change_queue', 'fs_monitor', 'memory_cache', 'recommendation_generator', 'llm_coordinator', 'consistency_analysis', 'doc_relationships', 'filter', 'mcp_server', 'metadata_extraction', 'database', 'config_manager', 'scheduler'}
2025-04-18 01:23:11,786 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 01:23:11,786 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, fs_monitor, llm_coordinator, filter, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, scheduler
2025-04-18 01:23:11,786 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 01:23:11,786 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 01:23:11,787 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 01:23:11,787 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:23:11,787 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:23:11,787 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 01:23:11,853 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 01:23:11,854 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 01:23:11,854 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 01:23:11,854 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 01:23:11,854 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 01:23:11,857 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 01:23:11,858 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 01:23:11,858 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:23:11,858 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:23:11,859 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 01:23:11,859 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 01:23:11,860 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 01:23:11,860 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 01:23:11,860 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-18 01:23:11,860 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' class: FileSystemMonitorComponent
2025-04-18 01:23:11,860 - dbp.core.lifecycle - DEBUG - Component 'fs_monitor' dependencies: ['config_manager', 'change_queue']
2025-04-18 01:23:11,860 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:23:11,860 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:23:11,861 - dbp.core.lifecycle.fs_monitor.fs_monitor - DEBUG - Logger obtained from context.logger: <class 'logging.Logger'>
2025-04-18 01:23:11,861 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-18 01:23:11,861 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Using queue from change_queue component
2025-04-18 01:23:11,861 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-18 01:23:11,861 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-18 01:23:11,861 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:23:11,861 - dbp.fs_monitor.filter - DEBUG - Adding 0 patterns from configuration.
2025-04-18 01:23:11,861 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:23:12,021 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:23:12,022 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:23:12,022 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:23:12,022 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:23:12,022 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:23:12,022 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 32 patterns.
2025-04-18 01:23:12,022 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 01:23:12,022 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-18 01:23:12,022 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-18 01:23:12,022 - dbp.fs_monitor.base - DEBUG - LinuxFileSystemMonitor initialized.
2025-04-18 01:23:12,022 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-18 01:23:12,022 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-18 01:23:12,022 - inotify.adapters - DEBUG - Inotify handle is (3).
2025-04-18 01:23:12,023 - dbp.fs_monitor.linux - DEBUG - Inotify instance created.
2025-04-18 01:23:12,023 - dbp.fs_monitor.linux - DEBUG - Starting inotify event loop...
2025-04-18 01:23:12,024 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-18 01:23:12,024 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-18 01:23:12,025 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 01:23:12,025 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 01:23:12,026 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:23:12,026 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 01:23:12,026 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 01:23:12,027 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:23:12,027 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:23:12,027 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 01:23:12,027 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 01:23:12,027 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 01:23:12,027 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 01:23:12,028 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 01:23:12,028 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 01:23:12,029 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 01:23:12,029 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 01:23:12,029 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 01:23:12,029 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 01:23:12,029 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 01:23:12,029 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 01:23:12,029 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 01:23:12,029 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 01:23:12,029 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 01:23:12,029 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 01:23:12,029 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:23:12,030 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:23:12,030 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 01:23:12,030 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 01:23:12,030 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 01:23:12,030 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 01:23:12,203 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 01:23:12,204 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 01:23:12,204 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 01:23:12,204 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 01:23:12,205 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 01:23:12,205 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 01:23:12,205 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 01:23:12,205 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 01:23:12,205 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 01:23:12,205 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 01:23:12,206 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 01:23:12,206 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 01:23:12,206 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 01:23:12,206 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 01:23:12,206 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 01:23:12,206 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 01:23:12,207 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 01:23:12,207 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 01:23:12,207 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 01:23:12,207 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 01:23:12,239 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 01:23:12,241 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 01:23:12,253 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 01:23:12,253 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 01:23:12,254 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 01:23:12,254 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 01:23:12,582 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 01:23:12,582 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 01:23:12,582 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 01:23:12,582 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 01:23:12,585 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 01:23:12,585 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:23:12,585 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 01:23:12,586 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:23:12,586 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 01:23:12,586 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:23:12,588 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 01:23:12,588 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 01:23:12,588 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 01:23:12,588 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 01:23:12,588 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 01:23:12,588 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 01:23:12,588 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 01:23:12,589 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 01:23:12,589 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 01:23:12,589 - dbp.database.database - INFO - Running database migrations...
2025-04-18 01:23:12,589 - dbp.database.database - DEBUG - Session 139806205813600 acquired from scoped session factory.
2025-04-18 01:23:12,589 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 01:23:12,590 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 01:23:12,591 - dbp.database.database - DEBUG - Session 139806205813600 committed.
2025-04-18 01:23:12,591 - dbp.database.database - DEBUG - Session 139806205813600 closed.
2025-04-18 01:23:12,591 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.memory_cache] Initialization failed for component 'memory_cache': 'MemoryCacheConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/memory_cache/component.py", line 156, in initialize
    eviction_strategy = self._create_eviction_strategy(cache_config)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/memory_cache/component.py", line 194, in _create_eviction_strategy
    strategy_name = cache_config.get('eviction_strategy', 'lru').lower() # Default to lru
                    ^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'MemoryCacheConfig' object has no attribute 'get'


--- SERVER START ATTEMPT AT 2025-04-18 06:50:45 ---

2025-04-18 06:50:47,353 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 06:50:47,353 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 06:50:47,353 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 06:50:47,354 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 06:50:47,354 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 06:50:47,354 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 06:50:47,354 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 06:50:47,354 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 06:50:47,354 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 06:50:47,355 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 06:50:47,355 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 06:50:47,356 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 06:50:47,356 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 06:50:47,356 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 06:50:47,356 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 06:50:47,356 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 06:50:47,356 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 06:50:47,356 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 06:50:47,356 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 06:50:47,356 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 06:50:47,356 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 06:50:47,356 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 06:50:47,356 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 06:50:47,356 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 06:50:47,356 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 06:50:47,356 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 06:50:47,356 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 06:50:47,368 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 06:50:47,373 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 06:50:47,375 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 06:50:47,375 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 06:50:47,375 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 06:50:47,375 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 06:50:47,375 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 06:50:47,376 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 06:50:47,376 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 06:50:47,376 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 06:50:47,376 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 06:50:47,376 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 06:50:47,376 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 06:50:47,376 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 06:50:47,376 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 06:50:47,377 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 06:50:47,380 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'filter', 'scheduler', 'metadata_extraction', 'llm_coordinator', 'recommendation_generator', 'mcp_server', 'change_queue', 'consistency_analysis', 'database', 'config_manager', 'memory_cache', 'doc_relationships', 'fs_monitor'}
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, change_queue, database, metadata_extraction, memory_cache, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-18 06:50:47,381 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 06:50:47,381 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 06:50:47,382 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 06:50:47,382 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 06:50:47,382 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 06:50:47,443 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 06:50:47,444 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 06:50:47,444 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 06:50:47,444 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 06:50:47,445 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 06:50:47,445 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 06:50:47,445 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 06:50:47,445 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 06:50:47,445 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 06:50:47,445 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 06:50:47,445 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 06:50:47,445 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 06:50:47,446 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 06:50:47,548 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 06:50:47,549 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 06:50:47,549 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 06:50:47,549 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 06:50:47,549 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 06:50:47,549 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 06:50:47,549 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 06:50:47,549 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 06:50:47,549 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 06:50:47,549 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 06:50:47,549 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 06:50:47,549 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 06:50:47,549 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 06:50:47,549 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 06:50:47,549 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 06:50:47,550 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 06:50:47,550 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 06:50:47,550 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 06:50:47,550 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 06:50:47,550 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 06:50:47,550 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 06:50:47,550 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-18 06:50:47,550 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-18 06:50:47,550 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 06:50:47,550 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 06:50:47,550 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 06:50:47,550 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 06:50:47,551 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 06:50:47,551 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 06:50:47,551 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 06:50:47,551 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 06:50:47,551 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 06:50:47,551 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 06:50:47,551 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 06:50:47,558 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 06:50:47,559 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 06:50:47,560 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 06:50:47,560 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 06:50:47,561 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 06:50:47,561 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 06:50:47,680 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 06:50:47,680 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 06:50:47,680 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 06:50:47,680 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 06:50:47,681 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 06:50:47,681 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 06:50:47,681 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 06:50:47,681 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 06:50:47,681 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 06:50:47,681 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 06:50:47,682 - dbp.database.database - INFO - Running database migrations...
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG - Session 139807592193232 acquired from scoped session factory.
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 06:50:47,682 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 06:50:47,683 - dbp.database.database - DEBUG - Session 139807592193232 committed.
2025-04-18 06:50:47,683 - dbp.database.database - DEBUG - Session 139807592193232 closed.
2025-04-18 06:50:47,683 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.metadata_extraction] Initialization failed for component 'metadata_extraction': Configuration key 'aws.region' not found in configuration.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 449, in get
    value = getattr(value, part)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'AppConfig' object has no attribute 'aws'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/component.py", line 152, in initialize
    bedrock_client = BedrockClient(config=context.config, logger_override=self.logger.getChild("bedrock"))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/metadata_extraction/bedrock_client.py", line 112, in __init__
    self.aws_region = self.config.get('aws.region', None) # Optional region from config
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 154, in get
    return self._config_manager.get(key, resolve_templates)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/config_manager.py", line 472, in get
    raise ValueError(error_message) from e
ValueError: Configuration key 'aws.region' not found in configuration.


--- SERVER START ATTEMPT AT 2025-04-18 07:00:14 ---

2025-04-18 07:00:16,865 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:00:16,865 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:00:16,865 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:00:16,865 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:00:16,866 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:00:16,866 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:00:16,866 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:00:16,866 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:00:16,867 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:00:16,867 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:00:16,867 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:00:16,867 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:00:16,868 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:00:16,869 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:00:16,869 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:00:16,879 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:00:16,879 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:00:16,879 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:00:16,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:00:16,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:00:16,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:00:16,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:00:16,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:00:16,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:00:16,880 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:00:16,880 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:00:16,880 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:00:16,880 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:00:16,880 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:00:16,880 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:00:16,880 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:00:16,902 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:00:16,913 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:00:16,915 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:00:16,915 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:00:16,915 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:00:16,915 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:00:16,915 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:00:16,915 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:00:16,915 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:00:16,916 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:00:16,916 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:00:16,916 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:00:16,916 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:00:16,916 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:00:16,916 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:00:16,916 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:00:16,931 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:00:16,931 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:00:16,931 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:00:16,931 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:00:16,931 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:00:16,931 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:00:16,931 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:00:16,931 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:00:16,931 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:00:16,931 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:00:16,931 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:00:16,931 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:00:16,931 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'database', 'config_manager', 'metadata_extraction', 'llm_coordinator', 'fs_monitor', 'filter', 'doc_relationships', 'scheduler', 'memory_cache', 'mcp_server', 'recommendation_generator', 'change_queue', 'consistency_analysis'}
2025-04-18 07:00:16,932 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:00:16,932 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, metadata_extraction, llm_coordinator, filter, doc_relationships, memory_cache, change_queue, fs_monitor, scheduler, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 07:00:16,932 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:00:16,932 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:00:16,932 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:00:16,932 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:00:16,932 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:00:16,932 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:00:17,019 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:00:17,021 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:00:17,021 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:00:17,021 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:00:17,022 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:00:17,022 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:00:17,022 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:00:17,022 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:00:17,022 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:00:17,022 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:00:17,022 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:00:17,022 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:00:17,022 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:00:17,022 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:00:17,022 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:00:17,022 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:00:17,056 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:00:17,057 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:00:17,059 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:00:17,060 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:00:17,060 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:00:17,060 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:00:17,293 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:00:17,293 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:00:17,293 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:00:17,294 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG - Session 140665920609584 acquired from scoped session factory.
2025-04-18 07:00:17,294 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:00:17,295 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:00:17,296 - dbp.database.database - DEBUG - Session 140665920609584 committed.
2025-04-18 07:00:17,296 - dbp.database.database - DEBUG - Session 140665920609584 closed.
2025-04-18 07:00:17,296 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.doc_relationships] Initialization failed for component 'doc_relationships': Database component does not expose a valid 'db_manager' attribute.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 152, in initialize
    raise TypeError("Database component does not expose a valid 'db_manager' attribute.")
TypeError: Database component does not expose a valid 'db_manager' attribute.


--- SERVER START ATTEMPT AT 2025-04-18 07:02:34 ---

2025-04-18 07:02:35,877 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:02:35,878 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:02:35,878 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:02:35,878 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:02:35,878 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:02:35,878 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:02:35,878 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:02:35,878 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:02:35,879 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:02:35,879 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:02:35,880 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:02:35,880 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:02:35,880 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:02:35,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:02:35,880 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:02:35,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:02:35,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:02:35,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:02:35,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:02:35,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:02:35,880 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:02:35,880 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:02:35,881 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:02:35,881 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:02:35,881 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:02:35,881 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:02:35,881 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:02:35,881 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:02:35,894 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:02:35,899 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:02:35,901 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:02:35,901 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:02:35,901 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:02:35,901 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:02:35,901 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:02:35,901 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:02:35,901 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:02:35,901 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:02:35,901 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:02:35,902 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:02:35,902 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:02:35,902 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:02:35,902 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:02:35,902 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:02:35,907 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:02:35,907 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:02:35,907 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:02:35,907 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:02:35,907 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:02:35,907 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:02:35,907 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:02:35,908 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:02:35,908 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:02:35,908 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:02:35,908 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:02:35,908 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:02:35,908 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'memory_cache', 'doc_relationships', 'recommendation_generator', 'filter', 'mcp_server', 'change_queue', 'consistency_analysis', 'metadata_extraction', 'llm_coordinator', 'scheduler', 'database', 'config_manager', 'fs_monitor'}
2025-04-18 07:02:35,908 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:02:35,908 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, llm_coordinator, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-18 07:02:35,909 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:02:35,909 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:02:35,909 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:02:35,909 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:02:35,909 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:02:35,909 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:02:35,962 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:02:35,963 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:02:35,963 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:02:35,963 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:02:35,963 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 07:02:35,963 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 07:02:35,963 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 07:02:35,963 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:02:35,963 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:02:35,963 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 07:02:35,964 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 07:02:35,964 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 07:02:35,964 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 07:02:36,053 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 07:02:36,054 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 07:02:36,054 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 07:02:36,054 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 07:02:36,054 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 07:02:36,054 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 07:02:36,054 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 07:02:36,054 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 07:02:36,054 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 07:02:36,054 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 07:02:36,054 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 07:02:36,054 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:02:36,054 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:02:36,054 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 07:02:36,054 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 07:02:36,054 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-18 07:02:36,054 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-18 07:02:36,054 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 07:02:36,054 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 07:02:36,054 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:02:36,054 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 07:02:36,054 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 07:02:36,054 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:02:36,055 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 07:02:36,055 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 07:02:36,055 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 07:02:36,055 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 07:02:36,055 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:02:36,055 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:02:36,055 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:02:36,055 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:02:36,055 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:02:36,055 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:02:36,055 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:02:36,056 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:02:36,056 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:02:36,056 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:02:36,056 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:02:36,056 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:02:36,067 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:02:36,068 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:02:36,070 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:02:36,070 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:02:36,070 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:02:36,070 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:02:36,192 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:02:36,192 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:02:36,192 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:02:36,192 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:02:36,192 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:02:36,193 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:02:36,193 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:02:36,193 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:02:36,193 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:02:36,193 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:02:36,193 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:02:36,193 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:02:36,193 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:02:36,193 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:02:36,194 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG - Session 140509423603104 acquired from scoped session factory.
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:02:36,194 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:02:36,195 - dbp.database.database - DEBUG - Session 140509423603104 committed.
2025-04-18 07:02:36,195 - dbp.database.database - DEBUG - Session 140509423603104 closed.
2025-04-18 07:02:36,195 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.consistency_analysis] Initialization failed for component 'consistency_analysis': Database component does not expose a valid 'db_manager' attribute.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/consistency_analysis/component.py", line 172, in initialize
    raise TypeError("Database component does not expose a valid 'db_manager' attribute.")
TypeError: Database component does not expose a valid 'db_manager' attribute.


--- SERVER START ATTEMPT AT 2025-04-18 07:05:29 ---

2025-04-18 07:05:30,786 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:05:30,786 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:05:30,787 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:05:30,788 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:05:30,788 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:05:30,788 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:05:30,788 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:05:30,789 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:05:30,789 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:05:30,790 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:05:30,790 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:05:30,790 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:05:30,790 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:05:30,790 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:05:30,790 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:05:30,790 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:05:30,790 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:05:30,791 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:05:30,791 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:05:30,791 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:05:30,791 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:05:30,791 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:05:30,791 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:05:30,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:05:30,792 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:05:30,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:05:30,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:05:30,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:05:30,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:05:30,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:05:30,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:05:30,792 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:05:30,792 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:05:30,792 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:05:30,792 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:05:30,792 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:05:30,792 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:05:30,792 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:05:30,802 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:05:30,807 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:05:30,808 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:05:30,808 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:05:30,808 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:05:30,808 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:05:30,808 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:05:30,808 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:05:30,808 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:05:30,808 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:05:30,808 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:05:30,808 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:05:30,808 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:05:30,809 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:05:30,809 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:05:30,809 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:05:30,810 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:05:30,810 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:05:30,811 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:05:30,811 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:05:30,811 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:05:30,811 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:05:30,811 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'recommendation_generator', 'consistency_analysis', 'fs_monitor', 'doc_relationships', 'database', 'config_manager', 'memory_cache', 'scheduler', 'filter', 'change_queue', 'llm_coordinator', 'metadata_extraction', 'mcp_server'}
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, memory_cache, filter, change_queue, fs_monitor, llm_coordinator, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, scheduler, mcp_server
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:05:30,811 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:05:30,811 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:05:30,811 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:05:30,811 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:05:30,847 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:05:30,848 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:05:30,848 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:05:30,848 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:05:30,848 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:05:30,848 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:05:30,848 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:05:30,848 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:05:30,848 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:05:30,848 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:05:30,848 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:05:30,848 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:05:30,848 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:05:30,848 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:05:30,848 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:05:30,848 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:05:30,857 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:05:30,859 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:05:30,860 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:05:30,860 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:05:30,860 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:05:30,860 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:05:30,963 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:05:30,963 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:05:30,963 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:05:30,964 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG - Session 139968662115808 acquired from scoped session factory.
2025-04-18 07:05:30,964 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:05:30,965 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:05:30,965 - dbp.database.database - DEBUG - Session 139968662115808 committed.
2025-04-18 07:05:30,965 - dbp.database.database - DEBUG - Session 139968662115808 closed.
2025-04-18 07:05:30,965 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.recommendation_generator] Initialization failed for component 'recommendation_generator': Database component does not expose a valid 'db_manager' attribute.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/recommendation_generator/component.py", line 168, in initialize
    raise TypeError("Database component does not expose a valid 'db_manager' attribute.")
TypeError: Database component does not expose a valid 'db_manager' attribute.


--- SERVER START ATTEMPT AT 2025-04-18 07:06:00 ---

2025-04-18 07:06:03,206 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:06:03,207 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:06:03,207 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:06:03,207 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:06:03,207 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:06:03,208 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:06:03,208 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:06:03,208 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:06:03,208 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:06:03,209 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:06:03,209 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:06:03,209 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:06:03,209 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:06:03,209 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:06:03,209 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:06:03,210 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:06:03,210 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:06:03,210 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:06:03,210 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:06:03,210 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:06:03,210 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:06:03,211 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:06:03,211 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:06:03,213 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:06:03,214 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:06:03,215 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:06:03,215 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:06:03,216 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:06:03,216 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:06:03,217 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:06:03,217 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:06:03,218 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:06:03,218 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:06:03,218 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:06:03,218 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:06:03,218 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:06:03,219 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:06:03,219 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:06:03,241 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:06:03,248 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:06:03,250 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:06:03,250 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:06:03,250 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:06:03,250 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:06:03,250 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:06:03,250 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:06:03,250 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:06:03,250 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:06:03,250 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:06:03,251 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:06:03,251 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:06:03,251 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:06:03,251 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:06:03,251 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:06:03,254 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:06:03,255 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:06:03,255 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:06:03,255 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:06:03,255 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:06:03,255 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:06:03,255 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:06:03,255 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:06:03,255 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:06:03,255 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:06:03,255 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:06:03,255 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:06:03,255 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'fs_monitor', 'config_manager', 'filter', 'consistency_analysis', 'doc_relationships', 'scheduler', 'mcp_server', 'memory_cache', 'llm_coordinator', 'database', 'metadata_extraction', 'change_queue', 'recommendation_generator'}
2025-04-18 07:06:03,255 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:06:03,256 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, change_queue, fs_monitor, scheduler, recommendation_generator, mcp_server
2025-04-18 07:06:03,256 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:06:03,256 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:06:03,256 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:06:03,256 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:06:03,256 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:06:03,256 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:06:03,336 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:06:03,337 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:06:03,337 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:06:03,338 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:06:03,338 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 07:06:03,338 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 07:06:03,338 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 07:06:03,339 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:06:03,339 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:06:03,339 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 07:06:03,339 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 07:06:03,340 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 07:06:03,340 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 07:06:03,607 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 07:06:03,608 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 07:06:03,608 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 07:06:03,608 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 07:06:03,608 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 07:06:03,608 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 07:06:03,608 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 07:06:03,609 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 07:06:03,609 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:06:03,609 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 07:06:03,609 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 07:06:03,609 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:06:03,609 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:06:03,609 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:06:03,609 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 07:06:03,609 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 07:06:03,609 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 07:06:03,609 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 07:06:03,610 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 07:06:03,610 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 07:06:03,610 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 07:06:03,610 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 07:06:03,610 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 07:06:03,610 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 07:06:03,610 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 07:06:03,611 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 07:06:03,611 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 07:06:03,611 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 07:06:03,611 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 07:06:03,611 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 07:06:03,611 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 07:06:03,611 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 07:06:03,611 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 07:06:03,611 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:06:03,611 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:06:03,611 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:06:03,611 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:06:03,611 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:06:03,611 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:06:03,611 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:06:03,611 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:06:03,611 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:06:03,611 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:06:03,611 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:06:03,612 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:06:03,630 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:06:03,632 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:06:03,644 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:06:03,644 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:06:03,645 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:06:03,645 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:06:03,866 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:06:03,866 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:06:03,866 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:06:03,866 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:06:03,866 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:06:03,866 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:06:03,867 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:06:03,867 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:06:03,867 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:06:03,867 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:06:03,867 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:06:03,867 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:06:03,867 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:06:03,867 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:06:03,868 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG - Session 140315068397472 acquired from scoped session factory.
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:06:03,868 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:06:03,869 - dbp.database.database - DEBUG - Session 140315068397472 committed.
2025-04-18 07:06:03,869 - dbp.database.database - DEBUG - Session 140315068397472 closed.
2025-04-18 07:06:03,869 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.scheduler] Initialization failed for component 'scheduler': 'SchedulerConfig' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/scheduler/component.py", line 156, in initialize
    self._change_queue = ChangeDetectionQueue(config=scheduler_config, logger_override=self.logger.getChild("queue"))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/scheduler/queue.py", line 106, in __init__
    self._delay_seconds = float(self.config.get('scheduler.delay_seconds', 10.0))
                                ^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/pydantic/main.py", line 994, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'SchedulerConfig' object has no attribute 'get'


--- SERVER START ATTEMPT AT 2025-04-18 07:13:09 ---

2025-04-18 07:13:11,590 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:13:11,590 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:13:11,591 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:13:11,591 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:13:11,591 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:13:11,591 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:13:11,591 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:13:11,591 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:13:11,592 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:13:11,592 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:13:11,592 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:13:11,593 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:13:11,594 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:13:11,594 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:13:11,594 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:13:11,594 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:13:11,594 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:13:11,594 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:13:11,594 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:13:11,594 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:13:11,594 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:13:11,594 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:13:11,594 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:13:11,594 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:13:11,594 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:13:11,594 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:13:11,594 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:13:11,594 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:13:11,608 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:13:11,611 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:13:11,612 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:13:11,612 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:13:11,612 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:13:11,612 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:13:11,612 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:13:11,612 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:13:11,612 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:13:11,612 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:13:11,612 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:13:11,612 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:13:11,612 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:13:11,612 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:13:11,612 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:13:11,612 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'filter', 'change_queue', 'database', 'doc_relationships', 'scheduler', 'consistency_analysis', 'memory_cache', 'recommendation_generator', 'mcp_server', 'metadata_extraction', 'config_manager', 'llm_coordinator', 'fs_monitor'}
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, llm_coordinator, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-18 07:13:11,662 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:13:11,662 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:13:11,663 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:13:11,663 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:13:11,663 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:13:11,665 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:13:11,666 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:13:11,666 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:13:11,666 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:13:11,666 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 07:13:11,666 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 07:13:11,666 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 07:13:11,666 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:13:11,666 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:13:11,666 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 07:13:11,667 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 07:13:11,667 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 07:13:11,667 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 07:13:11,753 - dbp.fs_monitor.filter - INFO - Found 2 .gitignore files.
2025-04-18 07:13:11,753 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 07:13:11,753 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 07:13:11,754 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 07:13:11,754 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 07:13:11,754 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 40 patterns.
2025-04-18 07:13:11,754 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 07:13:11,755 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 07:13:11,755 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 07:13:11,755 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 07:13:11,755 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 07:13:11,755 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:13:11,755 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:13:11,755 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 07:13:11,755 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 07:13:11,755 - dbp.change_queue - INFO - Setting up event filtering with filter component
2025-04-18 07:13:11,755 - dbp.fs_monitor.queue - INFO - Event filter set to: FilterComponent
2025-04-18 07:13:11,755 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 07:13:11,756 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 07:13:11,756 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:13:11,756 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:13:11,756 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:13:11,756 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:13:11,756 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:13:11,756 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:13:11,756 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:13:11,756 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:13:11,756 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:13:11,756 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:13:11,757 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:13:11,758 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:13:11,769 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:13:11,770 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:13:11,774 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:13:11,774 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:13:11,774 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:13:11,774 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:13:11,929 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:13:11,929 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:13:11,929 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:13:11,930 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:13:11,930 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:13:11,930 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:13:11,931 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG - Session 140342106806592 acquired from scoped session factory.
2025-04-18 07:13:11,931 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:13:11,932 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:13:11,932 - dbp.database.database - DEBUG - Session 140342106806592 committed.
2025-04-18 07:13:11,932 - dbp.database.database - DEBUG - Session 140342106806592 closed.
2025-04-18 07:13:11,932 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.recommendation_generator] Initialization failed for component 'recommendation_generator': Database component does not expose a valid 'db_manager' attribute.
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/recommendation_generator/component.py", line 168, in initialize
    raise TypeError("Database component does not expose a valid 'db_manager' attribute.")
TypeError: Database component does not expose a valid 'db_manager' attribute.


--- SERVER START ATTEMPT AT 2025-04-18 07:16:40 ---

2025-04-18 07:16:41,582 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:16:41,582 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:16:41,583 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:16:41,583 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:16:41,583 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:16:41,583 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:16:41,584 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:16:41,584 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:16:41,584 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:16:41,585 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:16:41,585 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:16:41,585 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:16:41,585 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:16:41,585 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:16:41,585 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:16:41,585 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:16:41,585 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:16:41,586 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:16:41,586 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:16:41,586 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:16:41,586 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:16:41,586 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:16:41,587 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:16:41,587 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:16:41,587 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:16:41,587 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:16:41,587 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:16:41,587 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:16:41,587 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:16:41,587 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:16:41,587 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:16:41,588 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:16:41,588 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:16:41,588 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:16:41,588 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:16:41,588 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:16:41,588 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:16:41,588 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:16:41,597 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:16:41,599 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:16:41,600 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:16:41,600 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:16:41,600 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:16:41,600 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:16:41,600 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:16:41,600 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:16:41,600 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:16:41,600 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:16:41,600 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:16:41,600 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:16:41,600 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:16:41,600 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:16:41,600 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:16:41,600 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:16:41,602 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:16:41,602 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:16:41,602 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:16:41,602 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:16:41,602 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:16:41,603 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:16:41,603 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:16:41,603 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:16:41,603 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'fs_monitor', 'llm_coordinator', 'database', 'recommendation_generator', 'mcp_server', 'memory_cache', 'doc_relationships', 'config_manager', 'change_queue', 'metadata_extraction', 'filter', 'consistency_analysis', 'scheduler'}
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, database, memory_cache, change_queue, fs_monitor, metadata_extraction, doc_relationships, filter, consistency_analysis, recommendation_generator, mcp_server, scheduler
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:16:41,603 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:16:41,603 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:16:41,603 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:16:41,603 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:16:41,645 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:16:41,646 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:16:41,646 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:16:41,646 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:16:41,646 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:16:41,646 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 07:16:41,646 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 07:16:41,646 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:16:41,646 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 07:16:41,646 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 07:16:41,646 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 07:16:41,647 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 07:16:41,647 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 07:16:41,647 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 07:16:41,647 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 07:16:41,647 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 07:16:41,647 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:16:41,647 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:16:41,647 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:16:41,647 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:16:41,647 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:16:41,647 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:16:41,647 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:16:41,647 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:16:41,647 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:16:41,647 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:16:41,647 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:16:41,647 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:16:41,654 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:16:41,654 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:16:41,655 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:16:41,656 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:16:41,656 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:16:41,656 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:16:41,813 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:16:41,813 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:16:41,813 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:16:41,813 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:16:41,814 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:16:41,814 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:16:41,814 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:16:41,814 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:16:41,814 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:16:41,814 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:16:41,815 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:16:41,816 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:16:41,816 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:16:41,817 - dbp.database.database - DEBUG - Session 140571683452832 acquired from scoped session factory.
2025-04-18 07:16:41,817 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:16:41,817 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:16:41,817 - dbp.database.database - DEBUG - Session 140571683452832 committed.
2025-04-18 07:16:41,817 - dbp.database.database - DEBUG - Session 140571683452832 closed.
2025-04-18 07:16:41,817 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.mcp_server] Initialization failed for component 'mcp_server': SystemComponentAdapter.__init__() takes from 2 to 3 positional arguments but 4 were given
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/mcp_server/component.py", line 194, in initialize
    self._adapter = SystemComponentAdapter(system, config, self.logger.getChild("adapter"))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: SystemComponentAdapter.__init__() takes from 2 to 3 positional arguments but 4 were given


--- SERVER START ATTEMPT AT 2025-04-18 07:22:00 ---

2025-04-18 07:22:02,410 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:22:02,410 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:22:02,410 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:22:02,411 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:22:02,411 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:22:02,411 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:22:02,411 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:22:02,411 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:22:02,411 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:22:02,412 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:22:02,412 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:22:02,413 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:22:02,413 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:22:02,413 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:22:02,413 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:22:02,413 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:22:02,413 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:22:02,413 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:22:02,413 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:22:02,413 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:22:02,413 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:22:02,414 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:22:02,414 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:22:02,414 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:22:02,414 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:22:02,414 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:22:02,414 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:22:02,414 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:22:02,414 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:22:02,432 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:22:02,435 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:22:02,436 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:22:02,436 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:22:02,436 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:22:02,436 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:22:02,436 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:22:02,437 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:22:02,437 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:22:02,437 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:22:02,437 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:22:02,437 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:22:02,437 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:22:02,437 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:22:02,437 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:22:02,437 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:22:02,439 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:22:02,439 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:22:02,439 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:22:02,439 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:22:02,439 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:22:02,439 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:22:02,439 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:22:02,439 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:22:02,440 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:22:02,440 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:22:02,440 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:22:02,440 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:22:02,440 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'config_manager', 'metadata_extraction', 'memory_cache', 'doc_relationships', 'recommendation_generator', 'fs_monitor', 'llm_coordinator', 'database', 'mcp_server', 'filter', 'scheduler', 'consistency_analysis', 'change_queue'}
2025-04-18 07:22:02,440 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:22:02,440 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, database, metadata_extraction, memory_cache, doc_relationships, filter, consistency_analysis, recommendation_generator, mcp_server, change_queue, fs_monitor, scheduler
2025-04-18 07:22:02,440 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:22:02,440 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:22:02,440 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:22:02,440 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:22:02,440 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:22:02,440 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:22:02,490 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:22:02,491 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:22:02,491 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:22:02,491 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:22:02,492 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:22:02,492 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 07:22:02,492 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 07:22:02,492 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:22:02,492 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 07:22:02,492 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 07:22:02,493 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 07:22:02,493 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 07:22:02,493 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 07:22:02,493 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:22:02,493 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:22:02,493 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:22:02,493 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:22:02,493 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:22:02,493 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:22:02,493 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:22:02,493 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:22:02,493 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:22:02,493 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:22:02,493 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:22:02,493 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:22:02,507 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:22:02,508 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:22:02,510 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:22:02,510 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:22:02,510 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:22:02,510 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:22:02,661 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:22:02,662 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:22:02,662 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:22:02,662 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:22:02,662 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:22:02,662 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:22:02,662 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:22:02,662 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:22:02,662 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:22:02,662 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:22:02,663 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:22:02,663 - dbp.database.database - DEBUG - Session 140286527330144 acquired from scoped session factory.
2025-04-18 07:22:02,664 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:22:02,664 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:22:02,665 - dbp.database.database - DEBUG - Session 140286527330144 committed.
2025-04-18 07:22:02,665 - dbp.database.database - DEBUG - Session 140286527330144 closed.
2025-04-18 07:22:02,665 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.scheduler] Initialization failed for component 'scheduler': name 'RLock' is not defined
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/scheduler/component.py", line 158, in initialize
    worker_pool = WorkerThreadPool(
                  ^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/scheduler/worker.py", line 281, in __init__
    self._lock = RLock()
                 ^^^^^
NameError: name 'RLock' is not defined
WARNI [dbp.mcp_server] MCP server is not running.


--- SERVER START ATTEMPT AT 2025-04-18 07:29:08 ---

2025-04-18 07:29:10,118 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:29:10,118 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:29:10,119 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:29:10,119 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:29:10,119 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:29:10,120 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:29:10,120 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:29:10,120 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:29:10,120 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:29:10,121 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:29:10,121 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:29:10,122 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:29:10,122 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:29:10,122 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:29:10,123 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:29:10,124 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:29:10,124 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:29:10,124 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:29:10,124 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:29:10,124 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:29:10,124 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:29:10,124 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:29:10,125 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:29:10,125 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:29:10,125 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:29:10,125 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:29:10,125 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:29:10,125 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:29:10,125 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:29:10,137 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:29:10,143 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:29:10,145 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:29:10,146 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:29:10,146 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:29:10,146 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:29:10,146 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:29:10,146 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:29:10,146 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:29:10,146 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:29:10,146 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:29:10,146 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:29:10,147 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:29:10,147 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:29:10,147 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:29:10,147 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:29:10,246 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:29:10,246 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:29:10,246 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:29:10,246 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:29:10,246 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:29:10,246 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'change_queue', 'filter', 'metadata_extraction', 'llm_coordinator', 'doc_relationships', 'config_manager', 'memory_cache', 'mcp_server', 'scheduler', 'database', 'recommendation_generator', 'consistency_analysis', 'fs_monitor'}
2025-04-18 07:29:10,246 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:29:10,247 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, filter, llm_coordinator, database, metadata_extraction, doc_relationships, memory_cache, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-18 07:29:10,247 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:29:10,247 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:29:10,247 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:29:10,247 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:29:10,247 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:29:10,247 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:29:10,250 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:29:10,251 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:29:10,251 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:29:10,251 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:29:10,251 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 07:29:10,251 - dbp.core.lifecycle - DEBUG - Component 'change_queue' class: ChangeQueueComponent
2025-04-18 07:29:10,251 - dbp.core.lifecycle - DEBUG - Component 'change_queue' dependencies: ['config_manager']
2025-04-18 07:29:10,251 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:29:10,251 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:29:10,251 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 07:29:10,251 - dbp.fs_monitor.queue - DEBUG - ChangeDetectionQueue initialized.
2025-04-18 07:29:10,251 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 07:29:10,251 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 07:29:10,252 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 07:29:10,252 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 07:29:10,252 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 07:29:10,252 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:29:10,252 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:29:10,252 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 07:29:10,252 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 07:29:10,252 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 07:29:10,252 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 07:29:10,497 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-18 07:29:10,497 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 07:29:10,497 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 07:29:10,497 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 07:29:10,498 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 07:29:10,498 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.dbp/.gitignore (relative to: /home/jcjorel/cline-best-practices/.dbp)
2025-04-18 07:29:10,498 - dbp.fs_monitor.filter - DEBUG - Added 5 patterns from /home/jcjorel/cline-best-practices/.dbp/.gitignore
2025-04-18 07:29:10,498 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-18 07:29:10,498 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 07:29:10,498 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 07:29:10,498 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:29:10,498 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' class: LLMCoordinatorComponent
2025-04-18 07:29:10,498 - dbp.core.lifecycle - DEBUG - Component 'llm_coordinator' dependencies: ['config_manager']
2025-04-18 07:29:10,498 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:29:10,498 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:29:10,498 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.request_handler - DEBUG - RequestHandler initialized.
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.tool_registry - DEBUG - ToolRegistry initialized.
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.job_manager - DEBUG - JobManager initialized.
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.response_formatter - DEBUG - ResponseFormatter initialized.
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.prompts - DEBUG - LLMPromptManager initialized.
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - DEBUG - {'message': 'CoordinatorLLM initialized', 'model_name': 'nova-lite'}
2025-04-18 07:29:10,499 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator - DEBUG - Registering internal LLM tools...
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 07:29:10,499 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 07:29:10,499 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 07:29:10,499 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:29:10,499 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:29:10,500 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:29:10,500 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:29:10,500 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:29:10,500 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:29:10,500 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:29:10,500 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:29:10,500 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:29:10,500 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:29:10,500 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:29:10,500 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:29:10,514 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:29:10,515 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:29:10,518 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:29:10,518 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:29:10,518 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:29:10,518 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:29:10,731 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:29:10,731 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:29:10,731 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:29:10,731 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:29:10,732 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:29:10,732 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:29:10,732 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:29:10,732 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:29:10,732 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:29:10,732 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:29:10,734 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:29:10,735 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:29:10,735 - dbp.database.database - DEBUG - Session 140476032753472 acquired from scoped session factory.
2025-04-18 07:29:10,735 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:29:10,736 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:29:10,736 - dbp.database.database - DEBUG - Session 140476032753472 committed.
2025-04-18 07:29:10,737 - dbp.database.database - DEBUG - Session 140476032753472 closed.
2025-04-18 07:29:10,737 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.fs_monitor.fs_monitor] Failed to register change listener: 'ChangeDetectionQueue' object has no attribute 'register_listener'
WARNI [dbp.core.lifecycle.scheduler] Failed to register change listener with File System Monitor.
WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError



--- SERVER START ATTEMPT AT 2025-04-18 07:33:20 ---

2025-04-18 07:33:21,790 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 07:33:21,790 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 07:33:21,790 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 07:33:21,790 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 07:33:21,790 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 07:33:21,790 - root - DEBUG - Application logging initialized at level DEBUG with consistent formatting
2025-04-18 07:33:21,790 - dbp.core.lifecycle - DEBUG - Logging initialized at level DEBUG with consistent formatting
2025-04-18 07:33:21,790 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 07:33:21,790 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 07:33:21,791 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Loaded 1 configuration values from environment variables.
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Loaded 6 configuration values from command-line arguments.
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Applying config from environment variables...
2025-04-18 07:33:21,791 - dbp.config.config_manager - WARNING - Couldn't navigate to 'log' in path 'log.level'
2025-04-18 07:33:21,791 - dbp.config.config_manager - DEBUG - Applying config from command-line arguments...
2025-04-18 07:33:21,791 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.host'
2025-04-18 07:33:21,791 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.port'
2025-04-18 07:33:21,791 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-name'
2025-04-18 07:33:21,791 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-description'
2025-04-18 07:33:21,791 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.server-version'
2025-04-18 07:33:21,792 - dbp.config.config_manager - WARNING - Couldn't navigate to 'mcp-server' in path 'mcp-server.auth-enabled'
2025-04-18 07:33:21,792 - dbp.config.config_manager - DEBUG - Configuration validated successfully.
2025-04-18 07:33:21,792 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 07:33:21,792 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 07:33:21,792 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 07:33:21,792 - dbp.core.lifecycle - DEBUG - Registered config_manager component
2025-04-18 07:33:21,792 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 07:33:21,792 - dbp.core.lifecycle - DEBUG - Registered database component
2025-04-18 07:33:21,798 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 07:33:21,800 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 07:33:21,801 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 07:33:21,801 - dbp.core.lifecycle - DEBUG - Registered fs_monitor component
2025-04-18 07:33:21,801 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 07:33:21,801 - dbp.core.lifecycle - DEBUG - Registered filter component
2025-04-18 07:33:21,801 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 07:33:21,801 - dbp.core.lifecycle - DEBUG - Registered change_queue component
2025-04-18 07:33:21,801 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 07:33:21,801 - dbp.core.lifecycle - DEBUG - Registered memory_cache component
2025-04-18 07:33:21,801 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 07:33:21,801 - dbp.core.lifecycle - DEBUG - Registered consistency_analysis component
2025-04-18 07:33:21,801 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-18 07:33:21,801 - dbp.core.lifecycle - DEBUG - Registered doc_relationships component
2025-04-18 07:33:21,801 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 07:33:21,801 - dbp.core.lifecycle - DEBUG - Registered recommendation_generator component
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Registered scheduler component
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Registered metadata_extraction component
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Registered mcp_server component
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Registered handler for signal 2
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Registered handler for signal 15
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Initializing 13 components
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Validating dependencies. Registered components: {'fs_monitor', 'memory_cache', 'filter', 'doc_relationships', 'mcp_server', 'database', 'scheduler', 'llm_coordinator', 'config_manager', 'metadata_extraction', 'recommendation_generator', 'change_queue', 'consistency_analysis'}
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, database, memory_cache, llm_coordinator, metadata_extraction, doc_relationships, change_queue, fs_monitor, scheduler, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Component 'config_manager' class: ConfigManagerComponent
2025-04-18 07:33:21,803 - dbp.core.lifecycle - DEBUG - Component 'config_manager' dependencies: []
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:33:21,803 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:33:21,803 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 07:33:21,835 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 07:33:21,836 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 07:33:21,836 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 07:33:21,836 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 07:33:21,836 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 07:33:21,836 - dbp.core.lifecycle - DEBUG - Component 'filter' class: FilterComponent
2025-04-18 07:33:21,836 - dbp.core.lifecycle - DEBUG - Component 'filter' dependencies: ['config_manager']
2025-04-18 07:33:21,836 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:33:21,836 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:33:21,836 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 07:33:21,836 - dbp.fs_monitor.filter - DEBUG - Adding mandatory ignore patterns.
2025-04-18 07:33:21,836 - dbp.fs_monitor.filter - DEBUG - Adding 8 patterns from configuration.
2025-04-18 07:33:21,836 - dbp.fs_monitor.filter - DEBUG - Scanning for .gitignore files starting from: /home/jcjorel/cline-best-practices
2025-04-18 07:33:21,913 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-18 07:33:21,913 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.gitignore (relative to: /home/jcjorel/cline-best-practices)
2025-04-18 07:33:21,913 - dbp.fs_monitor.filter - DEBUG - Added 30 patterns from /home/jcjorel/cline-best-practices/.gitignore
2025-04-18 07:33:21,914 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/venv/.gitignore (relative to: /home/jcjorel/cline-best-practices/venv)
2025-04-18 07:33:21,914 - dbp.fs_monitor.filter - DEBUG - Added 1 patterns from /home/jcjorel/cline-best-practices/venv/.gitignore
2025-04-18 07:33:21,914 - dbp.fs_monitor.filter - DEBUG - Loading patterns from: /home/jcjorel/cline-best-practices/.dbp/.gitignore (relative to: /home/jcjorel/cline-best-practices/.dbp)
2025-04-18 07:33:21,914 - dbp.fs_monitor.filter - DEBUG - Added 5 patterns from /home/jcjorel/cline-best-practices/.dbp/.gitignore
2025-04-18 07:33:21,914 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-18 07:33:21,914 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 07:33:21,914 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 07:33:21,914 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 07:33:21,914 - dbp.core.lifecycle - DEBUG - Component 'database' class: DatabaseComponent
2025-04-18 07:33:21,914 - dbp.core.lifecycle - DEBUG - Component 'database' dependencies: ['config_manager']
2025-04-18 07:33:21,914 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 07:33:21,914 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 07:33:21,914 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 07:33:21,915 - dbp.database.database - DEBUG - DatabaseManager instantiated.
2025-04-18 07:33:21,915 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 07:33:21,915 - dbp.database.database - DEBUG - Database configuration: {'database.type': 'sqlite', 'database.path': '${general.base_dir}/database.sqlite', 'database.max_connections': 4, 'database.connection_timeout': 5, 'database.use_wal_mode': True, 'database.vacuum_threshold': 20, 'database.echo_sql': False, 'database.connection_string': None}
2025-04-18 07:33:21,915 - dbp.database.database - INFO - Initializing SQLite database at: ${general.base_dir}/database.sqlite
2025-04-18 07:33:21,915 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 07:33:21,915 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/${general.base_dir}/database.sqlite, normalized=${general.base_dir}/database.sqlite
2025-04-18 07:33:21,924 - dbp.database.database - DEBUG - SQLAlchemy engine created for SQLite with pool size 4.
2025-04-18 07:33:21,924 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 07:33:21,926 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 07:33:21,926 - dbp.database.database - DEBUG - Scoped session factory created.
2025-04-18 07:33:21,926 - dbp.database.database - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 07:33:21,926 - dbp.database.database - DEBUG - Importing Alembic modules...
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Alembic modules imported successfully
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Getting ComponentSystem instance...
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Getting config_manager component...
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Config manager retrieved successfully
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Using alembic.ini path: alembic.ini
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Using module-specific Alembic directory: /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Loading Alembic configuration from: alembic.ini
2025-04-18 07:33:22,009 - dbp.config.config_manager - ERROR - Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:33:22,009 - dbp.database.database - WARNING - Failed to get database.url from config_manager: Configuration key 'database.url' not found. 'database' exists but has no attribute 'url'.
2025-04-18 07:33:22,009 - dbp.database.database - DEBUG - Using engine URL: sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG - Setting Alembic script_location to module-specific alembic directory
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG - Alembic configuration:
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG -   Main section: alembic
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG -     here = /home/jcjorel/cline-best-practices
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG -     script_location = /home/jcjorel/cline-best-practices/src/dbp/database/alembic
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG -     file_template = %(year)d%(month).2d%(day).2d_%(hour).2d%(minute).2d%(second).2d_%(slug)s
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG -     prepend_sys_path = .
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG -     version_path_separator = os  # Use os.pathsep. Default configuration used for new projects.
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG -     sqlalchemy.url = sqlite:///${general.base_dir}/database.sqlite
2025-04-18 07:33:22,010 - dbp.database.database - INFO - Running database migrations...
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG - Session 140322858388176 acquired from scoped session factory.
2025-04-18 07:33:22,010 - dbp.database.database - DEBUG - Testing database connection...
2025-04-18 07:33:22,011 - dbp.database.database - DEBUG - Database connection successful
2025-04-18 07:33:22,011 - dbp.database.database - DEBUG - Session 140322858388176 committed.
2025-04-18 07:33:22,011 - dbp.database.database - DEBUG - Session 140322858388176 closed.
2025-04-18 07:33:22,011 - dbp.database.database - INFO - Upgrading database schema to latest version...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.core.lifecycle.doc_relationships] Could not get FileAccessService from metadata_component for RelationshipAnalyzer. Analysis might be limited.
ERROR [dbp.core.lifecycle.doc_relationships.repository] Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.doc_relationships] Failed to load relationships from repository: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: doc_relationships

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 228, in get_all_relationships
    all_orms = session.query(DocRelationshipORM).all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2858, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/component.py", line 189, in _load_relationships
    relationships = self._repository.get_all_relationships()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/doc_relationships/repository.py", line 234, in get_all_relationships
    raise RepositoryError(f"Error getting all relationships: {e}") from e
dbp.doc_relationships.repository.RepositoryError: Error getting all relationships: (sqlite3.OperationalError) no such table: doc_relationships
[SQL: SELECT doc_relationships.id AS doc_relationships_id, doc_relationships.source_document AS doc_relationships_source_document, doc_relationships.target_document AS doc_relationships_target_document, doc_relationships.relationship_type AS doc_relationships_relationship_type, doc_relationships.topic AS doc_relationships_topic, doc_relationships.scope AS doc_relationships_scope, doc_relationships.meta_data AS doc_relationships_meta_data, doc_relationships.created_at AS doc_relationships_created_at, doc_relationships.updated_at AS doc_relationships_updated_at 
FROM doc_relationships]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
ERROR [dbp.core.lifecycle.fs_monitor.fs_monitor] Failed to register change listener: 'ChangeDetectionQueue' object has no attribute 'register_listener'
WARNI [dbp.core.lifecycle.scheduler] Failed to register change listener with File System Monitor.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
