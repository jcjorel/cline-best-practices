

--- SERVER START ATTEMPT AT 2025-04-18 16:04:11 ---

2025-04-18 16:04:12,698 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 16:04:12,698 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 16:04:12,699 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 16:04:12,699 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 16:04:12,699 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 16:04:12,700 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 16:04:12,701 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 16:04:12,701 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 16:04:12,701 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 16:04:12,701 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 16:04:12,702 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 16:04:12,702 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744985052.7023144
2025-04-18 16:04:12,702 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 16:04:12,702 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 16:04:12,703 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 16:04:12,703 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 16:04:12,703 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 16:04:12,703 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 16:04:12,703 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 16:04:12,703 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 16:04:12,703 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 16:04:12,713 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 16:04:12,749 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 16:04:12,749 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 16:04:12,750 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 16:04:12,750 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 16:04:12,750 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 16:04:12,750 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 16:04:12,750 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 16:04:12,750 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Registered llm_coordinator component - Manage query processing
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, memory_cache, file_access, llm_coordinator, metadata_extraction, filter, change_queue, fs_monitor, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 16:04:12,752 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 16:04:12,753 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 16:04:12,753 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 16:04:12,753 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 16:04:12,754 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 16:04:12,755 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 16:04:12,755 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 16:04:12,755 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 16:04:12,755 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 16:04:12,755 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 16:04:12,755 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 16:04:12,756 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 16:04:12,756 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 16:04:12,756 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 16:04:12,756 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 16:04:12,756 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 16:04:12,765 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 16:04:12,776 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 16:04:12,777 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 16:04:12,777 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 16:04:12,777 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 16:04:12,874 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 16:04:12,874 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 16:04:12,874 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 16:04:12,874 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 16:04:12,874 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 16:04:12,875 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 16:04:12,875 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 16:04:12,875 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 16:04:12,875 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 16:04:12,875 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 16:04:12,875 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 16:04:12,875 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00011s] ()
2025-04-18 16:04:12,875 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 16:04:12,875 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 16:04:12,876 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 16:04:12,876 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 16:04:12,876 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00010s] ()
2025-04-18 16:04:12,876 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
2025-04-18 16:04:12,876 - dbp.database.alembic_manager - INFO - No alembic_version table found - this appears to be initial schema creation
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 16:04:12,876 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-18 16:04:12,876 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 16:04:12,877 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
2025-04-18 16:04:12,877 - dbp.database.alembic_manager - INFO - Existing tables before migration: []
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 16:04:12,877 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 16:04:12,877 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 16:04:12,877 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 20250416_180000, Initial schema
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 16:27:05 ---

2025-04-18 16:27:06,310 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 16:27:06,310 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 16:27:06,310 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 16:27:06,311 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 16:27:06,311 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 16:27:06,312 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 16:27:06,312 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 16:27:06,312 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 16:27:06,312 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 16:27:06,312 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 16:27:06,312 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 16:27:06,312 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 16:27:06,313 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 16:27:06,313 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 16:27:06,313 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 16:27:06,313 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 16:27:06,313 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 16:27:06,313 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 16:27:06,313 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 16:27:06,313 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 16:27:06,313 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 16:27:06,313 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 16:27:06,314 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744986426.3148544
2025-04-18 16:27:06,315 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 16:27:06,315 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 16:27:06,315 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 16:27:06,315 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 16:27:06,316 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 16:27:06,316 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 16:27:06,316 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 16:27:06,316 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 16:27:06,317 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 16:27:06,317 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 16:27:06,318 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 16:27:06,318 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 16:27:06,319 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 16:27:06,319 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 16:27:06,319 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 16:27:06,319 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 16:27:06,319 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 16:27:06,320 - dbp.core.lifecycle - ERROR - Failed to register file_access component: No module named '.'
2025-04-18 16:27:06,320 - dbp.core.lifecycle - ERROR - Failed to register database component: No module named '.'
2025-04-18 16:27:06,320 - dbp.core.lifecycle - ERROR - Failed to register fs_monitor component: No module named '.'
2025-04-18 16:27:06,320 - dbp.core.lifecycle - ERROR - Failed to register filter component: No module named '.'
2025-04-18 16:27:06,321 - dbp.core.lifecycle - ERROR - Failed to register change_queue component: No module named '.'
2025-04-18 16:27:06,321 - dbp.core.lifecycle - ERROR - Failed to register memory_cache component: No module named '.'
2025-04-18 16:27:06,321 - dbp.core.lifecycle - ERROR - Failed to register consistency_analysis component: No module named '.'
2025-04-18 16:27:06,321 - dbp.core.lifecycle - ERROR - Failed to register doc_relationships component: No module named '.'
2025-04-18 16:27:06,322 - dbp.core.lifecycle - ERROR - Failed to register recommendation_generator component: No module named '.'
2025-04-18 16:27:06,322 - dbp.core.lifecycle - ERROR - Failed to register scheduler component: No module named '.'
2025-04-18 16:27:06,322 - dbp.core.lifecycle - ERROR - Failed to register metadata_extraction component: No module named '.'
2025-04-18 16:27:06,323 - dbp.core.lifecycle - ERROR - Failed to register llm_coordinator component: No module named '.'
2025-04-18 16:27:06,323 - dbp.core.lifecycle - ERROR - Failed to register mcp_server component: No module named '.'
2025-04-18 16:27:06,323 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 16:27:06,323 - dbp.core.lifecycle - INFO - Initializing 1 components
2025-04-18 16:27:06,323 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 16:27:06,323 - dbp.core.lifecycle - INFO - Component initialization order: config_manager
2025-04-18 16:27:06,323 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 16:27:06,323 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 16:27:06,323 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 16:27:06,323 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 16:27:06,326 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 16:27:06,327 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 16:27:06,327 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 16:27:06,327 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 16:27:06,327 - dbp.core.lifecycle - INFO - All components initialized successfully
2025-04-18 16:27:06,327 - dbp.core.lifecycle - INFO - System startup complete. Application is running.
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - INFO - All components started successfully
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - INFO - Component initialization completed successfully, stopping watchdog
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - CRITICAL - MCP server component not found in registry
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - WARNING - Exit source: Component registry lookup
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - WARNING - Exit reason: MCP server component not found
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-18 16:27:06,327 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 16:55:39 ---

2025-04-18 16:55:41,892 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 16:55:41,893 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 16:55:41,894 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 16:55:41,894 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 16:55:41,894 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 16:55:41,895 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 16:55:41,896 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 16:55:41,896 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 16:55:41,896 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 16:55:41,896 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 16:55:41,896 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 16:55:41,897 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 16:55:41,897 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 16:55:41,897 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 16:55:41,897 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 16:55:41,897 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 16:55:41,897 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 16:55:41,898 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 16:55:41,898 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 16:55:41,898 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 16:55:41,899 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 16:55:41,899 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744988141.8994033
2025-04-18 16:55:41,900 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 16:55:41,900 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 16:55:41,901 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 16:55:41,902 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 16:55:41,902 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 16:55:41,902 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 16:55:41,902 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 16:55:41,902 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 16:55:41,902 - dbp.core.lifecycle - ERROR - Failed to register file_access component: No module named '.'
2025-04-18 16:55:41,902 - dbp.core.lifecycle - ERROR - Failed to register database component: No module named '.'
2025-04-18 16:55:41,902 - dbp.core.lifecycle - ERROR - Failed to register fs_monitor component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register filter component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register change_queue component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register memory_cache component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register consistency_analysis component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register doc_relationships component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register recommendation_generator component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register scheduler component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register metadata_extraction component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register llm_coordinator component: No module named '.'
2025-04-18 16:55:41,903 - dbp.core.lifecycle - ERROR - Failed to register mcp_server component: No module named '.'
2025-04-18 16:55:41,904 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 16:55:41,904 - dbp.core.lifecycle - INFO - Initializing 1 components
2025-04-18 16:55:41,904 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 16:55:41,904 - dbp.core.lifecycle - INFO - Component initialization order: config_manager
2025-04-18 16:55:41,904 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 16:55:41,904 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 16:55:41,904 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 16:55:41,904 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 16:55:41,906 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 16:55:41,907 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 16:55:41,907 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 16:55:41,907 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 16:55:41,907 - dbp.core.lifecycle - INFO - All components initialized successfully
2025-04-18 16:55:41,907 - dbp.core.lifecycle - INFO - System startup complete. Application is running.
2025-04-18 16:55:41,907 - dbp.mcp_server.__main__ - INFO - All components started successfully
2025-04-18 16:55:41,907 - dbp.mcp_server.__main__ - INFO - Component initialization completed successfully, stopping watchdog
2025-04-18 16:55:41,907 - dbp.mcp_server.__main__ - CRITICAL - MCP server component not found in registry
2025-04-18 16:55:41,908 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-18 16:55:41,908 - dbp.mcp_server.__main__ - WARNING - Exit source: Component registry lookup
2025-04-18 16:55:41,908 - dbp.mcp_server.__main__ - WARNING - Exit reason: MCP server component not found
2025-04-18 16:55:41,908 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-18 16:55:41,908 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-18 16:55:41,908 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 17:02:10 ---

2025-04-18 17:02:12,451 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 17:02:12,452 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 17:02:12,453 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 17:02:12,453 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 17:02:12,454 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 17:02:12,454 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 17:02:12,454 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 17:02:12,454 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 17:02:12,454 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 17:02:12,455 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 17:02:12,455 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 17:02:12,455 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 17:02:12,456 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 17:02:12,456 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 17:02:12,457 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 17:02:12,457 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 17:02:12,458 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 17:02:12,458 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 17:02:12,459 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 17:02:12,459 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 17:02:12,460 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 17:02:12,460 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 17:02:12,460 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 17:02:12,461 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 17:02:12,461 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 17:02:12,462 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 17:02:12,462 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 17:02:12,463 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 17:02:12,463 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 17:02:12,463 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 17:02:12,463 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 17:02:12,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 17:02:12,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 17:02:12,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 17:02:12,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 17:02:12,465 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 17:02:12,465 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 17:02:12,466 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 17:02:12,466 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744988532.4665127
2025-04-18 17:02:12,467 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 17:02:12,467 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 17:02:12,468 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 17:02:12,468 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 17:02:12,468 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 17:02:12,468 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 17:02:12,469 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 17:02:12,469 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 17:02:12,469 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 17:02:12,469 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 17:02:12,469 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 17:02:12,470 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 17:02:12,470 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 17:02:12,470 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 17:02:12,470 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 17:02:12,471 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 17:02:12,471 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 17:02:12,471 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-18 17:02:12,471 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:02:12,471 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:02:12,471 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 17:02:12,471 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-18 17:02:12,540 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 17:02:12,543 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 17:02:12,545 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:02:12,545 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:02:12,545 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:02:12,545 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:02:12,546 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 17:02:12,550 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 17:02:12,551 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 17:02:12,551 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, fs_monitor, filter, database, memory_cache, metadata_extraction, scheduler, file_access, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 17:02:12,551 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 17:02:12,551 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:12,551 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:12,551 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 17:02:12,553 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 17:02:12,554 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 17:02:12,554 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 17:02:12,554 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 17:02:12,554 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 17:02:12,555 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:12,555 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:12,555 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 17:02:12,555 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 17:02:12,555 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 17:02:12,556 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 17:02:12,556 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 17:02:12,556 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 17:02:12,556 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 17:02:12,556 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 17:02:12,556 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 17:02:12,557 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 17:02:12,557 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 17:02:12,557 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 17:02:12,557 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 17:02:12,557 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 17:02:12,557 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:12,557 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:12,557 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 17:02:12,557 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 17:02:12,557 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 17:02:12,557 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-18 17:02:12,557 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:12,558 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:12,558 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-18 17:02:12,558 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Using queue from change_queue component
2025-04-18 17:02:12,558 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-18 17:02:12,558 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-18 17:02:12,733 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-18 17:02:12,734 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-18 17:02:12,734 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-18 17:02:12,734 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-18 17:02:12,734 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-18 17:02:12,734 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-18 17:02:12,734 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-18 17:02:12,735 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-18 17:02:12,735 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 17:02:12,735 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 17:02:12,735 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 17:02:12,735 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:12,735 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:12,735 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 17:02:12,872 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-18 17:02:12,872 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-18 17:02:12,872 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 17:02:12,872 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 17:02:12,872 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 17:02:12,873 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:12,873 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:12,873 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 17:02:12,873 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 17:02:12,873 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 17:02:12,873 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 17:02:12,873 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 17:02:12,887 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 17:02:12,891 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 17:02:12,891 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 17:02:12,892 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 17:02:12,892 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 17:02:13,147 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 17:02:13,148 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 17:02:13,148 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 17:02:13,148 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 17:02:13,148 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 17:02:13,149 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 17:02:13,149 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 17:02:13,149 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 17:02:13,149 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 17:02:13,149 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:02:13,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 17:02:13,150 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00020s] ()
2025-04-18 17:02:13,150 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 17:02:13,151 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:02:13,151 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:02:13,152 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 17:02:13,152 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00018s] ()
2025-04-18 17:02:13,152 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-18 17:02:13,152 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-18 17:02:13,153 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-18 17:02:13,153 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 17:02:13,154 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00028s] ()
2025-04-18 17:02:13,154 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 17:02:13,154 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-18 17:02:13,155 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-18 17:02:13,156 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:02:13,156 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 17:02:13,157 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 17:02:13,157 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.mcp_server] MCP server is not running.


--- SERVER START ATTEMPT AT 2025-04-18 17:02:29 ---

2025-04-18 17:02:31,818 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 17:02:31,818 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 17:02:31,819 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 17:02:31,819 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 17:02:31,819 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 17:02:31,819 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 17:02:31,820 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 17:02:31,820 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 17:02:31,821 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 17:02:31,821 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 17:02:31,821 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 17:02:31,821 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 17:02:31,822 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 17:02:31,822 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 17:02:31,823 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 17:02:31,823 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 17:02:31,823 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 17:02:31,824 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 17:02:31,824 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 17:02:31,824 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 17:02:31,825 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 17:02:31,825 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 17:02:31,825 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 17:02:31,826 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 17:02:31,826 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 17:02:31,826 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 17:02:31,827 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 17:02:31,827 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 17:02:31,827 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 17:02:31,827 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 17:02:31,827 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 17:02:31,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 17:02:31,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 17:02:31,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 17:02:31,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 17:02:31,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 17:02:31,829 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 17:02:31,829 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 17:02:31,829 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744988551.8299274
2025-04-18 17:02:31,830 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 17:02:31,831 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 17:02:31,831 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 17:02:31,831 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 17:02:31,832 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 17:02:31,832 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 17:02:31,832 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 17:02:31,832 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 17:02:31,833 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 17:02:31,833 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 17:02:31,833 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 17:02:31,833 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 17:02:31,834 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 17:02:31,834 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-18 17:02:31,915 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 17:02:31,918 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 17:02:31,920 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:02:31,920 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:02:31,920 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:02:31,920 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:02:31,920 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:02:31,920 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:02:31,920 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:02:31,921 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:02:31,921 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:02:31,921 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:02:31,921 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:02:31,921 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:02:31,921 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:02:31,921 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:02:31,925 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:02:31,925 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:02:31,925 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, file_access, filter, database, memory_cache, metadata_extraction, change_queue, llm_coordinator, fs_monitor, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:31,926 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:31,926 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 17:02:31,929 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 17:02:31,930 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 17:02:31,931 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 17:02:31,931 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 17:02:31,931 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-18 17:02:31,931 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:31,931 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:31,931 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-18 17:02:31,932 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-18 17:02:31,932 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-18 17:02:31,932 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 17:02:31,932 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:31,932 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:31,932 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 17:02:32,082 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-18 17:02:32,083 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-18 17:02:32,083 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 17:02:32,083 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 17:02:32,083 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 17:02:32,083 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:02:32,083 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:02:32,083 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 17:02:32,083 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 17:02:32,083 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 17:02:32,083 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 17:02:32,083 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 17:02:32,095 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 17:02:32,097 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 17:02:32,098 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 17:02:32,098 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 17:02:32,098 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 17:02:32,262 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 17:02:32,263 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 17:02:32,264 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 17:02:32,264 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 17:02:32,264 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 17:02:32,264 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 17:02:32,264 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 17:02:32,264 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 17:02:32,265 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 17:02:32,265 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:02:32,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 17:02:32,266 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00023s] ()
2025-04-18 17:02:32,266 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 17:02:32,266 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:02:32,267 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:02:32,267 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 17:02:32,267 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00068s] ()
2025-04-18 17:02:32,268 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-18 17:02:32,268 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-18 17:02:32,269 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-18 17:02:32,269 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00019s] ()
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-18 17:02:32,270 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-18 17:02:32,271 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:02:32,271 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 17:02:32,271 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 17:02:32,271 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 17:05:00 ---

2025-04-18 17:05:01,824 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 17:05:01,825 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 17:05:01,825 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 17:05:01,825 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 17:05:01,825 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 17:05:01,825 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 17:05:01,825 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 17:05:01,825 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 17:05:01,826 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 17:05:01,827 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 17:05:01,827 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 17:05:01,827 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 17:05:01,827 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 17:05:01,828 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744988701.8286119
2025-04-18 17:05:01,829 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 17:05:01,829 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 17:05:01,829 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 17:05:01,829 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 17:05:01,829 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 17:05:01,830 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 17:05:01,830 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 17:05:01,830 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 17:05:01,830 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 17:05:01,830 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 17:05:01,830 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 17:05:01,830 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 17:05:01,831 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:05:01,831 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 17:05:01,832 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-18 17:05:01,877 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 17:05:01,879 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:05:01,880 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:05:01,882 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, memory_cache, file_access, metadata_extraction, llm_coordinator, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, filter, change_queue, fs_monitor, scheduler
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:05:01,883 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:05:01,883 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 17:05:01,885 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 17:05:01,885 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 17:05:01,885 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 17:05:01,885 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 17:05:01,885 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 17:05:01,885 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:05:01,885 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:05:01,885 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 17:05:01,885 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 17:05:01,885 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 17:05:01,885 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 17:05:01,885 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 17:05:01,893 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 17:05:01,895 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 17:05:01,896 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 17:05:01,896 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 17:05:01,896 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 17:05:02,009 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 17:05:02,010 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 17:05:02,010 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 17:05:02,010 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 17:05:02,010 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 17:05:02,010 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 17:05:02,011 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 17:05:02,011 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 17:05:02,011 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 17:05:02,011 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:05:02,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 17:05:02,012 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00025s] ()
2025-04-18 17:05:02,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 17:05:02,012 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:05:02,012 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:05:02,013 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 17:05:02,013 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00014s] ()
2025-04-18 17:05:02,013 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-18 17:05:02,013 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-18 17:05:02,013 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-18 17:05:02,014 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00012s] ()
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-18 17:05:02,014 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-18 17:05:02,014 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:05:02,015 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 17:05:02,015 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 17:05:02,015 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 17:12:53 ---

2025-04-18 17:12:54,625 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 17:12:54,625 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 17:12:54,626 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 17:12:54,626 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 17:12:54,626 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 17:12:54,627 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 17:12:54,627 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 17:12:54,627 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 17:12:54,627 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 17:12:54,627 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 17:12:54,627 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 17:12:54,627 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 17:12:54,628 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 17:12:54,628 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 17:12:54,628 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 17:12:54,628 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 17:12:54,628 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 17:12:54,628 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 17:12:54,628 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 17:12:54,628 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 17:12:54,628 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 17:12:54,628 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 17:12:54,628 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 17:12:54,628 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 17:12:54,628 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 17:12:54,628 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 17:12:54,629 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 17:12:54,629 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 17:12:54,629 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 17:12:54,629 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 17:12:54,629 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744989174.6294937
2025-04-18 17:12:54,630 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 17:12:54,630 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 17:12:54,630 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 17:12:54,631 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 17:12:54,632 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 17:12:54,632 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-18 17:12:54,681 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 17:12:54,682 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 17:12:54,683 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:12:54,683 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:12:54,684 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, file_access, database, metadata_extraction, memory_cache, llm_coordinator, change_queue, fs_monitor, doc_relationships, scheduler, filter, consistency_analysis, recommendation_generator, mcp_server
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:12:54,686 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:12:54,686 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 17:12:54,688 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 17:12:54,689 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 17:12:54,689 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 17:12:54,689 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 17:12:54,689 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-18 17:12:54,689 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:12:54,689 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:12:54,689 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-18 17:12:54,689 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-18 17:12:54,690 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-18 17:12:54,690 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 17:12:54,690 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:12:54,690 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:12:54,690 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 17:12:54,690 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 17:12:54,690 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 17:12:54,690 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 17:12:54,690 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 17:12:54,697 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 17:12:54,698 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 17:12:54,698 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 17:12:54,699 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 17:12:54,699 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 17:12:54,801 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 17:12:54,802 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:12:54,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 17:12:54,803 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00012s] ()
2025-04-18 17:12:54,803 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 17:12:54,803 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:12:54,803 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:12:54,803 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00009s] ()
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-18 17:12:54,804 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00010s] ()
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-18 17:12:54,804 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-18 17:12:54,805 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:12:54,805 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 17:12:54,806 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 17:12:54,806 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 17:13:50 ---

2025-04-18 17:13:51,876 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 17:13:51,876 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 17:13:51,876 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 17:13:51,877 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 17:13:51,877 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 17:13:51,878 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 17:13:51,878 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 17:13:51,878 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 17:13:51,878 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 17:13:51,878 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 17:13:51,878 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 17:13:51,878 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 17:13:51,879 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 17:13:51,879 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 17:13:51,879 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 17:13:51,879 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 17:13:51,879 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 17:13:51,879 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 17:13:51,879 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 17:13:51,879 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 17:13:51,879 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 17:13:51,879 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 17:13:51,879 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 17:13:51,880 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 17:13:51,880 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 17:13:51,880 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 17:13:51,880 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 17:13:51,880 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 17:13:51,880 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 17:13:51,880 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744989231.8805614
2025-04-18 17:13:51,881 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 17:13:51,881 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 17:13:51,881 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 17:13:51,881 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 17:13:51,882 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 17:13:51,882 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 17:13:51,882 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 17:13:51,882 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 17:13:51,883 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 17:13:51,883 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 17:13:51,883 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 17:13:51,884 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 17:13:51,884 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 17:13:51,884 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 17:13:51,884 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 17:13:51,885 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 17:13:51,885 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 17:13:51,885 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-18 17:13:51,885 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:13:51,885 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:13:51,885 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 17:13:51,885 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-18 17:13:51,951 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 17:13:51,953 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 17:13:51,955 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:13:51,955 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:13:51,955 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:13:51,955 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:13:51,956 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:13:51,960 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 17:13:51,961 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 17:13:51,962 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, fs_monitor, llm_coordinator, database, metadata_extraction, scheduler, file_access, doc_relationships, memory_cache, consistency_analysis, recommendation_generator, mcp_server, filter
2025-04-18 17:13:51,962 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 17:13:51,962 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:13:51,962 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:13:51,962 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 17:13:51,964 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 17:13:51,965 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 17:13:51,965 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 17:13:51,966 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 17:13:51,966 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-18 17:13:51,966 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:13:51,966 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:13:51,966 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-18 17:13:51,966 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-18 17:13:51,966 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-18 17:13:51,967 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-18 17:13:51,967 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:13:51,967 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:13:51,967 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-18 17:13:51,967 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Using queue from change_queue component
2025-04-18 17:13:51,967 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-18 17:13:51,967 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-18 17:13:52,100 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-18 17:13:52,100 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-18 17:13:52,101 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-18 17:13:52,101 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-18 17:13:52,101 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-18 17:13:52,101 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-18 17:13:52,101 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-18 17:13:52,102 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-18 17:13:52,102 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 17:13:52,102 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-18 17:13:52,102 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 17:13:52,103 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:13:52,103 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:13:52,103 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 17:13:52,103 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 17:13:52,103 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 17:13:52,104 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 17:13:52,104 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 17:13:52,105 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 17:13:52,105 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 17:13:52,105 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:13:52,105 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:13:52,105 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 17:13:52,105 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 17:13:52,105 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 17:13:52,105 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 17:13:52,105 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 17:13:52,118 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 17:13:52,120 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 17:13:52,121 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 17:13:52,121 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 17:13:52,121 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 17:13:52,277 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 17:13:52,278 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 17:13:52,278 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 17:13:52,278 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 17:13:52,279 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 17:13:52,279 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 17:13:52,279 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 17:13:52,279 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 17:13:52,279 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 17:13:52,279 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:13:52,280 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 17:13:52,280 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00023s] ()
2025-04-18 17:13:52,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 17:13:52,280 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:13:52,281 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:13:52,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 17:13:52,282 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00023s] ()
2025-04-18 17:13:52,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-18 17:13:52,282 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-18 17:13:52,282 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-18 17:13:52,283 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 17:13:52,283 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00024s] ()
2025-04-18 17:13:52,283 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 17:13:52,283 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-18 17:13:52,284 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-18 17:13:52,285 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-18 17:13:52,285 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-18 17:13:52,285 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-18 17:13:52,285 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-18 17:13:52,285 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-18 17:13:52,285 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:13:52,285 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 17:13:52,285 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 17:13:52,285 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 17:21:27 ---

2025-04-18 17:21:28,334 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 17:21:28,334 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 17:21:28,334 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 17:21:28,335 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 17:21:28,335 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 17:21:28,336 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 17:21:28,337 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 17:21:28,337 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 17:21:28,337 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 17:21:28,337 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 17:21:28,337 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 17:21:28,338 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 17:21:28,338 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744989688.3382614
2025-04-18 17:21:28,338 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 17:21:28,339 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 17:21:28,339 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 17:21:28,339 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 17:21:28,339 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 17:21:28,339 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 17:21:28,340 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 17:21:28,340 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 17:21:28,340 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 17:21:28,340 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 17:21:28,340 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 17:21:28,340 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 17:21:28,341 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:21:28,341 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 17:21:28,342 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-18 17:21:28,384 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 17:21:28,385 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:21:28,386 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:21:28,388 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:21:28,388 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:21:28,388 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:21:28,388 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:21:28,388 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, file_access, database, memory_cache, change_queue, llm_coordinator, filter, fs_monitor, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, scheduler, mcp_server
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:21:28,389 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:21:28,389 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 17:21:28,391 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 17:21:28,392 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 17:21:28,392 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 17:21:28,392 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 17:21:28,392 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-18 17:21:28,393 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:21:28,393 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:21:28,393 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-18 17:21:28,393 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-18 17:21:28,393 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-18 17:21:28,393 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 17:21:28,393 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:21:28,393 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:21:28,393 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 17:21:28,393 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 17:21:28,393 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 17:21:28,393 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 17:21:28,393 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 17:21:28,400 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 17:21:28,401 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 17:21:28,401 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 17:21:28,401 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 17:21:28,401 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 17:21:28,496 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 17:21:28,496 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 17:21:28,497 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:21:28,497 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 17:21:28,497 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00011s] ()
2025-04-18 17:21:28,497 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 17:21:28,498 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:21:28,498 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:21:28,498 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 17:21:28,498 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-18 17:21:28,498 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-18 17:21:28,498 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-18 17:21:28,498 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-18 17:21:28,499 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00012s] ()
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-18 17:21:28,499 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-18 17:21:28,499 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:21:28,500 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 17:21:28,500 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 17:21:28,500 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-18 17:30:00 ---

2025-04-18 17:30:02,129 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-18 17:30:02,130 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-18 17:30:02,130 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-18 17:30:02,130 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-18 17:30:02,130 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-18 17:30:02,130 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-18 17:30:02,131 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-18 17:30:02,132 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-18 17:30:02,133 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-18 17:30:02,133 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-18 17:30:02,133 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-18 17:30:02,133 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-18 17:30:02,134 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-18 17:30:02,134 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1744990202.1344028
2025-04-18 17:30:02,134 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-18 17:30:02,135 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-18 17:30:02,135 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-18 17:30:02,135 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-18 17:30:02,135 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-18 17:30:02,136 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-18 17:30:02,136 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-18 17:30:02,136 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-18 17:30:02,136 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-18 17:30:02,136 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-18 17:30:02,136 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-18 17:30:02,136 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-18 17:30:02,137 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Registering components...
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-18 17:30:02,137 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-18 17:30:02,193 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-18 17:30:02,195 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:30:02,197 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-18 17:30:02,198 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:30:02,198 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-18 17:30:02,198 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:30:02,198 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, file_access, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, change_queue, fs_monitor, scheduler
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-18 17:30:02,201 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:30:02,202 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:30:02,202 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-18 17:30:02,203 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-18 17:30:02,204 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-18 17:30:02,204 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-18 17:30:02,204 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-18 17:30:02,204 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-18 17:30:02,204 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:30:02,205 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:30:02,205 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-18 17:30:02,358 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-18 17:30:02,359 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-18 17:30:02,360 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-18 17:30:02,360 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-18 17:30:02,360 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-18 17:30:02,360 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:30:02,360 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:30:02,360 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-18 17:30:02,361 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-18 17:30:02,361 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:30:02,361 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-18 17:30:02,361 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-18 17:30:02,361 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-18 17:30:02,362 - dbp.database - INFO - Initializing component 'database'...
2025-04-18 17:30:02,362 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-18 17:30:02,362 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-18 17:30:02,362 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-18 17:30:02,362 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-18 17:30:02,370 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-18 17:30:02,372 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-18 17:30:02,373 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-18 17:30:02,373 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-18 17:30:02,373 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-18 17:30:02,515 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-18 17:30:02,516 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:30:02,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-18 17:30:02,517 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00016s] ()
2025-04-18 17:30:02,517 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-18 17:30:02,517 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:30:02,517 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-18 17:30:02,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-18 17:30:02,518 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00016s] ()
2025-04-18 17:30:02,518 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-18 17:30:02,519 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-18 17:30:02,519 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-18 17:30:02,519 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-18 17:30:02,520 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00030s] ()
2025-04-18 17:30:02,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-18 17:30:02,520 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-18 17:30:02,521 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-18 17:30:02,521 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-18 17:30:02,521 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-18 17:30:02,521 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-18 17:30:02,521 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-18 17:30:02,521 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-18 17:30:02,522 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-18 17:30:02,523 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-18 17:30:02,523 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-18 17:30:02,523 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-18 17:30:02,523 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-18 17:30:02,523 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-18 17:30:02,523 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-18 17:30:02,524 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-19 22:49:10 ---

2025-04-19 22:49:10,922 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-19 22:49:10,923 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-19 22:49:10,923 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-19 22:49:10,923 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-19 22:49:10,923 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-19 22:49:10,923 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-19 22:49:10,923 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-19 22:49:10,924 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-19 22:49:10,925 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-19 22:49:10,925 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-19 22:49:10,925 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-19 22:49:10,925 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-19 22:49:10,925 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-19 22:49:10,925 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745095750.9259665
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-19 22:49:10,926 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-19 22:49:10,926 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-19 22:49:10,926 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Component registry available for dependency resolution
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Registering components...
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-19 22:49:10,930 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-19 22:49:10,957 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-19 22:49:10,959 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-19 22:49:10,960 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Using registry for dependency-based initialization order
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - Component initialization order: 
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - All components initialized successfully
2025-04-19 22:49:10,964 - dbp.core.lifecycle - INFO - System startup complete. Application is running.
2025-04-19 22:49:10,964 - dbp.mcp_server.__main__ - INFO - All components started successfully
2025-04-19 22:49:10,964 - dbp.mcp_server.__main__ - INFO - Component initialization completed successfully, stopping watchdog
2025-04-19 22:49:10,964 - dbp.mcp_server.__main__ - CRITICAL - MCP server component was not properly initialized
2025-04-19 22:49:10,965 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-19 22:49:10,965 - dbp.mcp_server.__main__ - WARNING - Exit source: Component initialization check
2025-04-19 22:49:10,965 - dbp.mcp_server.__main__ - WARNING - Exit reason: MCP server component not initialized
2025-04-19 22:49:10,965 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-19 22:49:10,965 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-19 22:49:10,965 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-19 22:49:40 ---

2025-04-19 22:49:41,113 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-19 22:49:41,113 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-19 22:49:41,113 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-19 22:49:41,113 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-19 22:49:41,113 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-19 22:49:41,113 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-19 22:49:41,113 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-19 22:49:41,114 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-19 22:49:41,115 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-19 22:49:41,115 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-19 22:49:41,115 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-19 22:49:41,115 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-19 22:49:41,115 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-19 22:49:41,115 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745095781.1159236
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-19 22:49:41,116 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-19 22:49:41,116 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-19 22:49:41,116 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-19 22:49:41,116 - dbp.core.lifecycle - INFO - Registering components...
2025-04-19 22:49:41,116 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-19 22:49:41,116 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-19 22:49:41,116 - dbp.core.lifecycle - INFO - Registered component: 'config_manager' with dependencies: []
2025-04-19 22:49:41,116 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: ['config_manager']
2025-04-19 22:49:41,116 - dbp.core.lifecycle - INFO - Registered component: 'file_access' with dependencies: ['config_manager']
2025-04-19 22:49:41,117 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-19 22:49:41,117 - dbp.core.lifecycle - INFO - Registered component: 'database' with dependencies: ['config_manager']
2025-04-19 22:49:41,143 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-19 22:49:41,144 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registered component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registered component: 'filter' with dependencies: ['config_manager']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registered component: 'change_queue' with dependencies: ['config_manager']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registered component: 'memory_cache' with dependencies: ['database']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registered component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registered component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-19 22:49:41,145 - dbp.core.lifecycle - INFO - Registered component: 'recommendation_generator' with dependencies: ['database', 'consistency_analysis', 'llm_coordinator']
2025-04-19 22:49:41,146 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-19 22:49:41,146 - dbp.core.lifecycle - INFO - Registered component: 'scheduler' with dependencies: ['fs_monitor', 'metadata_extraction']
2025-04-19 22:49:41,146 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-19 22:49:41,146 - dbp.core.lifecycle - INFO - Registered component: 'metadata_extraction' with dependencies: ['database']
2025-04-19 22:49:41,146 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Registered component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Registered component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator', 'doc_relationships', 'llm_coordinator', 'metadata_extraction', 'memory_cache', 'config_manager']
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, file_access, llm_coordinator, database, metadata_extraction, doc_relationships, consistency_analysis, memory_cache, filter, recommendation_generator, change_queue, mcp_server, fs_monitor, scheduler
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-19 22:49:41,147 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-19 22:49:41,147 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-19 22:49:41,148 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-19 22:49:41,148 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-19 22:49:41,148 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-19 22:49:41,148 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-19 22:49:41,148 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-19 22:49:41,148 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-19 22:49:41,148 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-19 22:49:41,148 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-19 22:49:41,149 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-19 22:49:41,149 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-19 22:49:41,149 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-19 22:49:41,149 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-19 22:49:41,149 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-19 22:49:41,149 - dbp.database - INFO - Initializing component 'database'...
2025-04-19 22:49:41,149 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-19 22:49:41,149 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-19 22:49:41,149 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-19 22:49:41,149 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-19 22:49:41,165 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-19 22:49:41,167 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-19 22:49:41,167 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-19 22:49:41,167 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-19 22:49:41,167 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-19 22:49:41,253 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-19 22:49:41,254 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-19 22:49:41,255 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-19 22:49:41,255 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-19 22:49:41,255 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-19 22:49:41,255 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-19 22:49:41,255 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 01:39:32 ---

2025-04-20 01:39:32,894 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 01:39:32,894 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 01:39:32,895 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 01:39:32,895 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 01:39:32,895 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 01:39:32,896 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 01:39:32,896 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 01:39:32,896 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 01:39:32,896 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 01:39:32,896 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 01:39:32,896 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745105972.8974192
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 01:39:32,897 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 01:39:32,898 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 01:39:32,898 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 01:39:32,898 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 01:39:32,898 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 01:39:32,898 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 01:39:32,898 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 01:39:32,898 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 01:39:32,898 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 01:39:32,925 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 01:39:32,926 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database']
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:39:32,928 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 01:39:32,931 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, database, metadata_extraction, memory_cache, llm_coordinator, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, change_queue, filter
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:39:32,931 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 01:39:32,931 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:39:32,931 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:39:32,931 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 01:39:32,932 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 01:39:32,932 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 01:39:32,933 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 01:39:32,933 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 01:39:32,933 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 01:39:32,933 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:39:32,933 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:39:32,933 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 01:39:32,933 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 01:39:32,933 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 01:39:32,933 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 01:39:32,933 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 01:39:32,933 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 01:39:32,937 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 01:39:32,938 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 01:39:32,938 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 01:39:32,938 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 01:39:32,938 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 01:39:32,992 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 01:39:32,992 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 01:39:32,992 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00005s] ()
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00005s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 01:39:32,993 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00004s] ()
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00004s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 01:39:32,993 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 01:39:32,994 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 01:39:32,994 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 01:39:32,994 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 01:39:32,994 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.memory_cache] Initialization failed: Missing dependency component '"Required dependency 'config_manager' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 01:52:39 ---

2025-04-20 01:52:40,178 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 01:52:40,178 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 01:52:40,178 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 01:52:40,179 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 01:52:40,179 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 01:52:40,180 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 01:52:40,181 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 01:52:40,181 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 01:52:40,181 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 01:52:40,181 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 01:52:40,182 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 01:52:40,182 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745106760.1821165
2025-04-20 01:52:40,182 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 01:52:40,182 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 01:52:40,182 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 01:52:40,183 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 01:52:40,183 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 01:52:40,183 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 01:52:40,183 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 01:52:40,183 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 01:52:40,183 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 01:52:40,183 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 01:52:40,184 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 01:52:40,184 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 01:52:40,184 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 01:52:40,184 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 01:52:40,184 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 01:52:40,184 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 01:52:40,184 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 01:52:40,184 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 01:52:40,184 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 01:52:40,235 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 01:52:40,238 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database']
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:52:40,244 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 01:52:40,247 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, database, memory_cache, metadata_extraction, fs_monitor, change_queue, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, llm_coordinator, scheduler, filter
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:52:40,247 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 01:52:40,247 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:52:40,247 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:52:40,247 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 01:52:40,250 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 01:52:40,250 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 01:52:40,251 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 01:52:40,251 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 01:52:40,251 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 01:52:40,251 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:52:40,251 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:52:40,251 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 01:52:40,251 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 01:52:40,251 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 01:52:40,251 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 01:52:40,251 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 01:52:40,251 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 01:52:40,263 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 01:52:40,264 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 01:52:40,264 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 01:52:40,264 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 01:52:40,264 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 01:52:40,371 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 01:52:40,371 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 01:52:40,371 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 01:52:40,371 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 01:52:40,371 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 01:52:40,372 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 01:52:40,372 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 01:52:40,372 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 01:52:40,372 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 01:52:40,372 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 01:52:40,372 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 01:52:40,372 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00009s] ()
2025-04-20 01:52:40,372 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 01:52:40,372 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 01:52:40,372 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 01:52:40,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 01:52:40,373 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00009s] ()
2025-04-20 01:52:40,373 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 01:52:40,373 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 01:52:40,373 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 01:52:40,373 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 01:52:40,373 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00010s] ()
2025-04-20 01:52:40,373 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 01:52:40,374 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 01:52:40,374 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 01:52:40,374 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 01:52:40,374 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.memory_cache] Initialization failed: Missing dependency component '"Required dependency 'config_manager' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 01:55:26 ---

2025-04-20 01:55:27,111 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 01:55:27,112 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 01:55:27,112 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 01:55:27,112 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 01:55:27,113 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 01:55:27,113 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 01:55:27,113 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 01:55:27,113 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 01:55:27,113 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745106927.1144354
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 01:55:27,114 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 01:55:27,115 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 01:55:27,115 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 01:55:27,115 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 01:55:27,115 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 01:55:27,115 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 01:55:27,115 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 01:55:27,115 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 01:55:27,115 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 01:55:27,115 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 01:55:27,115 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 01:55:27,115 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 01:55:27,145 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 01:55:27,146 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 01:55:27,146 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:55:27,146 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 01:55:27,146 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:55:27,147 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 01:55:27,147 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:55:27,147 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:55:27,147 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:55:27,147 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 01:55:27,148 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:55:27,148 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, fs_monitor, scheduler, llm_coordinator, database, memory_cache, filter, change_queue, doc_relationships, metadata_extraction, consistency_analysis, recommendation_generator, mcp_server
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:55:27,149 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 01:55:27,149 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:55:27,149 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:55:27,149 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 01:55:27,150 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 01:55:27,150 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 01:55:27,150 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 01:55:27,150 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 01:55:27,150 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 01:55:27,150 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:55:27,150 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:55:27,151 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'fs_monitor'
2025-04-20 01:55:27,151 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 01:55:27,151 - dbp.core.lifecycle.fs_monitor.fs_monitor - ERROR - Failed to initialize FileSystemMonitorComponent: "Required dependency 'change_queue' not found in provided dependencies"
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 161, in initialize
    queue_component = self.get_dependency(dependencies, "change_queue")
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/core/component.py", line 235, in get_dependency
    raise KeyError(f"Required dependency '{name}' not found in provided dependencies")
KeyError: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:55:27,151 - dbp.core.lifecycle - ERROR - Failed to initialize component 'fs_monitor': Failed to initialize fs_monitor: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:55:27,151 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-20 01:55:27,151 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 161, in initialize
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -       queue_component = self.get_dependency(dependencies, "change_queue")
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/component.py", line 235, in get_dependency
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -       raise KeyError(f"Required dependency '{name}' not found in provided dependencies")
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -   KeyError: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 316, in initialize_all
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 203, in initialize
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize {self.name}: {e}") from e
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize fs_monitor: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' debug info: {'class_name': 'FileSystemMonitorComponent', 'module': 'dbp.fs_monitor.component', 'initialized': False, 'has_logger': True}
2025-04-20 01:55:27,152 - dbp.core.lifecycle - WARNING - Rolling back initialization of 2 components
2025-04-20 01:55:27,152 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 01:55:27,152 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 01:55:27,152 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 01:55:27,152 - dbp.core.lifecycle - INFO - Rolling back component 'file_access'...
2025-04-20 01:55:27,152 - dbp.core.lifecycle.file_access.file_access - INFO - Shutting down component 'file_access'...
2025-04-20 01:55:27,152 - dbp.core.lifecycle.file_access.file_access - INFO - File access service cache cleared
2025-04-20 01:55:27,152 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' shut down
2025-04-20 01:55:27,152 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 01:55:27,152 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 01:57:51 ---

2025-04-20 01:57:51,775 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 01:57:51,776 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 01:57:51,776 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 01:57:51,776 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 01:57:51,777 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 01:57:51,777 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 01:57:51,777 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745107071.7785532
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 01:57:51,778 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 01:57:51,779 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 01:57:51,779 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 01:57:51,779 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 01:57:51,779 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 01:57:51,779 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 01:57:51,779 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 01:57:51,779 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 01:57:51,779 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 01:57:51,822 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 01:57:51,823 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:57:51,824 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:57:51,825 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 01:57:51,826 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, memory_cache, doc_relationships, scheduler, fs_monitor, change_queue, llm_coordinator, filter, file_access, metadata_extraction, consistency_analysis, recommendation_generator, mcp_server
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:57:51,826 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:57:51,826 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 01:57:51,828 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 01:57:51,828 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 01:57:51,828 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 01:57:51,828 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 01:57:51,828 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 01:57:51,828 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:57:51,828 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:57:51,828 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 01:57:51,828 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 01:57:51,828 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 01:57:51,828 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 01:57:51,828 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 01:57:51,828 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 01:57:51,834 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 01:57:51,835 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 01:57:51,836 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 01:57:51,836 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 01:57:51,836 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 01:57:51,905 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 01:57:51,905 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 01:57:51,905 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 01:57:51,905 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 01:57:51,905 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 01:57:51,906 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 01:57:51,906 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 01:57:51,906 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 01:57:51,906 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 01:57:51,906 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 01:57:51,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 01:57:51,906 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 01:57:51,906 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 01:57:51,906 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 01:57:51,906 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 01:57:51,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 01:57:51,907 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00009s] ()
2025-04-20 01:57:51,907 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 01:57:51,907 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 01:57:51,907 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 01:57:51,907 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 01:57:51,907 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00010s] ()
2025-04-20 01:57:51,907 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 01:57:51,907 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 01:57:51,908 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 01:57:51,908 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 01:57:51,908 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 01:57:51,908 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.doc_relationships] Initialization failed: Missing dependency component '"Required dependency 'metadata_extraction' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 01:58:50 ---

2025-04-20 01:58:51,369 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 01:58:51,370 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 01:58:51,370 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 01:58:51,370 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 01:58:51,371 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 01:58:51,371 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 01:58:51,371 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745107131.3721418
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 01:58:51,372 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 01:58:51,372 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 01:58:51,372 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 01:58:51,372 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 01:58:51,372 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 01:58:51,372 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 01:58:51,372 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 01:58:51,372 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 01:58:51,397 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 01:58:51,398 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:58:51,399 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 01:58:51,401 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['fs_monitor']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, llm_coordinator, fs_monitor, change_queue, scheduler, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, filter
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:58:51,401 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 01:58:51,401 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:58:51,401 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:58:51,401 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 01:58:51,402 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 01:58:51,403 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 01:58:51,403 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 01:58:51,403 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 01:58:51,403 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 01:58:51,403 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'fs_monitor'
2025-04-20 01:58:51,403 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 01:58:51,403 - dbp.core.lifecycle.fs_monitor.fs_monitor - ERROR - Failed to initialize FileSystemMonitorComponent: "Required dependency 'change_queue' not found in provided dependencies"
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 161, in initialize
    queue_component = self.get_dependency(dependencies, "change_queue")
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/core/component.py", line 235, in get_dependency
    raise KeyError(f"Required dependency '{name}' not found in provided dependencies")
KeyError: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:58:51,403 - dbp.core.lifecycle - ERROR - Failed to initialize component 'fs_monitor': Failed to initialize fs_monitor: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 161, in initialize
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -       queue_component = self.get_dependency(dependencies, "change_queue")
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/component.py", line 235, in get_dependency
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -       raise KeyError(f"Required dependency '{name}' not found in provided dependencies")
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -   KeyError: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 316, in initialize_all
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/fs_monitor/component.py", line 203, in initialize
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize {self.name}: {e}") from e
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize fs_monitor: "Required dependency 'change_queue' not found in provided dependencies"
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR - Component 'fs_monitor' debug info: {'class_name': 'FileSystemMonitorComponent', 'module': 'dbp.fs_monitor.component', 'initialized': False, 'has_logger': True}
2025-04-20 01:58:51,404 - dbp.core.lifecycle - WARNING - Rolling back initialization of 3 components
2025-04-20 01:58:51,404 - dbp.core.lifecycle - INFO - Rolling back component 'llm_coordinator'...
2025-04-20 01:58:51,404 - dbp.core.lifecycle.llm_coordinator - INFO - Shutting down component 'llm_coordinator'...
2025-04-20 01:58:51,404 - dbp.core.lifecycle.llm_coordinator.job_manager - INFO - JobManager shutdown initiated. No new jobs will be scheduled.
2025-04-20 01:58:51,404 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Shutting down CoordinatorLLM', 'model_name': 'nova-lite'}
2025-04-20 01:58:51,404 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'CoordinatorLLM shutdown completed'}
2025-04-20 01:58:51,404 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' shut down.
2025-04-20 01:58:51,404 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 01:58:51,404 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 01:58:51,404 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 01:58:51,404 - dbp.core.lifecycle - INFO - Rolling back component 'file_access'...
2025-04-20 01:58:51,404 - dbp.core.lifecycle.file_access.file_access - INFO - Shutting down component 'file_access'...
2025-04-20 01:58:51,404 - dbp.core.lifecycle.file_access.file_access - INFO - File access service cache cleared
2025-04-20 01:58:51,404 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' shut down
2025-04-20 01:58:51,404 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 01:58:51,404 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 03:02:00 ---

2025-04-20 03:02:02,299 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:02:02,299 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:02:02,300 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:02:02,300 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:02:02,300 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:02:02,301 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:02:02,301 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:02:02,301 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:02:02,301 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:02:02,301 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:02:02,301 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:02:02,302 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:02:02,302 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:02:02,302 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:02:02,302 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:02:02,302 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:02:02,302 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:02:02,302 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:02:02,303 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:02:02,303 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:02:02,304 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:02:02,304 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745110922.3044233
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:02:02,305 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:02:02,306 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:02:02,306 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:02:02,306 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:02:02,306 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:02:02,306 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:02:02,306 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:02:02,306 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:02:02,306 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:02:02,306 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:02:02,306 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:02:02,372 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:02:02,374 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:02:02,375 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:02:02,376 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:02:02,376 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:02:02,376 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:02:02,376 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:02:02,376 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database']
2025-04-20 03:02:02,376 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:02:02,376 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:02:02,378 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:02:02,378 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:02:02,378 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:02:02,379 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, database, memory_cache, change_queue, fs_monitor, doc_relationships, llm_coordinator, metadata_extraction, consistency_analysis, recommendation_generator, mcp_server, filter, scheduler
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:02:02,379 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:02:02,379 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:02:02,379 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:02:02,379 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:02:02,381 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:02:02,382 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:02:02,382 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:02:02,382 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:02:02,382 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:02:02,382 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:02:02,382 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:02:02,382 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:02:02,382 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:02:02,382 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:02:02,382 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:02:02,382 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:02:02,382 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:02:02,397 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:02:02,400 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:02:02,400 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:02:02,400 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:02:02,400 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:02:02,584 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:02:02,586 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:02:02,586 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:02:02,587 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:02:02,587 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:02:02,588 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:02:02,588 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:02:02,588 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:02:02,588 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:02:02,588 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:02:02,589 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:02:02,589 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00037s] ()
2025-04-20 03:02:02,589 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:02:02,590 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:02:02,591 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:02:02,591 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:02:02,592 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00032s] ()
2025-04-20 03:02:02,592 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:02:02,592 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:02:02,593 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:02:02,593 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:02:02,594 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00035s] ()
2025-04-20 03:02:02,594 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:02:02,594 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:02:02,594 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:02:02,595 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:02:02,595 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:02:02,595 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:02:02,596 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:02:02,596 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:02:02,596 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:02:02,596 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:02:02,597 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:02:02,598 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:02:02,598 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:02:02,598 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:02:02,598 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:02:02,599 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.doc_relationships] Initialization failed: Missing dependency component '"Required dependency 'metadata_extraction' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 03:04:46 ---

2025-04-20 03:04:47,211 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:04:47,211 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:04:47,211 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:04:47,211 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:04:47,211 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:04:47,211 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:04:47,212 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:04:47,213 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:04:47,213 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:04:47,213 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:04:47,213 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:04:47,213 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:04:47,213 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745111087.2138586
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:04:47,214 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:04:47,215 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:04:47,215 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:04:47,215 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:04:47,215 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:04:47,215 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:04:47,215 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:04:47,215 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:04:47,215 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:04:47,242 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:04:47,243 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:04:47,244 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:04:47,246 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, filter, scheduler, database, memory_cache, fs_monitor, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, file_access
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:04:47,246 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:04:47,246 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:04:47,247 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:04:47,247 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:04:47,247 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:04:47,247 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:04:47,247 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:04:47,247 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:04:47,248 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:04:47,248 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 03:04:47,248 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 03:04:47,248 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR - Failed to initialize component 'filter': FilterComponent.initialize() takes 2 positional arguments but 3 were given
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR - Exception type: TypeError
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 316, in initialize_all
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR -   TypeError: FilterComponent.initialize() takes 2 positional arguments but 3 were given
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR - Component 'filter' debug info: {'class_name': 'FilterComponent', 'module': 'dbp.fs_monitor.filter', 'initialized': False, 'has_logger': False, 'attr_project_root': None}
2025-04-20 03:04:47,248 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-20 03:04:47,248 - dbp.core.lifecycle - WARNING - Rolling back initialization of 3 components
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-20 03:04:47,248 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-20 03:04:47,248 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-20 03:04:47,248 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-20 03:04:47,248 - dbp.core.lifecycle - INFO - Rolling back component 'llm_coordinator'...
2025-04-20 03:04:47,249 - dbp.core.lifecycle.llm_coordinator - INFO - Shutting down component 'llm_coordinator'...
2025-04-20 03:04:47,249 - dbp.core.lifecycle.llm_coordinator.job_manager - INFO - JobManager shutdown initiated. No new jobs will be scheduled.
2025-04-20 03:04:47,249 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Shutting down CoordinatorLLM', 'model_name': 'nova-lite'}
2025-04-20 03:04:47,249 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'CoordinatorLLM shutdown completed'}
2025-04-20 03:04:47,249 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' shut down.
2025-04-20 03:04:47,249 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 03:04:47,249 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 03:04:47,249 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 03:04:47,249 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 03:04:47,249 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 03:04:47,249 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'
2025-04-20 03:04:47,250 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 03:04:47,250 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 03:04:47,250 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 03:04:47,250 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 03:04:47,250 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 03:04:47,250 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 03:08:45 ---

2025-04-20 03:08:46,175 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:08:46,175 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:08:46,175 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:08:46,176 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:08:46,176 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:08:46,177 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:08:46,177 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:08:46,177 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745111326.1784568
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:08:46,178 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:08:46,179 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:08:46,179 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:08:46,179 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:08:46,179 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:08:46,179 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:08:46,179 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:08:46,179 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:08:46,179 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:08:46,212 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:08:46,213 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:08:46,213 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:08:46,215 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, change_queue, llm_coordinator, database, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, memory_cache, filter, fs_monitor, scheduler
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:08:46,215 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:08:46,215 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:08:46,215 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:08:46,216 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:08:46,217 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:08:46,217 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:08:46,217 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 03:08:46,217 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 03:08:46,217 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:08:46,217 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:08:46,217 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:08:46,217 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:08:46,217 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:08:46,218 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:08:46,218 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:08:46,218 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:08:46,218 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:08:46,222 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:08:46,223 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:08:46,223 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:08:46,223 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:08:46,223 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:08:46,281 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:08:46,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00005s] ()
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00005s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:08:46,282 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00004s] ()
2025-04-20 03:08:46,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00004s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:08:46,283 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:08:46,283 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:08:46,283 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:08:46,283 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.doc_relationships] Initialization failed: Missing dependency component '"Required dependency 'file_access' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 03:11:06 ---

2025-04-20 03:11:06,682 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:11:06,683 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:11:06,683 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:11:06,683 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:11:06,684 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:11:06,684 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:11:06,684 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:11:06,684 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:11:06,684 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745111466.685555
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:11:06,685 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:11:06,686 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:11:06,686 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:11:06,686 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:11:06,686 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:11:06,686 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:11:06,686 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:11:06,686 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:11:06,686 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:11:06,686 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:11:06,686 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:11:06,686 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:11:06,686 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:11:06,686 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:11:06,686 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:11:06,713 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:11:06,714 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:11:06,714 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:11:06,715 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:11:06,715 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:11:06,715 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:11:06,715 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:11:06,715 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:11:06,715 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:11:06,715 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:11:06,716 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:11:06,716 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:11:06,716 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:11:06,716 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:11:06,716 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, llm_coordinator, filter, database, metadata_extraction, doc_relationships, consistency_analysis, scheduler, memory_cache, recommendation_generator, mcp_server, change_queue, fs_monitor
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:11:06,717 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:11:06,717 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:11:06,717 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:11:06,717 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:11:06,719 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:11:06,719 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:11:06,719 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:11:06,719 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:11:06,719 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:11:06,719 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:11:06,719 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:11:06,719 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:11:06,720 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:11:06,720 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:11:06,720 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:11:06,720 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 03:11:06,720 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:11:06,720 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:11:06,720 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 03:11:06,720 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 03:11:06,767 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 03:11:06,767 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 03:11:06,767 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 03:11:06,767 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 03:11:06,767 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:11:06,767 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:11:06,767 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:11:06,767 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:11:06,767 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:11:06,767 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:11:06,768 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:11:06,768 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:11:06,768 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:11:06,772 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:11:06,773 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:11:06,773 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:11:06,773 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:11:06,773 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:11:06,830 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:11:06,830 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:11:06,830 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:11:06,830 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:11:06,830 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:11:06,831 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:11:06,831 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:11:06,831 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:11:06,831 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:11:06,831 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:11:06,831 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:11:06,831 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 03:11:06,831 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:11:06,831 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:11:06,831 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:11:06,831 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:11:06,832 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:11:06,832 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:11:06,832 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:11:06,832 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:11:06,833 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.scheduler] Initialization failed: Missing dependency component '"Required dependency 'fs_monitor' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 03:13:06 ---

2025-04-20 03:13:07,232 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:13:07,232 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:13:07,233 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:13:07,233 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:13:07,233 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:13:07,234 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:13:07,235 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745111587.2357671
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:13:07,235 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:13:07,236 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:13:07,236 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:13:07,236 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:13:07,236 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:13:07,236 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:13:07,236 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:13:07,236 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:13:07,236 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:13:07,271 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:13:07,273 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:13:07,274 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:13:07,274 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:13:07,274 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:13:07,274 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:13:07,274 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:13:07,275 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:13:07,275 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:13:07,275 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:13:07,277 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:13:07,277 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, llm_coordinator, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, change_queue, fs_monitor, scheduler, filter
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:13:07,278 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:13:07,278 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:13:07,278 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:13:07,278 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:13:07,279 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:13:07,279 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:13:07,279 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:13:07,279 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:13:07,279 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:13:07,279 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:13:07,279 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:13:07,279 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:13:07,279 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:13:07,279 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:13:07,280 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:13:07,280 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:13:07,280 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:13:07,280 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:13:07,280 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:13:07,280 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:13:07,280 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:13:07,280 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:13:07,280 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:13:07,280 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:13:07,280 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:13:07,280 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:13:07,285 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:13:07,286 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:13:07,286 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:13:07,286 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:13:07,286 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:13:07,371 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:13:07,372 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:13:07,372 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:13:07,372 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:13:07,372 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:13:07,373 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:13:07,373 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:13:07,373 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:13:07,373 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:13:07,373 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:13:07,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:13:07,374 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00019s] ()
2025-04-20 03:13:07,374 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:13:07,374 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:13:07,374 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:13:07,375 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:13:07,375 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00017s] ()
2025-04-20 03:13:07,375 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:13:07,375 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:13:07,376 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:13:07,376 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:13:07,376 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00019s] ()
2025-04-20 03:13:07,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:13:07,376 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:13:07,376 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:13:07,377 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:13:07,377 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:13:07,378 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:13:07,378 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:13:07,378 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.recommendation_generator] Initialization failed: Missing dependency component '"Required dependency 'database' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 03:15:03 ---

2025-04-20 03:15:04,462 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:15:04,462 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:15:04,462 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:15:04,462 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:15:04,463 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:15:04,463 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745111704.4644794
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:15:04,464 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:15:04,465 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:15:04,465 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:15:04,465 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:15:04,465 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:15:04,465 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:15:04,465 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:15:04,465 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:15:04,465 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:15:04,465 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:15:04,465 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:15:04,465 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:15:04,494 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:15:04,495 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:15:04,495 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:15:04,497 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, file_access, filter, change_queue, llm_coordinator, fs_monitor, scheduler, database, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, memory_cache
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:15:04,497 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:15:04,497 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:15:04,498 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:15:04,499 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:15:04,499 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:15:04,499 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:15:04,499 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:15:04,499 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 03:15:04,499 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 03:15:04,551 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 03:15:04,551 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 03:15:04,552 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 03:15:04,552 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 03:15:04,552 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:15:04,552 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:15:04,552 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:15:04,552 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 03:15:04,552 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 03:15:04,552 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 03:15:04,552 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 03:15:04,552 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 03:15:04,598 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 03:15:04,598 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 03:15:04,598 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 03:15:04,598 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 03:15:04,598 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 03:15:04,598 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 03:15:04,599 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 03:15:04,599 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 03:15:04,599 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 03:15:04,599 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 03:15:04,599 - dbp.core.lifecycle - INFO - Initializing component 'scheduler'...
2025-04-20 03:15:04,599 - dbp.core.lifecycle - INFO - Initializing component 'scheduler' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:15:04,599 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:15:04,599 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'scheduler'
2025-04-20 03:15:04,599 - dbp.core.lifecycle.scheduler - INFO - Initializing component 'scheduler'...
2025-04-20 03:15:04,599 - dbp.core.lifecycle.scheduler - ERROR - Initialization failed: Missing dependency component '"Required dependency 'metadata_extraction' not found in provided dependencies"'. Ensure it's registered.
2025-04-20 03:15:04,599 - dbp.core.lifecycle - ERROR - Failed to initialize component 'scheduler': Missing dependency during scheduler initialization: "Required dependency 'metadata_extraction' not found in provided dependencies"
2025-04-20 03:15:04,599 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/scheduler/component.py", line 161, in initialize
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -       metadata_extraction_component = self.get_dependency(dependencies, "metadata_extraction")
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/component.py", line 235, in get_dependency
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -       raise KeyError(f"Required dependency '{name}' not found in provided dependencies")
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -   KeyError: "Required dependency 'metadata_extraction' not found in provided dependencies"
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 316, in initialize_all
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/scheduler/component.py", line 209, in initialize
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Missing dependency during {self.name} initialization: {e}") from e
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR -   RuntimeError: Missing dependency during scheduler initialization: "Required dependency 'metadata_extraction' not found in provided dependencies"
2025-04-20 03:15:04,600 - dbp.core.lifecycle - ERROR - Component 'scheduler' debug info: {'class_name': 'SchedulerComponent', 'module': 'dbp.scheduler.component', 'initialized': False, 'has_logger': True}
2025-04-20 03:15:04,600 - dbp.core.lifecycle - WARNING - Rolling back initialization of 6 components
2025-04-20 03:15:04,600 - dbp.core.lifecycle - INFO - Rolling back component 'fs_monitor'...
2025-04-20 03:15:04,600 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Shutting down component 'fs_monitor'...
2025-04-20 03:15:04,600 - dbp.fs_monitor.base - INFO - Stopping LinuxFileSystemMonitor...
2025-04-20 03:15:09,600 - dbp.fs_monitor.base - WARNING - LinuxFileSystemMonitor thread did not exit cleanly.
2025-04-20 03:15:09,601 - dbp.fs_monitor.base - INFO - LinuxFileSystemMonitor stopped.
2025-04-20 03:15:09,601 - dbp.fs_monitor.linux - INFO - Linux file system monitor stopped.
2025-04-20 03:15:09,601 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitor stopped
2025-04-20 03:15:09,601 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' shut down
2025-04-20 03:15:09,601 - dbp.core.lifecycle - INFO - Rolling back component 'llm_coordinator'...
2025-04-20 03:15:09,601 - dbp.core.lifecycle.llm_coordinator - INFO - Shutting down component 'llm_coordinator'...
2025-04-20 03:15:09,601 - dbp.core.lifecycle.llm_coordinator.job_manager - INFO - JobManager shutdown initiated. No new jobs will be scheduled.
2025-04-20 03:15:09,601 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Shutting down CoordinatorLLM', 'model_name': 'nova-lite'}
2025-04-20 03:15:09,601 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'CoordinatorLLM shutdown completed'}
2025-04-20 03:15:09,601 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' shut down.
2025-04-20 03:15:09,601 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-20 03:15:09,601 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-20 03:15:09,601 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-20 03:15:09,601 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-20 03:15:09,601 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-20 03:15:09,601 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-20 03:15:09,601 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-20 03:15:09,601 - dbp.core.lifecycle - INFO - Rolling back component 'file_access'...
2025-04-20 03:15:09,601 - dbp.core.lifecycle.file_access.file_access - INFO - Shutting down component 'file_access'...
2025-04-20 03:15:09,601 - dbp.core.lifecycle.file_access.file_access - INFO - File access service cache cleared
2025-04-20 03:15:09,601 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' shut down
2025-04-20 03:15:09,601 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 03:15:09,601 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 03:15:09,601 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 03:15:09,601 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 03:15:09,601 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 03:15:09,601 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_initialized'
2025-04-20 03:15:09,602 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 03:15:09,602 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 03:15:09,602 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 03:15:09,602 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 03:15:09,602 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 03:15:09,602 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 03:16:43 ---

2025-04-20 03:16:44,841 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:16:44,842 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:16:44,842 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:16:44,842 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:16:44,843 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:16:44,843 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:16:44,843 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:16:44,843 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:16:44,843 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:16:44,843 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:16:44,843 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:16:44,844 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:16:44,844 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:16:44,845 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:16:44,845 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:16:44,845 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:16:44,845 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:16:44,845 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:16:44,845 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:16:44,845 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:16:44,845 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:16:44,846 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745111804.8473973
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:16:44,847 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:16:44,848 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:16:44,848 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:16:44,848 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:16:44,848 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:16:44,848 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:16:44,848 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:16:44,848 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:16:44,848 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:16:44,848 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:16:44,848 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:16:44,888 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:16:44,889 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:16:44,890 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database']
2025-04-20 03:16:44,892 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:16:44,892 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:16:44,892 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:16:44,892 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:16:44,892 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:16:44,892 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:16:44,892 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, llm_coordinator, change_queue, database, metadata_extraction, doc_relationships, filter, consistency_analysis, recommendation_generator, fs_monitor, scheduler, memory_cache, mcp_server
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:16:44,893 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:16:44,893 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:16:44,893 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:16:44,893 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:16:44,895 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:16:44,895 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:16:44,896 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:16:44,896 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:16:44,896 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:16:44,896 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:16:44,896 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:16:44,896 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:16:44,896 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:16:44,896 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:16:44,896 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:16:44,896 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:16:44,897 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:16:44,897 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:16:44,897 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:16:44,897 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:16:44,897 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:16:44,897 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:16:44,897 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:16:44,897 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 03:16:44,897 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 03:16:44,897 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:16:44,897 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:16:44,897 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:16:44,898 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:16:44,898 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:16:44,898 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:16:44,898 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:16:44,904 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:16:44,905 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:16:44,906 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:16:44,906 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:16:44,906 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:16:45,008 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:16:45,009 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:16:45,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:16:45,011 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00031s] ()
2025-04-20 03:16:45,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:16:45,012 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:16:45,012 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:16:45,013 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:16:45,014 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00038s] ()
2025-04-20 03:16:45,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:16:45,014 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:16:45,014 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:16:45,015 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00013s] ()
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:16:45,015 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:16:45,016 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:16:45,016 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:16:45,016 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:16:45,016 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:16:45,016 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:16:45,016 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:16:45,016 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [dbp.core.lifecycle.recommendation_generator] Initialization failed: Missing dependency component '"Required dependency 'llm_coordinator' not found in provided dependencies"'. Ensure it's registered.


--- SERVER START ATTEMPT AT 2025-04-20 03:19:10 ---

2025-04-20 03:19:10,631 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:19:10,631 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:19:10,632 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:19:10,632 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:19:10,632 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:19:10,632 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:19:10,632 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:19:10,633 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:19:10,633 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:19:10,633 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:19:10,633 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:19:10,633 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:19:10,633 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:19:10,633 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:19:10,634 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:19:10,634 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:19:10,634 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:19:10,634 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:19:10,634 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:19:10,634 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:19:10,635 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:19:10,635 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:19:10,635 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:19:10,635 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:19:10,635 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:19:10,635 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:19:10,635 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:19:10,635 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:19:10,635 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:19:10,635 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:19:10,635 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:19:10,635 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:19:10,635 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745111950.636534
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:19:10,636 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:19:10,637 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:19:10,637 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:19:10,638 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:19:10,638 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:19:10,638 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:19:10,638 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:19:10,638 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:19:10,638 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:19:10,679 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:19:10,680 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:19:10,680 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:19:10,681 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:19:10,681 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:19:10,681 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:19:10,681 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:19:10,681 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:19:10,681 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:19:10,681 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:19:10,682 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, database, change_queue, fs_monitor, memory_cache, metadata_extraction, scheduler, file_access, doc_relationships, consistency_analysis, filter, llm_coordinator, recommendation_generator, mcp_server
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:19:10,682 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:19:10,683 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:19:10,683 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:19:10,684 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:19:10,684 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:19:10,684 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:19:10,684 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:19:10,684 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:19:10,684 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:19:10,684 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:19:10,684 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:19:10,684 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:19:10,684 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:19:10,684 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:19:10,684 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:19:10,688 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:19:10,689 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:19:10,689 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:19:10,689 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:19:10,690 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:19:10,744 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:19:10,744 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:19:10,744 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:19:10,745 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:19:10,745 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:19:10,745 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:19:10,745 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:19:10,745 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:19:10,745 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:19:10,745 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:19:10,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:19:10,745 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:19:10,745 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:19:10,745 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:19:10,745 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:19:10,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:19:10,746 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:19:10,746 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:19:10,746 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:19:10,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:19:10,747 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:19:10,747 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 03:22:46 ---

2025-04-20 03:22:47,124 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:22:47,125 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:22:47,125 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:22:47,125 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:22:47,126 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:22:47,127 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745112167.127518
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:22:47,127 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:22:47,128 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:22:47,128 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:22:47,128 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:22:47,128 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:22:47,128 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:22:47,128 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:22:47,128 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:22:47,128 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:22:47,128 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:22:47,128 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:22:47,155 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:22:47,156 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:22:47,156 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:22:47,158 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, filter, database, memory_cache, change_queue, fs_monitor, llm_coordinator, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, scheduler
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:22:47,158 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:22:47,158 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:22:47,158 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:22:47,158 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:22:47,159 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:22:47,159 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:22:47,160 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:22:47,160 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:22:47,160 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 03:22:47,160 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:22:47,160 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:22:47,160 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 03:22:47,160 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 03:22:47,204 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 03:22:47,204 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 03:22:47,204 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 03:22:47,204 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 03:22:47,204 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:22:47,204 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:22:47,204 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:22:47,204 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:22:47,204 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:22:47,204 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:22:47,204 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:22:47,204 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:22:47,204 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:22:47,208 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:22:47,209 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:22:47,209 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:22:47,209 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:22:47,209 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:22:47,261 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:22:47,261 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:22:47,262 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:22:47,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:22:47,262 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:22:47,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:22:47,262 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:22:47,262 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:22:47,263 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:22:47,263 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:22:47,264 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:22:47,264 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:22:47,264 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:22:47,264 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:22:47,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:22:47,264 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:22:47,264 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 03:33:04 ---

2025-04-20 03:33:05,054 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:33:05,054 - dbp.config.config_manager - DEBUG - ConfigurationManager singleton instance created.
2025-04-20 03:33:05,055 - dbp.config.config_manager - INFO - Getting typed configuration before initialization. Initializing now.
2025-04-20 03:33:05,055 - dbp.config.config_manager - INFO - Initializing configuration...
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Loading standard configuration files...
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.json
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yaml
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /etc/dbp/config.yml
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.json
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yaml
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Configuration file not found or not a file: /home/jcjorel/.config/dbp/config.yml
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Loading configuration from environment variables...
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from environment variables.
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Loading configuration from command-line arguments...
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Loaded 0 configuration values from command-line arguments.
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Applying configuration hierarchy...
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Resolving all template variables in configuration...
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Template resolution pass 1/5
2025-04-20 03:33:05,055 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in history.file: ${general.base_dir}/cli_history → .dbp/cli_history
2025-04-20 03:33:05,056 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in database.path: ${general.base_dir}/database.sqlite → .dbp/database.sqlite
2025-04-20 03:33:05,056 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.logs_dir: ${general.base_dir}/logs → .dbp/logs
2025-04-20 03:33:05,056 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.pid_file: ${general.base_dir}/mcp_server.pid → .dbp/mcp_server.pid
2025-04-20 03:33:05,056 - dbp.config.config_manager - DEBUG - Pass 1: Resolved template in mcp_server.cli_config_file: ${general.base_dir}/cli_config.json → .dbp/cli_config.json
2025-04-20 03:33:05,056 - dbp.config.config_manager - DEBUG - Template resolution pass 2/5
2025-04-20 03:33:05,056 - dbp.config.config_manager - DEBUG - No more templates to resolve after pass 2
2025-04-20 03:33:05,056 - dbp.config.config_manager - DEBUG - Configuration validated successfully with all template variables resolved.
2025-04-20 03:33:05,056 - dbp.config.config_manager - INFO - Configuration initialized successfully.
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:33:05,056 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745112785.0570548
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=30, startup_check=True, watchdog_timeout=60)
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:33:05,057 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:33:05,057 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:33:05,057 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:33:05,057 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:33:05,057 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:33:05,057 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:33:05,057 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:33:05,057 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:33:05,089 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:33:05,090 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:33:05,090 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:33:05,091 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:33:05,091 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, llm_coordinator, change_queue, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, filter, fs_monitor, scheduler, recommendation_generator, mcp_server
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:33:05,092 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:33:05,092 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:33:05,092 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:33:05,092 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:33:05,093 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:33:05,093 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:33:05,093 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:33:05,093 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:33:05,093 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:33:05,093 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:33:05,093 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:33:05,093 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:33:05,093 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:33:05,093 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:33:05,093 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:33:05,094 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:33:05,094 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 03:33:05,094 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 03:33:05,094 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:33:05,094 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:33:05,094 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:33:05,094 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:33:05,094 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:33:05,094 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:33:05,094 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:33:05,098 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:33:05,098 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:33:05,098 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:33:05,098 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:33:05,099 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:33:05,151 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00009s] ()
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:33:05,152 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:33:05,153 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:33:05,153 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:33:05,153 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:33:05,153 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:33:05,153 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 03:52:25 ---

2025-04-20 03:52:25,990 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 03:52:25,990 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - INFO - Watchdog started with 20 second timeout
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745113945.9912636
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 03:52:25,991 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 03:52:25,992 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 03:52:25,992 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 03:52:25,992 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 03:52:25,992 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 03:52:25,992 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 03:52:25,992 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 03:52:25,992 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 03:52:26,021 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 03:52:26,021 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:52:26,022 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 03:52:26,024 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, change_queue, filter, llm_coordinator, file_access, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, fs_monitor, scheduler
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:52:26,024 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:52:26,024 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 03:52:26,025 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 03:52:26,026 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 03:52:26,026 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 03:52:26,026 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 03:52:26,026 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:52:26,026 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 03:52:26,026 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 03:52:26,077 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 03:52:26,078 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 03:52:26,078 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 03:52:26,078 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 03:52:26,078 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:52:26,078 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:52:26,078 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 03:52:26,079 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 03:52:26,079 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 03:52:26,079 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 03:52:26,079 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 03:52:26,079 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 03:52:26,079 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 03:52:26,079 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 03:52:26,079 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 03:52:26,079 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 03:52:26,079 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 03:52:26,079 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 03:52:26,084 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 03:52:26,085 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 03:52:26,085 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 03:52:26,085 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 03:52:26,086 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 03:52:26,147 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 03:52:26,147 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 03:52:26,147 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 03:52:26,147 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 03:52:26,147 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 03:52:26,147 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 03:52:26,148 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 03:52:26,148 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 03:52:26,148 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 03:52:26,148 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:52:26,148 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 03:52:26,148 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00012s] ()
2025-04-20 03:52:26,148 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 03:52:26,148 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:52:26,148 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 03:52:26,149 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 03:52:26,149 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 03:52:26,150 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 03:52:26,150 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 03:52:26,150 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 03:52:26,150 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 04:03:34 ---

2025-04-20 04:03:34,829 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 04:03:34,829 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 04:03:34,829 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745114614.830345
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 04:03:34,830 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745114614.8308995
2025-04-20 04:03:34,831 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD INFO: id=140556502095552, name=watchdog_monitor, is_daemon=True
2025-04-20 04:03:34,831 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 04:03:34,831 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG LOOP 1: Sleeping for 5s
2025-04-20 04:03:34,831 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 04:03:34,832 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 04:03:34,833 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 04:03:34,833 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 04:03:34,833 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 04:03:34,833 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 04:03:34,833 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 04:03:34,833 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 04:03:34,833 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 04:03:34,867 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 04:03:34,868 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 04:03:34,869 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 04:03:34,871 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 04:03:34,871 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 04:03:34,872 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 04:03:34,872 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 04:03:34,872 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 04:03:34,872 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, fs_monitor, database, file_access, memory_cache, filter, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, scheduler
2025-04-20 04:03:34,872 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 04:03:34,872 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:03:34,872 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:03:34,872 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 04:03:34,873 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 04:03:34,873 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 04:03:34,873 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 04:03:34,873 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 04:03:34,873 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 04:03:34,873 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:03:34,873 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:03:34,873 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 04:03:34,873 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 04:03:34,874 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 04:03:34,874 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 04:03:34,874 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 04:03:34,874 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:03:34,874 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 04:03:34,874 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 04:03:34,874 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 04:03:34,874 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 04:03:34,874 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 04:03:34,936 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 04:03:34,937 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 04:03:34,937 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 04:03:34,937 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 04:03:34,937 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 04:03:34,937 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 04:03:34,937 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 04:03:34,937 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 04:03:34,937 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 04:03:34,937 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 04:03:34,937 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 04:03:34,938 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:03:34,938 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:03:34,938 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 04:03:34,938 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 04:03:34,938 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 04:03:34,938 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 04:03:34,938 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 04:03:34,938 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 04:03:34,944 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 04:03:34,945 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 04:03:34,945 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 04:03:34,945 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 04:03:34,945 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 04:03:35,034 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 04:03:35,035 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 04:03:35,035 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 04:03:35,036 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00011s] ()
2025-04-20 04:03:35,036 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 04:03:35,036 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 04:03:35,036 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 04:03:35,036 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 04:03:35,036 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00009s] ()
2025-04-20 04:03:35,036 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 04:03:35,037 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 04:03:35,037 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 04:03:35,038 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 04:03:35,038 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 04:03:35,038 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 04:03:35,038 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 04:03:35,038 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 04:03:35,038 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 04:03:35,038 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 04:03:35,038 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 04:03:35,038 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.mcp_server] MCP server is not running.


--- SERVER START ATTEMPT AT 2025-04-20 04:04:40 ---

2025-04-20 04:04:40,835 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745114680.8356616
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 04:04:40,835 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745114680.8358796
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD INFO: id=139649236993728, name=watchdog_monitor, is_daemon=True
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG LOOP 1: Sleeping for 5s
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 04:04:40,836 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 04:04:40,836 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 04:04:40,836 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 04:04:40,836 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 04:04:40,836 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 04:04:40,836 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 04:04:40,836 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 04:04:40,836 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 04:04:40,865 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 04:04:40,866 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 04:04:40,867 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 04:04:40,868 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 04:04:40,869 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, database, metadata_extraction, file_access, doc_relationships, change_queue, fs_monitor, consistency_analysis, memory_cache, scheduler, llm_coordinator, recommendation_generator, mcp_server
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:04:40,869 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:04:40,869 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 04:04:40,870 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 04:04:40,870 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 04:04:40,870 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 04:04:40,870 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 04:04:40,870 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 04:04:40,870 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:04:40,870 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:04:40,870 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 04:04:40,870 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 04:04:40,917 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 04:04:40,917 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 04:04:40,917 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 04:04:40,917 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 04:04:40,917 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 04:04:40,917 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:04:40,917 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:04:40,917 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 04:04:40,917 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 04:04:40,917 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 04:04:40,917 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 04:04:40,917 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 04:04:40,917 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 04:04:40,922 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 04:04:40,922 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 04:04:40,923 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 04:04:40,923 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 04:04:40,923 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 04:04:40,982 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 04:04:40,982 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 04:04:40,983 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 04:04:40,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 04:04:40,983 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 04:04:40,983 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 04:04:40,983 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 04:04:40,983 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 04:04:40,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00005s] ()
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - INFO - [generated in 0.00005s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 04:04:40,984 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 04:04:40,984 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 04:04:40,984 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 04:04:40,984 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 04:04:40,985 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 04:16:45 ---

2025-04-20 04:16:46,784 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 04:16:46,784 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 04:16:46,784 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 04:16:46,784 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 04:16:46,784 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745115406.7853699
2025-04-20 04:16:46,785 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 04:16:46,786 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745115406.7861211
2025-04-20 04:16:46,786 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD INFO: id=139900375852736, name=watchdog_monitor, is_daemon=True
2025-04-20 04:16:46,786 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 04:16:46,787 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG LOOP 1: Sleeping for 5s
2025-04-20 04:16:46,787 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 04:16:46,788 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 04:16:46,788 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 04:16:46,788 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 04:16:46,788 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 04:16:46,788 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 04:16:46,788 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 04:16:46,789 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 04:16:46,789 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 04:16:46,789 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 04:16:46,789 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 04:16:46,790 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 04:16:46,790 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 04:16:46,790 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 04:16:46,790 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 04:16:46,790 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 04:16:46,790 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 04:16:46,790 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 04:16:46,826 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 04:16:46,827 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 04:16:46,827 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 04:16:46,828 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 04:16:46,828 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 04:16:46,828 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 04:16:46,828 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 04:16:46,828 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 04:16:46,828 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 04:16:46,828 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 04:16:46,830 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, change_queue, fs_monitor, filter, llm_coordinator, database, memory_cache, metadata_extraction, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 04:16:46,830 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 04:16:46,831 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 04:16:46,831 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 04:16:46,831 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 04:16:46,831 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 04:16:46,831 - dbp.core.lifecycle - CRITICAL - A critical error occurred during system startup: 'ConfigManagerComponent' object has no attribute '_is_initialized'
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/core/lifecycle.py", line 394, in start
    success = self.system.initialize_all()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 263, in initialize_all
    if component.is_initialized:
       ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jcjorel/cline-best-practices/src/dbp/config/component.py", line 149, in is_initialized
    return self._is_initialized
           ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ConfigManagerComponent' object has no attribute '_is_initialized'. Did you mean: 'is_initialized'?
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - ERROR - Error collecting diagnostic information: 'ConfigManagerComponent' object has no attribute '_is_initialized'
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 04:16:46,832 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 10:23:29 ---

2025-04-20 10:23:30,165 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 10:23:30,165 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745137410.1658237
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD INFO: id=140214846428864, name=watchdog_monitor, is_daemon=True
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG LOOP 1: Sleeping for 5s
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745137410.1664965
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 10:23:30,166 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 10:23:30,167 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 10:23:30,167 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 10:23:30,167 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 10:23:30,167 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 10:23:30,167 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 10:23:30,167 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 10:23:30,167 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 10:23:30,167 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 10:23:30,167 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 10:23:30,167 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 10:23:30,167 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 10:23:30,167 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 10:23:30,203 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 10:23:30,204 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 10:23:30,205 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 10:23:30,207 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, change_queue, fs_monitor, llm_coordinator, filter, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, scheduler, recommendation_generator, mcp_server
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:23:30,207 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 10:23:30,207 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:23:30,207 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:23:30,207 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 10:23:30,209 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 10:23:30,209 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 10:23:30,209 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 10:23:30,209 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 10:23:30,209 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:23:30,209 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 10:23:30,209 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 10:23:30,209 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 10:23:30,209 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 10:23:30,209 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 10:23:30,257 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 10:23:30,257 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 10:23:30,257 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 10:23:30,257 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 10:23:30,257 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 10:23:30,257 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 10:23:30,258 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 10:23:30,258 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 10:23:30,258 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 10:23:30,258 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 10:23:30,258 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 10:23:30,258 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:23:30,258 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:23:30,258 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 10:23:30,258 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 10:23:30,259 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 10:23:30,259 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 10:23:30,259 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 10:23:30,259 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 10:23:30,259 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:23:30,259 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:23:30,259 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 10:23:30,259 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 10:23:30,312 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 10:23:30,312 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 10:23:30,312 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 10:23:30,312 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 10:23:30,312 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 10:23:30,312 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:23:30,312 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:23:30,312 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 10:23:30,312 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 10:23:30,312 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 10:23:30,312 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 10:23:30,312 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 10:23:30,312 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 10:23:30,317 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 10:23:30,318 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 10:23:30,318 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 10:23:30,318 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 10:23:30,318 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 10:23:30,380 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 10:23:30,381 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 10:23:30,381 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 10:23:30,381 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 10:23:30,381 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 10:23:30,381 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00005s] ()
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - INFO - [generated in 0.00005s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 10:23:30,382 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 10:23:30,382 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 10:23:30,383 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 10:23:30,383 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 10:23:30,383 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 10:23:30,383 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.mcp_server] MCP server is not running.


--- SERVER START ATTEMPT AT 2025-04-20 10:26:08 ---

2025-04-20 10:26:09,121 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745137569.122332
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG THREAD INFO: id=140675591497408, name=watchdog_monitor, is_daemon=True
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - CRITICAL - WATCHDOG LOOP 1: Sleeping for 5s
2025-04-20 10:26:09,122 - dbp.mcp_server.__main__ - DEBUG - Process keepalive updated at 1745137569.1229281
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 10:26:09,123 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 10:26:09,124 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 10:26:09,124 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 10:26:09,124 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 10:26:09,124 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 10:26:09,124 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 10:26:09,124 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 10:26:09,124 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 10:26:09,153 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 10:26:09,154 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 10:26:09,154 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 10:26:09,156 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, filter, database, memory_cache, change_queue, fs_monitor, llm_coordinator, metadata_extraction, doc_relationships, consistency_analysis, scheduler, recommendation_generator, mcp_server
2025-04-20 10:26:09,156 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 10:26:09,157 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:26:09,157 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:26:09,157 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 10:26:09,157 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 10:26:09,157 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 10:26:09,157 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 10:26:09,157 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:26:09,157 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:26:09,157 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 10:26:09,158 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 10:26:09,158 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 10:26:09,159 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 10:26:09,159 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 10:26:09,159 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 10:26:09,159 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:26:09,159 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:26:09,159 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 10:26:09,159 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 10:26:09,203 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 10:26:09,203 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 10:26:09,203 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 10:26:09,203 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 10:26:09,203 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 10:26:09,203 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 10:26:09,203 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 10:26:09,203 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 10:26:09,203 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 10:26:09,203 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 10:26:09,203 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 10:26:09,203 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 10:26:09,204 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 10:26:09,208 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 10:26:09,209 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 10:26:09,209 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 10:26:09,209 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 10:26:09,209 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 10:26:09,261 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 10:26:09,262 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 10:26:09,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 10:26:09,263 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 10:26:09,263 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 10:26:09,264 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 10:26:09,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 10:26:09,264 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 10:26:09,264 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 19:02:31 ---

2025-04-20 19:02:31,525 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 19:02:31,525 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 19:02:31,525 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 19:02:31,525 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745168551.5255997
2025-04-20 19:02:31,525 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 19:02:31,526 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=140182610339520, name=watchdog_monitor, is_daemon=True
2025-04-20 19:02:31,525 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745168551.525908
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 19:02:31,526 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 19:02:31,526 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 19:02:31,527 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 19:02:31,527 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 19:02:31,527 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 19:02:31,527 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 19:02:31,527 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 19:02:31,527 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 19:02:31,527 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 19:02:31,554 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 19:02:31,555 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 19:02:31,555 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 19:02:31,556 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 19:02:31,556 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 19:02:31,556 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 19:02:31,556 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 19:02:31,556 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 19:02:31,556 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 19:02:31,556 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 19:02:31,557 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 19:02:31,557 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 19:02:31,558 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, file_access, filter, change_queue, fs_monitor, llm_coordinator, database, metadata_extraction, scheduler, doc_relationships, memory_cache, consistency_analysis, recommendation_generator, mcp_server
2025-04-20 19:02:31,558 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 19:02:31,558 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:02:31,558 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:02:31,558 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 19:02:31,559 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 19:02:31,559 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 19:02:31,559 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:02:31,559 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 19:02:31,559 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:02:31,559 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 19:02:31,559 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 19:02:31,603 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 19:02:31,604 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 19:02:31,604 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 19:02:31,604 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 19:02:31,604 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:02:31,604 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 19:02:31,604 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 19:02:31,604 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 19:02:31,604 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 19:02:31,604 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 19:02:31,648 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 19:02:31,648 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 19:02:31,648 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 19:02:31,649 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 19:02:31,649 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 19:02:31,649 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 19:02:31,649 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 19:02:31,649 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 19:02:31,649 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 19:02:31,649 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 19:02:31,649 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 19:02:31,649 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:02:31,649 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:02:31,649 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 19:02:31,649 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 19:02:31,649 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 19:02:31,650 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 19:02:31,650 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 19:02:31,650 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 19:02:31,650 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:02:31,650 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:02:31,650 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 19:02:31,650 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 19:02:31,650 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 19:02:31,650 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 19:02:31,650 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 19:02:31,650 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 19:02:31,654 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 19:02:31,655 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 19:02:31,655 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 19:02:31,655 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 19:02:31,655 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 19:02:31,716 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00005s] ()
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - INFO - [generated in 0.00005s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 19:02:31,717 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 19:02:31,718 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00004s] ()
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - INFO - [generated in 0.00004s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 19:02:31,718 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 19:02:31,718 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 19:02:31,718 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 19:02:31,718 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 19:06:43 ---

2025-04-20 19:06:43,593 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 19:06:43,593 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 19:06:43,593 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 19:06:43,593 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 19:06:43,593 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 19:06:43,593 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 19:06:43,594 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 19:06:43,594 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 19:06:43,594 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 19:06:43,594 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 19:06:43,594 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 19:06:43,594 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 19:06:43,594 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745168803.594177
2025-04-20 19:06:43,594 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 19:06:43,594 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745168803.594462
2025-04-20 19:06:43,594 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 19:06:43,594 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=140587100587712, name=watchdog_monitor, is_daemon=True
2025-04-20 19:06:43,595 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 19:06:43,594 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 19:06:43,595 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 19:06:43,595 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 19:06:43,595 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 19:06:43,595 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 19:06:43,595 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 19:06:43,595 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 19:06:43,595 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 19:06:43,595 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 19:06:43,625 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 19:06:43,626 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 19:06:43,626 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 19:06:43,626 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 19:06:43,627 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 19:06:43,627 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 19:06:43,627 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 19:06:43,627 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 19:06:43,627 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 19:06:43,627 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 19:06:43,628 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, change_queue, fs_monitor, database, metadata_extraction, memory_cache, scheduler, file_access, doc_relationships, consistency_analysis, recommendation_generator, mcp_server
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:06:43,628 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:06:43,628 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 19:06:43,629 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 19:06:43,630 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 19:06:43,630 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 19:06:43,630 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 19:06:43,630 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 19:06:43,630 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:06:43,630 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:06:43,630 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 19:06:43,630 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 19:06:43,675 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 19:06:43,675 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 19:06:43,675 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 19:06:43,675 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 19:06:43,675 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 19:06:43,675 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:06:43,675 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:06:43,675 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 19:06:43,675 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 19:06:43,676 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 19:06:43,676 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 19:06:43,676 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 19:06:43,676 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:06:43,676 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 19:06:43,676 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 19:06:43,676 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 19:06:43,676 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 19:06:43,676 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 19:06:43,724 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 19:06:43,724 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 19:06:43,724 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 19:06:43,724 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 19:06:43,724 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 19:06:43,724 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 19:06:43,725 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 19:06:43,725 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 19:06:43,725 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 19:06:43,725 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 19:06:43,725 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 19:06:43,725 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:06:43,725 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:06:43,725 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 19:06:43,725 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 19:06:43,725 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 19:06:43,725 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 19:06:43,725 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 19:06:43,725 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 19:06:43,729 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 19:06:43,730 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 19:06:43,730 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 19:06:43,730 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 19:06:43,730 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 19:06:43,792 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 19:06:43,793 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 19:06:43,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 19:06:43,793 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 19:06:43,793 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 19:06:43,793 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 19:06:43,793 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 19:06:43,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 19:06:43,794 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 19:06:43,794 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 19:06:43,795 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 19:06:43,795 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 19:06:43,795 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 19:06:43,795 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 19:06:43,795 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 19:06:43,795 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
WARNI [dbp.mcp_server] MCP server is not running.


--- SERVER START ATTEMPT AT 2025-04-20 19:08:14 ---

2025-04-20 19:08:14,796 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 19:08:14,796 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 19:08:14,797 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 19:08:14,797 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 19:08:14,797 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745168894.7970333
2025-04-20 19:08:14,797 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 19:08:14,797 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=140639808063168, name=watchdog_monitor, is_daemon=True
2025-04-20 19:08:14,797 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745168894.797363
2025-04-20 19:08:14,797 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 19:08:14,797 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 19:08:14,797 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 19:08:14,797 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 19:08:14,798 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 19:08:14,798 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 19:08:14,798 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 19:08:14,798 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 19:08:14,798 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 19:08:14,798 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 19:08:14,798 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 19:08:14,798 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 19:08:14,826 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 19:08:14,827 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 19:08:14,827 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 19:08:14,829 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, database, memory_cache, filter, change_queue, metadata_extraction, fs_monitor, doc_relationships, consistency_analysis, llm_coordinator, recommendation_generator, mcp_server, scheduler
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:08:14,829 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 19:08:14,829 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:08:14,829 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:08:14,829 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 19:08:14,830 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 19:08:14,831 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 19:08:14,831 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 19:08:14,831 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 19:08:14,831 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 19:08:14,831 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 19:08:14,831 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 19:08:14,831 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 19:08:14,831 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 19:08:14,831 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 19:08:14,831 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 19:08:14,831 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 19:08:14,831 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 19:08:14,835 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 19:08:14,836 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 19:08:14,836 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 19:08:14,836 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 19:08:14,836 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 19:08:14,887 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 19:08:14,887 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 19:08:14,887 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 19:08:14,887 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 19:08:14,887 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 19:08:14,888 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 19:08:14,888 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 19:08:14,888 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 19:08:14,888 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 19:08:14,888 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 19:08:14,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 19:08:14,888 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00016s] ()
2025-04-20 19:08:14,888 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 19:08:14,888 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 19:08:14,889 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 19:08:14,889 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 19:08:14,890 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 19:08:14,890 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 19:08:14,890 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 19:08:14,890 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR:    Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/jcjorel/cline-best-practices/venv/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

WARNI [dbp.fs_monitor.base] LinuxFileSystemMonitor thread did not exit cleanly.
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: main() completion
WARNI [dbp.mcp_server.__main__] Exit reason: Normal server shutdown
WARNI [dbp.mcp_server.__main__] Server exit detected
WARNI [dbp.mcp_server.__main__] Exit source: Python interpreter shutdown
WARNI [dbp.mcp_server.__main__] Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 23:01:56 ---

2025-04-20 23:01:57,561 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:01:57,562 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:01:57,562 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:01:57,562 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:01:57,562 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:01:57,562 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:01:57,562 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:01:57,562 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:01:57,563 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:01:57,563 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:01:57,563 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:01:57,563 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:01:57,563 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745182917.5633895
2025-04-20 23:01:57,563 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:01:57,563 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745182917.563688
2025-04-20 23:01:57,563 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=139833454704320, name=watchdog_monitor, is_daemon=True
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:01:57,564 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:01:57,564 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:01:57,564 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:01:57,565 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:01:57,565 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:01:57,565 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:01:57,565 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:01:57,565 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:01:57,565 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:01:57,565 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:01:57,597 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:01:57,599 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:01:57,600 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:01:57,603 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, change_queue, fs_monitor, database, file_access, metadata_extraction, scheduler, doc_relationships, consistency_analysis, llm_coordinator, recommendation_generator, mcp_server, memory_cache
2025-04-20 23:01:57,603 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:01:57,604 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:01:57,604 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:01:57,604 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:01:57,604 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:01:57,605 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:01:57,605 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:01:57,605 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:01:57,605 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:01:57,605 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 23:01:57,605 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:01:57,605 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:01:57,605 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 23:01:57,605 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 23:01:57,605 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:01:57,649 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:01:57,650 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 23:01:57,650 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 23:01:57,650 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 23:01:57,650 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:01:57,650 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 23:01:57,650 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:01:57,650 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:01:57,650 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 23:01:57,651 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 23:01:57,651 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 23:01:57,694 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:01:57,694 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 23:01:57,694 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 23:01:57,694 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 23:01:57,694 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 23:01:57,694 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 23:01:57,694 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 23:01:57,695 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 23:01:57,695 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:01:57,695 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:01:57,695 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:01:57,695 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:01:57,695 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:01:57,695 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:01:57,695 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:01:57,695 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:01:57,695 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:01:57,695 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:01:57,695 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:01:57,695 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:01:57,702 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:01:57,704 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:01:57,704 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:01:57,704 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:01:57,704 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:01:57,800 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:01:57,801 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:01:57,801 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:01:57,801 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:01:57,802 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:01:57,802 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:01:57,802 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:01:57,802 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:01:57,802 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:01:57,802 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:01:57,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:01:57,802 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 23:01:57,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:01:57,802 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:01:57,802 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:01:57,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:01:57,803 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:01:57,803 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:01:57,803 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:01:57,804 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:01:57,804 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:01:57,804 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-20 23:32:34 ---

2025-04-20 23:32:35,407 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:32:35,407 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:32:35,407 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:32:35,407 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:32:35,408 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:32:35,408 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745184755.4082677
2025-04-20 23:32:35,408 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:32:35,408 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=140568373163712, name=watchdog_monitor, is_daemon=True
2025-04-20 23:32:35,408 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745184755.408549
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:32:35,408 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:32:35,408 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:32:35,409 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:32:35,409 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:32:35,409 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:32:35,409 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:32:35,409 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:32:35,409 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:32:35,409 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:32:35,409 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:32:35,410 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:32:35,423 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:32:35,449 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:32:35,451 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:32:35,453 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:32:35,453 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:32:35,453 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:32:35,453 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:32:35,453 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:32:35,453 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:32:35,453 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:32:35,459 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:32:35,459 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, database, change_queue, llm_coordinator, fs_monitor, filter, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, scheduler, memory_cache, mcp_server
2025-04-20 23:32:35,460 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 23:32:35,460 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:32:35,460 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:32:35,460 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 23:32:35,460 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 23:32:35,460 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 23:32:35,460 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:32:35,460 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:32:35,460 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:32:35,460 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:32:35,460 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:32:35,461 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:32:35,461 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:32:35,462 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:32:35,462 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:32:35,462 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:32:35,462 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:32:35,462 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:32:35,462 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:32:35,462 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:32:35,462 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:32:35,462 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:32:35,462 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:32:35,462 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:32:35,462 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:32:35,466 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:32:35,467 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:32:35,467 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:32:35,467 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:32:35,467 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:32:35,524 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:32:35,527 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:32:35,527 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:32:35,527 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 23:32:35,527 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:32:35,527 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:32:35,528 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:32:35,528 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:32:35,529 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:32:35,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:32:35,529 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:32:35,529 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-20 23:45:27 ---

2025-04-20 23:45:29,230 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:45:29,231 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:45:29,231 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:45:29,231 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:45:29,231 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:45:29,232 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:45:29,232 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:45:29,232 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:45:29,232 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:45:29,232 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:45:29,233 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:45:29,233 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:45:29,233 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745185529.2334883
2025-04-20 23:45:29,233 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:45:29,234 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745185529.2340956
2025-04-20 23:45:29,234 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=139700364928704, name=watchdog_monitor, is_daemon=True
2025-04-20 23:45:29,234 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:45:29,235 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:45:29,235 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:45:29,236 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:45:29,236 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:45:29,237 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:45:29,237 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:45:29,237 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:45:29,237 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:45:29,238 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:45:29,238 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:45:29,238 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:45:29,238 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:45:29,239 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:45:29,239 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:45:29,239 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:45:29,239 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:45:29,239 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:45:29,239 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:45:29,239 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:45:29,240 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,314 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:45:29,318 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:45:29,319 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:45:29,320 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:45:29,320 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:45:29,320 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:45:29,320 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:45:29,321 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:45:29,321 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:45:29,321 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:45:29,325 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:45:29,326 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:45:29,326 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:45:29,326 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:45:29,327 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:45:29,327 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:45:29,327 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:45:29,328 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:45:29,329 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:45:29,329 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:45:29,329 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,329 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:45:29,330 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:45:29,330 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, file_access, change_queue, fs_monitor, database, memory_cache, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, scheduler
2025-04-20 23:45:29,330 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:45:29,331 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:45:29,331 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,331 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:45:29,331 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:45:29,334 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:45:29,335 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:45:29,335 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:45:29,335 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:45:29,335 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 23:45:29,336 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:45:29,336 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,336 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:45:29,336 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 23:45:29,336 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 23:45:29,451 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:45:29,451 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 23:45:29,451 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 23:45:29,451 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 23:45:29,452 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:45:29,452 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:45:29,452 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:45:29,452 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 23:45:29,452 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:45:29,452 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 23:45:29,452 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 23:45:29,452 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 23:45:29,453 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 23:45:29,453 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 23:45:29,452 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,453 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 23:45:29,453 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 23:45:29,453 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 23:45:29,453 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 23:45:29,453 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 23:45:29,453 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 23:45:29,453 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 23:45:29,453 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:45:29,454 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 23:45:29,454 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 23:45:29,454 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 23:45:29,454 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:45:29,454 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 23:45:29,454 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:45:29,454 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,455 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 23:45:29,455 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 23:45:29,455 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 23:45:29,584 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:45:29,585 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 23:45:29,585 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 23:45:29,585 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 23:45:29,585 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 23:45:29,585 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 23:45:29,586 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 23:45:29,586 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 23:45:29,586 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:45:29,587 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:45:29,587 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:45:29,587 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:45:29,587 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:45:29,587 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,587 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:45:29,588 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:45:29,588 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:45:29,588 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:45:29,588 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:45:29,588 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:45:29,599 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:45:29,600 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:45:29,601 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:45:29,601 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:45:29,601 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:45:29,849 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:45:29,850 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:45:29,850 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:45:29,851 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:45:29,851 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:45:29,851 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:45:29,851 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:45:29,851 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:45:29,851 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:45:29,851 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:45:29,851 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:45:29,852 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00023s] ()
2025-04-20 23:45:29,852 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:45:29,852 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:45:29,853 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:45:29,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:45:29,853 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00016s] ()
2025-04-20 23:45:29,853 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:45:29,854 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:45:29,854 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:45:29,854 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:45:29,854 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00014s] ()
2025-04-20 23:45:29,854 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:45:29,854 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:45:29,855 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:45:29,856 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:45:29,856 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:45:29,856 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:45:29,856 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:45:29,856 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:45:29,856 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
2025-04-20 23:45:29,856 - dbp.database.alembic_manager - ERROR - Alembic upgrade failed: name 'threading' is not defined
2025-04-20 23:45:29,857 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:45:29,865 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:45:29,866 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:45:29,866 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [cached since 0.01317s ago] ()
2025-04-20 23:45:29,866 - sqlalchemy.engine.Engine - INFO - [cached since 0.01317s ago] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:45:29,867 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:45:29,867 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:45:29,867 - dbp.database.alembic_manager - ERROR - Current alembic version before failure: 20250416_180000
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:45:29,868 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:45:29,868 - dbp.database.alembic_manager - ERROR - Failed to run database migrations: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:29,868 - dbp.database.alembic_manager - ERROR - Error type: RuntimeError
2025-04-20 23:45:29,877 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

2025-04-20 23:45:29,878 - dbp.database.alembic_manager - INFO - Restored original logging levels after migration
2025-04-20 23:45:29,878 - dbp.database.database - ERROR - Unexpected error during database initialization: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:29,878 - dbp.database.database - ERROR - Error type: RuntimeError
2025-04-20 23:45:29,888 - dbp.database.database - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:45:29,888 - dbp.database - ERROR - Failed to initialize database component: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:29,895 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:29,895 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-20 23:45:29,902 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:45:29,903 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
2025-04-20 23:45:29,903 - dbp.core.lifecycle - ERROR -       stop_event = threading.Event()
2025-04-20 23:45:29,903 - dbp.core.lifecycle - ERROR -                    ^^^^^^^^^
2025-04-20 23:45:29,903 - dbp.core.lifecycle - ERROR -   NameError: name 'threading' is not defined. Did you forget to import 'threading'
2025-04-20 23:45:29,903 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:45:29,903 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:45:29,904 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
2025-04-20 23:45:29,904 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database migration failed: {e}") from e
2025-04-20 23:45:29,904 - dbp.core.lifecycle - ERROR -   RuntimeError: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:29,904 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:45:29,904 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:45:29,904 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -       alembic_manager.run_migrations()
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 324, in initialize_all
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 209, in initialize
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'has_logger': True, 'initialization_error': {'error_type': 'RuntimeError', 'error_message': "Failed to initialize database schema: Database migration failed: name 'threading' is not defined"}}
2025-04-20 23:45:29,905 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-20 23:45:29,905 - dbp.core.lifecycle - WARNING - Rolling back initialization of 6 components
2025-04-20 23:45:29,905 - dbp.core.lifecycle - INFO - Rolling back component 'fs_monitor'...
2025-04-20 23:45:29,905 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Shutting down component 'fs_monitor'...
2025-04-20 23:45:29,905 - dbp.fs_monitor.base - INFO - Stopping LinuxFileSystemMonitor...
2025-04-20 23:45:34,906 - dbp.fs_monitor.base - WARNING - LinuxFileSystemMonitor thread did not exit cleanly.
2025-04-20 23:45:34,906 - dbp.fs_monitor.base - INFO - LinuxFileSystemMonitor stopped.
2025-04-20 23:45:34,906 - dbp.fs_monitor.linux - INFO - Linux file system monitor stopped.
2025-04-20 23:45:34,906 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitor stopped
2025-04-20 23:45:34,906 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' shut down
2025-04-20 23:45:34,906 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-20 23:45:34,906 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-20 23:45:34,907 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-20 23:45:34,907 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-20 23:45:34,907 - dbp.core.lifecycle - INFO - Rolling back component 'file_access'...
2025-04-20 23:45:34,907 - dbp.core.lifecycle.file_access.file_access - INFO - Shutting down component 'file_access'...
2025-04-20 23:45:34,907 - dbp.core.lifecycle.file_access.file_access - INFO - File access service cache cleared
2025-04-20 23:45:34,907 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' shut down
2025-04-20 23:45:34,907 - dbp.core.lifecycle - INFO - Rolling back component 'llm_coordinator'...
2025-04-20 23:45:34,907 - dbp.core.lifecycle.llm_coordinator - INFO - Shutting down component 'llm_coordinator'...
2025-04-20 23:45:34,907 - dbp.core.lifecycle.llm_coordinator.job_manager - INFO - JobManager shutdown initiated. No new jobs will be scheduled.
2025-04-20 23:45:34,907 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Shutting down CoordinatorLLM', 'model_name': 'nova-lite'}
2025-04-20 23:45:34,907 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'CoordinatorLLM shutdown completed'}
2025-04-20 23:45:34,907 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' shut down.
2025-04-20 23:45:34,907 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-20 23:45:34,907 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-20 23:45:34,907 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-20 23:45:34,907 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 23:45:34,907 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 23:45:34,907 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 23:45:34,907 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 23:45:34,907 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 23:45:34,915 - dbp.mcp_server.__main__ - CRITICAL - Component 'database' failure details:
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   error_type: RuntimeError
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   error_message: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   error_module: builtins
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   traceback: Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   file: /home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   line: 449
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   function: run_migrations
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL -   line_context: raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:45:34,916 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['config_manager', 'file_access', 'database', 'change_queue', 'fs_monitor', 'filter', 'memory_cache', 'metadata_extraction', 'doc_relationships', 'consistency_analysis', 'recommendation_generator', 'scheduler', 'llm_coordinator', 'mcp_server']
2025-04-20 23:45:34,917 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:45:34,917 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 23:45:34,917 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 23:45:34,917 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:45:34,917 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 23:45:34,917 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 23:46:52 ---

2025-04-20 23:46:53,491 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:46:53,492 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:46:53,492 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:46:53,492 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745185613.4924502
2025-04-20 23:46:53,492 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:46:53,492 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745185613.4927278
2025-04-20 23:46:53,492 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=140482070652608, name=watchdog_monitor, is_daemon=True
2025-04-20 23:46:53,493 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:46:53,493 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:46:53,493 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:46:53,494 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:46:53,495 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:46:53,495 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:46:53,495 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:46:53,495 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:46:53,495 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:46:53,495 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:46:53,495 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:46:53,495 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:46:53,524 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:46:53,525 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:46:53,526 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:46:53,527 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:46:53,527 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:46:53,527 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:46:53,528 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:46:53,528 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, database, llm_coordinator, memory_cache, metadata_extraction, doc_relationships, filter, change_queue, fs_monitor, scheduler, consistency_analysis, recommendation_generator, mcp_server
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:46:53,528 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:46:53,528 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 23:46:53,529 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 23:46:53,529 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 23:46:53,529 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:46:53,529 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:46:53,529 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:46:53,529 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:46:53,529 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:46:53,530 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:46:53,530 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:46:53,530 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:46:53,530 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:46:53,530 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:46:53,530 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:46:53,530 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:46:53,530 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:46:53,530 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:46:53,530 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:46:53,530 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:46:53,530 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:46:53,531 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:46:53,531 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:46:53,535 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:46:53,536 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:46:53,536 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:46:53,536 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:46:53,536 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:46:53,593 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00005s] ()
2025-04-20 23:46:53,594 - sqlalchemy.engine.Engine - INFO - [generated in 0.00005s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:46:53,595 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:46:53,595 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:46:53,595 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:46:53,595 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:46:53,595 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
2025-04-20 23:46:53,596 - dbp.database.alembic_manager - ERROR - Alembic upgrade failed: name 'threading' is not defined
2025-04-20 23:46:53,597 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:46:53,597 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:46:53,597 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:46:53,597 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [cached since 0.003077s ago] ()
2025-04-20 23:46:53,597 - sqlalchemy.engine.Engine - INFO - [cached since 0.003077s ago] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:46:53,598 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:46:53,598 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:46:53,598 - dbp.database.alembic_manager - ERROR - Current alembic version before failure: 20250416_180000
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:46:53,598 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:46:53,598 - dbp.database.alembic_manager - ERROR - Failed to run database migrations: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,598 - dbp.database.alembic_manager - ERROR - Error type: RuntimeError
2025-04-20 23:46:53,599 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

2025-04-20 23:46:53,600 - dbp.database.alembic_manager - INFO - Restored original logging levels after migration
2025-04-20 23:46:53,600 - dbp.database.database - ERROR - Unexpected error during database initialization: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,600 - dbp.database.database - ERROR - Error type: RuntimeError
2025-04-20 23:46:53,602 - dbp.database.database - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:46:53,602 - dbp.database - ERROR - Failed to initialize database component: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,604 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,604 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -       stop_event = threading.Event()
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -                    ^^^^^^^^^
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   NameError: name 'threading' is not defined. Did you forget to import 'threading'
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database migration failed: {e}") from e
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   RuntimeError: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -       alembic_manager.run_migrations()
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 324, in initialize_all
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 209, in initialize
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'has_logger': True, 'initialization_error': {'error_type': 'RuntimeError', 'error_message': "Failed to initialize database schema: Database migration failed: name 'threading' is not defined"}}
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-20 23:46:53,606 - dbp.core.lifecycle - WARNING - Rolling back initialization of 2 components
2025-04-20 23:46:53,606 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 23:46:53,606 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 23:46:53,606 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 23:46:53,606 - dbp.core.lifecycle - INFO - Rolling back component 'file_access'...
2025-04-20 23:46:53,606 - dbp.core.lifecycle.file_access.file_access - INFO - Shutting down component 'file_access'...
2025-04-20 23:46:53,606 - dbp.core.lifecycle.file_access.file_access - INFO - File access service cache cleared
2025-04-20 23:46:53,606 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' shut down
2025-04-20 23:46:53,606 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 23:46:53,606 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL - Component 'database' failure details:
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   error_type: RuntimeError
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   error_message: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   error_module: builtins
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   traceback: Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   file: /home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   line: 449
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   function: run_migrations
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL -   line_context: raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['config_manager', 'file_access', 'database', 'change_queue', 'fs_monitor', 'filter', 'memory_cache', 'metadata_extraction', 'doc_relationships', 'consistency_analysis', 'recommendation_generator', 'scheduler', 'llm_coordinator', 'mcp_server']
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 23:46:53,609 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 23:47:16 ---

2025-04-20 23:47:16,930 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:47:16,931 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:47:16,931 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:47:16,931 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745185636.9313736
2025-04-20 23:47:16,931 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:47:16,931 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=139871458141888, name=watchdog_monitor, is_daemon=True
2025-04-20 23:47:16,932 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:47:16,932 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745185636.932079
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:47:16,932 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:47:16,933 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:47:16,933 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:47:16,933 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:47:16,933 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:47:16,933 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:47:16,933 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:47:16,933 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:47:16,933 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:16,964 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:47:16,965 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:47:16,966 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:47:16,967 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:47:16,968 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, database, filter, change_queue, fs_monitor, llm_coordinator, metadata_extraction, scheduler, doc_relationships, memory_cache, consistency_analysis, recommendation_generator, mcp_server
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 23:47:16,968 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:16,968 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:16,969 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:16,969 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 23:47:16,969 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 23:47:16,969 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 23:47:16,969 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:47:16,969 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:16,969 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:16,969 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:47:16,969 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:16,970 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:47:16,970 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:47:16,970 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:47:16,970 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:47:16,970 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:47:16,970 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:16,971 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:16,971 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:47:16,971 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:47:16,971 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:47:16,971 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:47:16,971 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:47:16,971 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:47:16,971 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:16,975 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:47:16,976 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:47:16,976 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:47:16,976 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:47:16,976 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:47:17,033 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:47:17,034 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:47:17,034 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:47:17,034 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 23:47:17,034 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:47:17,035 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:47:17,035 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:47:17,036 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:47:17,036 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:47:17,036 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:47:17,036 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
2025-04-20 23:47:17,036 - dbp.database.alembic_manager - ERROR - Alembic upgrade failed: name 'threading' is not defined
2025-04-20 23:47:17,036 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:17,038 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:47:17,038 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:47:17,038 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [cached since 0.002876s ago] ()
2025-04-20 23:47:17,038 - sqlalchemy.engine.Engine - INFO - [cached since 0.002876s ago] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:47:17,038 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:47:17,038 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:47:17,038 - dbp.database.alembic_manager - ERROR - Current alembic version before failure: 20250416_180000
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:47:17,038 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:47:17,038 - dbp.database.alembic_manager - ERROR - Failed to run database migrations: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,038 - dbp.database.alembic_manager - ERROR - Error type: RuntimeError
2025-04-20 23:47:17,040 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

2025-04-20 23:47:17,040 - dbp.database.alembic_manager - INFO - Restored original logging levels after migration
2025-04-20 23:47:17,040 - dbp.database.database - ERROR - Unexpected error during database initialization: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,040 - dbp.database.database - ERROR - Error type: RuntimeError
2025-04-20 23:47:17,042 - dbp.database.database - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:47:17,042 - dbp.database - ERROR - Failed to initialize database component: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,044 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,044 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -       stop_event = threading.Event()
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -                    ^^^^^^^^^
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   NameError: name 'threading' is not defined. Did you forget to import 'threading'
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database migration failed: {e}") from e
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   RuntimeError: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -       alembic_manager.run_migrations()
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 324, in initialize_all
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 209, in initialize
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'has_logger': True, 'initialization_error': {'error_type': 'RuntimeError', 'error_message': "Failed to initialize database schema: Database migration failed: name 'threading' is not defined"}}
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-20 23:47:17,047 - dbp.core.lifecycle - WARNING - Rolling back initialization of 2 components
2025-04-20 23:47:17,047 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 23:47:17,047 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 23:47:17,047 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 23:47:17,047 - dbp.core.lifecycle - INFO - Rolling back component 'file_access'...
2025-04-20 23:47:17,047 - dbp.core.lifecycle.file_access.file_access - INFO - Shutting down component 'file_access'...
2025-04-20 23:47:17,047 - dbp.core.lifecycle.file_access.file_access - INFO - File access service cache cleared
2025-04-20 23:47:17,047 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' shut down
2025-04-20 23:47:17,047 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 23:47:17,047 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL - Component 'database' failure details:
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   error_type: RuntimeError
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   error_message: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   error_module: builtins
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   traceback: Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   file: /home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   line: 449
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   function: run_migrations
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL -   line_context: raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['config_manager', 'file_access', 'database', 'change_queue', 'fs_monitor', 'filter', 'memory_cache', 'metadata_extraction', 'doc_relationships', 'consistency_analysis', 'recommendation_generator', 'scheduler', 'llm_coordinator', 'mcp_server']
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 23:47:17,050 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 23:47:55 ---

2025-04-20 23:47:56,910 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:47:56,910 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:47:56,910 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:47:56,911 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:47:56,911 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:47:56,911 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745185676.9114175
2025-04-20 23:47:56,911 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:47:56,912 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745185676.9120748
2025-04-20 23:47:56,912 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=139690041349824, name=watchdog_monitor, is_daemon=True
2025-04-20 23:47:56,913 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:47:56,913 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:47:56,913 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:47:56,914 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:47:56,914 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:47:56,915 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:47:56,915 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:47:56,915 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:47:56,915 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:47:56,915 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:47:56,915 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:47:56,915 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:56,955 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:47:56,957 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:47:56,957 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:47:56,957 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:47:56,957 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:47:56,957 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:47:56,957 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:47:56,958 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:47:56,958 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:47:56,958 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:47:56,959 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:47:56,960 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, llm_coordinator, change_queue, fs_monitor, file_access, filter, database, metadata_extraction, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, memory_cache, scheduler
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:56,960 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:56,960 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:47:56,961 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:56,962 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:47:56,962 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:47:56,962 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:47:56,962 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:47:56,962 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:47:56,962 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:56,962 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:56,963 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 23:47:56,963 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 23:47:56,963 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 23:47:56,963 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 23:47:56,963 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 23:47:56,963 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:56,963 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:56,963 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 23:47:56,963 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 23:47:56,963 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 23:47:56,963 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 23:47:56,964 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:47:56,964 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:56,964 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:56,964 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 23:47:56,964 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:47:56,964 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 23:47:56,964 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 23:47:56,964 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 23:47:56,964 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:57,049 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:47:57,049 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 23:47:57,050 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 23:47:57,050 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 23:47:57,050 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 23:47:57,050 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 23:47:57,050 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 23:47:57,050 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 23:47:57,050 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:47:57,051 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:47:57,051 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 23:47:57,051 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:57,051 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:57,051 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:57,051 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 23:47:57,052 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 23:47:57,052 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 23:47:57,052 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 23:47:57,052 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:57,052 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:57,052 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:57,052 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 23:47:57,052 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 23:47:57,122 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:47:57,122 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 23:47:57,122 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 23:47:57,122 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 23:47:57,122 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:47:57,122 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:47:57,122 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:47:57,122 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:47:57,122 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:47:57,122 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:47:57,123 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:47:57,123 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:47:57,123 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:47:57,123 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:57,129 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:47:57,131 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:47:57,131 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:47:57,131 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:47:57,131 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:47:57,220 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:47:57,221 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:47:57,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:47:57,222 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00012s] ()
2025-04-20 23:47:57,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:47:57,222 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:47:57,222 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:47:57,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:47:57,223 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00010s] ()
2025-04-20 23:47:57,223 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:47:57,223 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:47:57,223 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:47:57,223 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:47:57,223 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 23:47:57,223 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:47:57,224 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:47:57,224 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:47:57,224 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:47:57,224 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
2025-04-20 23:47:57,224 - dbp.database.alembic_manager - ERROR - Alembic upgrade failed: name 'threading' is not defined
2025-04-20 23:47:57,225 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:47:57,226 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:47:57,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:47:57,227 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [cached since 0.003995s ago] ()
2025-04-20 23:47:57,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.003995s ago] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:47:57,227 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:47:57,227 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:47:57,227 - dbp.database.alembic_manager - ERROR - Current alembic version before failure: 20250416_180000
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:47:57,227 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:47:57,227 - dbp.database.alembic_manager - ERROR - Failed to run database migrations: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:57,227 - dbp.database.alembic_manager - ERROR - Error type: RuntimeError
2025-04-20 23:47:57,230 - dbp.database.alembic_manager - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

2025-04-20 23:47:57,230 - dbp.database.alembic_manager - INFO - Restored original logging levels after migration
2025-04-20 23:47:57,230 - dbp.database.database - ERROR - Unexpected error during database initialization: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:57,230 - dbp.database.database - ERROR - Error type: RuntimeError
2025-04-20 23:47:57,233 - dbp.database.database - ERROR - Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:47:57,233 - dbp.database - ERROR - Failed to initialize database component: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:57,236 - dbp.core.lifecycle - ERROR - Failed to initialize component 'database': Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:57,236 - dbp.core.lifecycle - ERROR - Exception type: RuntimeError
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -       stop_event = threading.Event()
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -                    ^^^^^^^^^
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   NameError: name 'threading' is not defined. Did you forget to import 'threading'
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database migration failed: {e}") from e
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   RuntimeError: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -       self._db_manager.initialize()
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -       alembic_manager.run_migrations()
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   The above exception was the direct cause of the following exception:
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   Traceback (most recent call last):
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/core/system.py", line 324, in initialize_all
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -       component.initialize(context, resolved_deps)
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -     File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 209, in initialize
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -       raise RuntimeError(f"Database component initialization failed: {e}") from e
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR -   RuntimeError: Database component initialization failed: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR - Component 'database' debug info: {'class_name': 'DatabaseComponent', 'module': 'dbp.database.database', 'initialized': False, 'has_logger': True, 'initialization_error': {'error_type': 'RuntimeError', 'error_message': "Failed to initialize database schema: Database migration failed: name 'threading' is not defined"}}
2025-04-20 23:47:57,239 - dbp.core.lifecycle - ERROR - Dependency 'config_manager' initialized: True
2025-04-20 23:47:57,239 - dbp.core.lifecycle - WARNING - Rolling back initialization of 6 components
2025-04-20 23:47:57,239 - dbp.core.lifecycle - INFO - Rolling back component 'filter'...
2025-04-20 23:47:57,239 - dbp.filter - INFO - Shutting down component 'filter'...
2025-04-20 23:47:57,239 - dbp.filter - INFO - Component 'filter' shut down.
2025-04-20 23:47:57,239 - dbp.core.lifecycle - INFO - Rolling back component 'file_access'...
2025-04-20 23:47:57,239 - dbp.core.lifecycle.file_access.file_access - INFO - Shutting down component 'file_access'...
2025-04-20 23:47:57,239 - dbp.core.lifecycle.file_access.file_access - INFO - File access service cache cleared
2025-04-20 23:47:57,239 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' shut down
2025-04-20 23:47:57,240 - dbp.core.lifecycle - INFO - Rolling back component 'fs_monitor'...
2025-04-20 23:47:57,240 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Shutting down component 'fs_monitor'...
2025-04-20 23:47:57,240 - dbp.fs_monitor.base - INFO - Stopping LinuxFileSystemMonitor...
2025-04-20 23:48:02,240 - dbp.fs_monitor.base - WARNING - LinuxFileSystemMonitor thread did not exit cleanly.
2025-04-20 23:48:02,240 - dbp.fs_monitor.base - INFO - LinuxFileSystemMonitor stopped.
2025-04-20 23:48:02,240 - dbp.fs_monitor.linux - INFO - Linux file system monitor stopped.
2025-04-20 23:48:02,240 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitor stopped
2025-04-20 23:48:02,240 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' shut down
2025-04-20 23:48:02,240 - dbp.core.lifecycle - INFO - Rolling back component 'change_queue'...
2025-04-20 23:48:02,240 - dbp.change_queue - INFO - Shutting down component 'change_queue'...
2025-04-20 23:48:02,240 - dbp.fs_monitor.queue - INFO - Change detection queue cleared.
2025-04-20 23:48:02,240 - dbp.change_queue - INFO - Component 'change_queue' shut down.
2025-04-20 23:48:02,241 - dbp.core.lifecycle - INFO - Rolling back component 'llm_coordinator'...
2025-04-20 23:48:02,241 - dbp.core.lifecycle.llm_coordinator - INFO - Shutting down component 'llm_coordinator'...
2025-04-20 23:48:02,241 - dbp.core.lifecycle.llm_coordinator.job_manager - INFO - JobManager shutdown initiated. No new jobs will be scheduled.
2025-04-20 23:48:02,241 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Shutting down CoordinatorLLM', 'model_name': 'nova-lite'}
2025-04-20 23:48:02,241 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'CoordinatorLLM shutdown completed'}
2025-04-20 23:48:02,241 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' shut down.
2025-04-20 23:48:02,241 - dbp.core.lifecycle - INFO - Rolling back component 'config_manager'...
2025-04-20 23:48:02,241 - dbp.config_manager - INFO - Shutting down component 'config_manager'...
2025-04-20 23:48:02,241 - dbp.config_manager - INFO - Component 'config_manager' shut down.
2025-04-20 23:48:02,241 - dbp.core.lifecycle - ERROR - System startup failed due to component initialization errors.
2025-04-20 23:48:02,241 - dbp.mcp_server.__main__ - CRITICAL - Failed to start components
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL - Component 'database' failure details:
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   error_type: RuntimeError
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   error_message: Failed to initialize database schema: Database migration failed: name 'threading' is not defined
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   error_module: builtins
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   traceback: Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 355, in run_migrations
    stop_event = threading.Event()
                 ^^^^^^^^^
NameError: name 'threading' is not defined. Did you forget to import 'threading'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 431, in run_migrations
    raise RuntimeError(f"Database migration failed: {e}") from e
RuntimeError: Database migration failed: name 'threading' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 200, in initialize
    self._db_manager.initialize()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/database.py", line 395, in initialize
    alembic_manager.run_migrations()
  File "/home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py", line 449, in run_migrations
    raise RuntimeError(f"Failed to initialize database schema: {e}") from e
RuntimeError: Failed to initialize database schema: Database migration failed: name 'threading' is not defined

2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   file: /home/jcjorel/cline-best-practices/src/dbp/database/alembic_manager.py
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   line: 449
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   function: run_migrations
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL -   line_context: raise RuntimeError(f"Failed to initialize database schema: {e}") from e
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - CRITICAL - Components that failed to initialize: ['config_manager', 'file_access', 'database', 'change_queue', 'fs_monitor', 'filter', 'memory_cache', 'metadata_extraction', 'doc_relationships', 'consistency_analysis', 'recommendation_generator', 'scheduler', 'llm_coordinator', 'mcp_server']
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - WARNING - Exit source: LifecycleManager.start()
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - WARNING - Exit reason: Failed to start components
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - WARNING - Server exit detected
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - WARNING - Exit source: Python interpreter shutdown
2025-04-20 23:48:02,245 - dbp.mcp_server.__main__ - WARNING - Exit reason: Process exit via atexit


--- SERVER START ATTEMPT AT 2025-04-20 23:51:03 ---

2025-04-20 23:51:03,712 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:51:03,712 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:51:03,712 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:51:03,712 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745185863.7128286
2025-04-20 23:51:03,713 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:51:03,713 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745185863.7131054
2025-04-20 23:51:03,713 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=140592323303104, name=watchdog_monitor, is_daemon=True
2025-04-20 23:51:03,713 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:51:03,713 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:51:03,714 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:51:03,714 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:51:03,714 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:51:03,714 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:51:03,714 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:51:03,714 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:51:03,714 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:51:03,714 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:51:03,714 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:03,743 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:51:03,744 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:51:03,744 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:51:03,744 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:51:03,745 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:51:03,745 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:51:03,745 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:51:03,745 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:51:03,745 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:51:03,745 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:51:03,746 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Component initialization order: config_manager, filter, llm_coordinator, database, metadata_extraction, memory_cache, file_access, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, change_queue, fs_monitor, scheduler
2025-04-20 23:51:03,746 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:51:03,747 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:03,747 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:03,747 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:51:03,747 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:03,748 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:51:03,749 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:51:03,749 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:51:03,749 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:51:03,749 - dbp.core.lifecycle - INFO - Initializing component 'filter'...
2025-04-20 23:51:03,749 - dbp.core.lifecycle - INFO - Initializing component 'filter' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:03,749 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:03,749 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'filter'
2025-04-20 23:51:03,749 - dbp.filter - INFO - Initializing component 'filter'...
2025-04-20 23:51:03,750 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:03,816 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:51:03,816 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 45 patterns.
2025-04-20 23:51:03,816 - dbp.filter - INFO - Component 'filter' initialized successfully.
2025-04-20 23:51:03,816 - dbp.core.lifecycle - INFO - Component 'filter' initialized successfully
2025-04-20 23:51:03,816 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:51:03,817 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:03,817 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:03,817 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 23:51:03,817 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 23:51:03,817 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 23:51:03,817 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 23:51:03,817 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 23:51:03,817 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:51:03,817 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:03,818 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:03,818 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:51:03,818 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:51:03,818 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:51:03,818 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:51:03,818 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:51:03,818 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:03,818 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:51:03,824 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:51:03,825 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:51:03,825 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:51:03,825 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:51:03,825 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:51:03,914 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:51:03,915 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:51:03,915 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00007s] ()
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:51:03,916 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:51:03,917 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00009s] ()
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:51:03,917 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:51:03,917 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:51:03,917 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:51:03,917 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.


--- SERVER START ATTEMPT AT 2025-04-20 23:51:38 ---

2025-04-20 23:51:38,907 - root - DEBUG - Application logging initialized at level debug with consistent formatting
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Using watchdog timeout from configuration: 20s
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 15
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for signal 2
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 1
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 3
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 6
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 10
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for platform signal 12
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for unhandled exceptions
2025-04-20 23:51:38,908 - dbp.mcp_server.__main__ - DEBUG - Registered exit handler for normal process termination
2025-04-20 23:51:38,908 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initializing watchdog with 20s timeout
2025-04-20 23:51:38,908 - dbp.core.watchdog - CRITICAL - WATCHDOG SETUP: Initial timestamp: 1745185898.9083462
2025-04-20 23:51:38,908 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD STARTED: with 20 second timeout
2025-04-20 23:51:38,908 - dbp.core.watchdog - DEBUG - Process keepalive updated at 1745185898.9087453
2025-04-20 23:51:38,909 - dbp.core.watchdog - CRITICAL - WATCHDOG THREAD INFO: id=140373238552256, name=watchdog_monitor, is_daemon=True
2025-04-20 23:51:38,909 - dbp.mcp_server.__main__ - INFO - Starting MCP server on localhost:6231
2025-04-20 23:51:38,909 - dbp.core.watchdog - DEBUG - WATCHDOG LOOP 1: Waiting for activity
2025-04-20 23:51:38,909 - dbp.mcp_server.__main__ - DEBUG - Arguments: Namespace(host='localhost', port=6231, log_level='debug', log_file=None, startup_timeout=180, startup_check=True, watchdog_timeout=20)
2025-04-20 23:51:38,909 - dbp.mcp_server.__main__ - DEBUG - Successfully imported MCPServerComponent
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - DEBUG - Environment: {'Python version': '3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0]', 'Working directory': '/home/jcjorel/cline-best-practices', 'Module path': '/home/jcjorel/cline-best-practices/src/dbp/mcp_server/__main__.py', 'PATH': '/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash:/home/jcjorel/cline-best-practices/venv/bin:/home/jcjorel/.vscode-server/bin/17baf841131aa23349f217ca7c570c76ee87b957/bin/remote-cli:/home/jcjorel/.local/bin:/home/jcjorel/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/java8path:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Program Files/itacsvc:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/Program Files/Microchip/xc16/v2.10/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin/:/mnt/c/Program Files/IVI Foundation/VISA/Win64/Bin/:/mnt/c/Program Files (x86)/IVI Foundation/VISA/WinNT/Bin:/mnt/c/Program Files/PuTTY/:/mnt/c/Program Files (x86)/ACMEGuardian/:/mnt/c/FPC/3.2.2/bin/i386-Win32:/mnt/c/Program Files (x86)/Quarantine/:/mnt/c/Program Files/Oracle/VirtualBox:/mnt/c/Program Files/GitDefender/bin:/mnt/c/Program Files/Amazon/FOPAzureADMAnagementApp/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/Scripts/:/mnt/c/Users/jcjorel/AppData/Local/Programs/Python/Python313/:/mnt/c/Wincupl/WINCUPL/EXE:/mnt/c/Wincupl/WINCUPL/FITTERS:/mnt/c/Users/jcjorel/AppData/Local/Programs/Git/cmd:/mnt/c/Users/jcjorel/AppData/Local/GitDefender/bin:/mnt/c/Users/jcjorel/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/jcjorel/.dotnet/tools:/snap/bin:/usr/local/bin:/usr/local/bin', 'PYTHONPATH': ''}
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - DEBUG - FastAPI version: 0.115.12
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - DEBUG - Uvicorn available: uvicorn
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - INFO - Checking component dependencies and imports...
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - INFO - FastAPI version: 0.115.12
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - INFO - Uvicorn available: uvicorn
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - DEBUG - Successfully imported tool classes
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - DEBUG - Successfully imported resource classes
2025-04-20 23:51:38,910 - dbp.mcp_server.__main__ - INFO - Starting MCP server using LifecycleManager
2025-04-20 23:51:38,910 - dbp.core.lifecycle - INFO - Loading application configuration...
2025-04-20 23:51:38,910 - dbp.config.config_manager - WARNING - ConfigurationManager already initialized. Skipping re-initialization.
2025-04-20 23:51:38,910 - dbp.core.lifecycle - INFO - Registering components with registry...
2025-04-20 23:51:38,910 - dbp.core.lifecycle - INFO - Using component enablement configuration
2025-04-20 23:51:38,910 - dbp.core.lifecycle - INFO - Registered component factory: 'config_manager' with dependencies: []
2025-04-20 23:51:38,910 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:38,910 - dbp.core.lifecycle - INFO - Registered component class: 'file_access' with dependencies: []
2025-04-20 23:51:38,911 - dbp.core.lifecycle - INFO - Registered component class: 'database' with dependencies: ['config_manager']
2025-04-20 23:51:38,940 - dbp.fs_monitor.macos - WARNING - The 'fsevents' library is required for MacOSFileSystemMonitor but was not found. Install it using 'pip install fsevents'.
2025-04-20 23:51:38,941 - dbp.fs_monitor.windows - WARNING - The 'pywin32' library is required for WindowsFileSystemMonitor but was not found. Install it using 'pip install pywin32'.
2025-04-20 23:51:38,941 - dbp.core.lifecycle - INFO - Registered component class: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:51:38,941 - dbp.core.lifecycle - INFO - Registered component class: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:51:38,941 - dbp.core.lifecycle - INFO - Registered component class: 'filter' with dependencies: ['config_manager']
2025-04-20 23:51:38,941 - dbp.core.lifecycle - INFO - Registered component class: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:51:38,942 - dbp.core.lifecycle - INFO - Registered component class: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:51:38,942 - dbp.core.lifecycle - INFO - Registered component class: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:51:38,942 - dbp.core.lifecycle - INFO - Registered component class: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:51:38,942 - dbp.core.lifecycle - INFO - Registered component class: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registered component class: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registered component class: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registered component class: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registered 14 components with registry
2025-04-20 23:51:38,943 - dbp.core.registry - INFO - Registering 14 components with system
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'config_manager' with dependencies: []
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'file_access' with dependencies: []
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'database' with dependencies: ['config_manager']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'change_queue' with dependencies: ['config_manager']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'fs_monitor' with dependencies: ['config_manager', 'change_queue']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'filter' with dependencies: ['config_manager']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'memory_cache' with dependencies: ['database', 'config_manager']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'metadata_extraction' with dependencies: ['database']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'doc_relationships' with dependencies: ['database', 'metadata_extraction', 'file_access']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'consistency_analysis' with dependencies: ['database', 'doc_relationships', 'metadata_extraction']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'recommendation_generator' with dependencies: ['consistency_analysis', 'database', 'llm_coordinator']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'scheduler' with dependencies: ['config_manager', 'fs_monitor', 'metadata_extraction']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'llm_coordinator' with dependencies: ['config_manager']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Registering component: 'mcp_server' with dependencies: ['consistency_analysis', 'recommendation_generator']
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Starting Documentation-Based Programming system...
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Initializing 14 components
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - All component dependencies validated successfully
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Component initialization order: file_access, config_manager, llm_coordinator, change_queue, fs_monitor, database, memory_cache, metadata_extraction, scheduler, doc_relationships, consistency_analysis, recommendation_generator, mcp_server, filter
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Initializing component 'file_access'...
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Initializing component 'file_access' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:38,943 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:38,943 - dbp.core.lifecycle.file_access.file_access - INFO - Initializing component 'file_access'...
2025-04-20 23:51:38,944 - dbp.core.lifecycle.file_access.file_access - INFO - Component 'file_access' initialized successfully
2025-04-20 23:51:38,944 - dbp.core.lifecycle - INFO - Component 'file_access' initialized successfully
2025-04-20 23:51:38,944 - dbp.core.lifecycle - INFO - Initializing component 'config_manager'...
2025-04-20 23:51:38,944 - dbp.core.lifecycle - INFO - Initializing component 'config_manager' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:38,944 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:38,944 - dbp.config_manager - INFO - Initializing component 'config_manager'...
2025-04-20 23:51:38,944 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:38,945 - dbp.config_manager - INFO - Setting project.root_path to Git root: /home/jcjorel/cline-best-practices
2025-04-20 23:51:38,946 - dbp.config.config_manager - INFO - Configuration value set and validated: project.root_path = /home/jcjorel/cline-best-practices
2025-04-20 23:51:38,946 - dbp.config_manager - INFO - Component 'config_manager' initialized successfully.
2025-04-20 23:51:38,946 - dbp.core.lifecycle - INFO - Component 'config_manager' initialized successfully
2025-04-20 23:51:38,946 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:51:38,946 - dbp.core.lifecycle - INFO - Initializing component 'llm_coordinator' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:38,946 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:38,946 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'llm_coordinator'
2025-04-20 23:51:38,946 - dbp.core.lifecycle.llm_coordinator - INFO - Initializing component 'llm_coordinator'...
2025-04-20 23:51:38,946 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Getting Bedrock client manager instance', 'region': 'us-east-1', 'component': 'CoordinatorLLM'}
2025-04-20 23:51:38,946 - dbp.core.lifecycle.llm_coordinator.coordinator_llm.bedrock - INFO - {'message': 'Bedrock client manager initialized', 'default_region': 'us-east-1', 'prompt_manager_configured': True}
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator.coordinator_llm - INFO - {'message': 'Bedrock client manager instance retrieved successfully', 'component': 'CoordinatorLLM'}
2025-04-20 23:51:38,947 - dbp.llm_coordinator.component - WARNING - Using Placeholder InternalToolExecutionEngine
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_context' -> execute_codebase_context_tool
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_codebase_changelog_context' -> execute_codebase_changelog_tool
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_context' -> execute_documentation_context_tool
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_documentation_changelog_context' -> execute_documentation_changelog_tool
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator.tool_registry - INFO - Internal tool registered: 'coordinator_get_expert_architect_advice' -> execute_expert_architect_advice_tool
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator - INFO - Registered 5 internal tools.
2025-04-20 23:51:38,947 - dbp.core.lifecycle.llm_coordinator - INFO - Component 'llm_coordinator' initialized successfully.
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Component 'llm_coordinator' initialized successfully
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Initializing component 'change_queue'...
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Initializing component 'change_queue' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'change_queue'
2025-04-20 23:51:38,947 - dbp.change_queue - INFO - Initializing component 'change_queue'...
2025-04-20 23:51:38,947 - dbp.change_queue - INFO - Component 'change_queue' initialized successfully.
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Component 'change_queue' initialized successfully
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Initializing component 'fs_monitor' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:38,947 - dbp.core.lifecycle - INFO - Resolved 2 dependencies for component 'fs_monitor'
2025-04-20 23:51:38,947 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Initializing component 'fs_monitor'...
2025-04-20 23:51:38,947 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Change queue component successfully initialized
2025-04-20 23:51:38,947 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Creating monitor for platform with project root: /home/jcjorel/cline-best-practices
2025-04-20 23:51:38,947 - dbp.fs_monitor.factory - INFO - Creating File System Monitor...
2025-04-20 23:51:38,947 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:38,991 - dbp.fs_monitor.filter - INFO - Found 3 .gitignore files.
2025-04-20 23:51:38,992 - dbp.fs_monitor.filter - INFO - GitIgnoreFilter initialized with 37 patterns.
2025-04-20 23:51:38,992 - dbp.fs_monitor.queue - INFO - Event filter set to: GitIgnoreFilter
2025-04-20 23:51:38,992 - dbp.fs_monitor.factory - INFO - Detected Operating System: Linux
2025-04-20 23:51:38,992 - dbp.fs_monitor.factory - INFO - Selected LinuxFileSystemMonitor (inotify).
2025-04-20 23:51:38,992 - dbp.fs_monitor.base - INFO - Starting LinuxFileSystemMonitor...
2025-04-20 23:51:38,992 - dbp.fs_monitor.linux - INFO - Linux file system monitor started successfully.
2025-04-20 23:51:38,993 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - File system monitoring started
2025-04-20 23:51:38,993 - dbp.core.lifecycle.fs_monitor.fs_monitor - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:51:38,993 - dbp.core.lifecycle - INFO - Component 'fs_monitor' initialized successfully
2025-04-20 23:51:38,993 - dbp.core.lifecycle - INFO - Initializing component 'database'...
2025-04-20 23:51:38,993 - dbp.core.lifecycle - INFO - Initializing component 'database' with context type: <class 'dbp.core.component.InitializationContext'>
2025-04-20 23:51:38,993 - dbp.core.lifecycle - INFO - Context attributes: config=<class 'dbp.config.component.ConfigManagerComponent'>, logger=<class 'logging.Logger'>
2025-04-20 23:51:38,993 - dbp.core.lifecycle - INFO - Resolved 1 dependencies for component 'database'
2025-04-20 23:51:38,993 - dbp.database - INFO - Initializing component 'database'...
2025-04-20 23:51:38,993 - dbp.database.database - INFO - Initializing database with type: sqlite
2025-04-20 23:51:38,993 - dbp.database.database - INFO - Initializing SQLite database at: .dbp/database.sqlite
2025-04-20 23:51:38,993 - dbp.core.watchdog - CRITICAL - WATCHDOG CHECK: Time since last keepalive: 0.0s (threshold: 20s)
2025-04-20 23:51:38,993 - dbp.database.database - INFO - SQLite configuration: pool_size=4, timeout=5
2025-04-20 23:51:38,994 - dbp.database.database - INFO - SQLite path: absolute=/home/jcjorel/cline-best-practices/.dbp/database.sqlite, normalized=.dbp/database.sqlite
2025-04-20 23:51:38,999 - dbp.database.database - INFO - Enabling SQLite WAL mode...
2025-04-20 23:51:38,999 - dbp.database.database - INFO - SQLite WAL mode enabled. Current journal mode: wal
2025-04-20 23:51:39,000 - dbp.database.alembic_manager - INFO - Running Alembic migrations to initialize/update the database schema...
2025-04-20 23:51:39,000 - dbp.database.alembic_manager - INFO - Enhanced migration verbosity enabled
2025-04-20 23:51:39,000 - dbp.database.alembic_manager - INFO - Verbose logging enabled for migration operations
2025-04-20 23:51:39,057 - dbp.database.alembic_manager - INFO - Checking available migration versions...
2025-04-20 23:51:39,057 - dbp.database.alembic_manager - INFO - Available migration heads: ['20250416_180000']
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO - Total available revisions: 1
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO - Latest available revisions:
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO -   - 20250416_180000: Initial schema
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO - Running database migrations...
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO - Migration sequence:
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO - 1. Testing database connection
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO - 2. Running upgrade to latest version
2025-04-20 23:51:39,058 - dbp.database.alembic_manager - INFO - 3. Verifying migration success
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:51:39,058 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT 1
2025-04-20 23:51:39,058 - sqlalchemy.engine.Engine - INFO - SELECT 1
INFO  [sqlalchemy.engine.Engine] [generated in 0.00010s] ()
2025-04-20 23:51:39,058 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('1',)
2025-04-20 23:51:39,058 - sqlalchemy.engine.Engine - DEBUG - Col ('1',)
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:51:39,058 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO  [sqlalchemy.engine.Engine] BEGIN (implicit)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
INFO  [sqlalchemy.engine.Engine] SELECT version_num FROM alembic_version
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - INFO - SELECT version_num FROM alembic_version
INFO  [sqlalchemy.engine.Engine] [generated in 0.00008s] ()
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('version_num',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Col ('version_num',)
DEBUG [sqlalchemy.engine.Engine] Row ('20250416_180000',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('20250416_180000',)
2025-04-20 23:51:39,059 - dbp.database.alembic_manager - INFO - Current version before migration: 20250416_180000
INFO  [sqlalchemy.engine.Engine] SELECT name FROM sqlite_master WHERE type='table'
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table'
INFO  [sqlalchemy.engine.Engine] [generated in 0.00006s] ()
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - INFO - [generated in 0.00006s] ()
DEBUG [sqlalchemy.engine.Engine] Col ('name',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Col ('name',)
DEBUG [sqlalchemy.engine.Engine] Row ('alembic_version',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('alembic_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('projects',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('projects',)
DEBUG [sqlalchemy.engine.Engine] Row ('documents',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('document_relationships',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('document_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('functions',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('functions',)
DEBUG [sqlalchemy.engine.Engine] Row ('classes',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('classes',)
DEBUG [sqlalchemy.engine.Engine] Row ('design_decisions',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('design_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('change_records',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('change_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistencies',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistencies',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendations',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendations',)
DEBUG [sqlalchemy.engine.Engine] Row ('suggested_changes',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('suggested_changes',)
DEBUG [sqlalchemy.engine.Engine] Row ('developer_decisions',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('developer_decisions',)
DEBUG [sqlalchemy.engine.Engine] Row ('schema_version',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('schema_version',)
DEBUG [sqlalchemy.engine.Engine] Row ('doc_relationships',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('doc_relationships',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_records',)
2025-04-20 23:51:39,059 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_records',)
2025-04-20 23:51:39,060 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_records',)
DEBUG [sqlalchemy.engine.Engine] Row ('inconsistency_documents',)
2025-04-20 23:51:39,060 - sqlalchemy.engine.Engine - DEBUG - Row ('inconsistency_documents',)
DEBUG [sqlalchemy.engine.Engine] Row ('recommendation_inconsistencies',)
2025-04-20 23:51:39,060 - sqlalchemy.engine.Engine - DEBUG - Row ('recommendation_inconsistencies',)
2025-04-20 23:51:39,060 - dbp.database.alembic_manager - INFO - Existing tables before migration: ['alembic_version', 'projects', 'documents', 'document_relationships', 'functions', 'classes', 'design_decisions', 'change_records', 'inconsistencies', 'recommendations', 'suggested_changes', 'developer_decisions', 'schema_version', 'doc_relationships', 'inconsistency_records', 'recommendation_records', 'inconsistency_documents', 'recommendation_inconsistencies']
INFO  [sqlalchemy.engine.Engine] COMMIT
2025-04-20 23:51:39,060 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-20 23:51:39,060 - dbp.database.alembic_manager - INFO - Upgrading database schema to latest version...
2025-04-20 23:51:39,060 - dbp.database.alembic_manager - INFO - Running migration with enhanced logging...
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
